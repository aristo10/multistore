import{cL as u,r as p,cN as a,cM as f,cS as c}from"./vendor-3a94a37a.js";import{dH as k,dI as T,H as n,C as h,U as S,T as j,dJ as C,dK as E,dL as y}from"./index-ed7845ca.js";import{C as A}from"./CommonDelete-4339174a.js";import{C as N}from"./CreateDrawer-a7af16b9.js";import{U as b}from"./UpdateDrawer-f5580074.js";import{F as i,I as w,B as I,k as g}from"./vendor-large-f75deccb.js";function m({edit:s}){const[t]=i.useForm(),l=u(),o=async r=>{(await l(s!=null&&s.id?k({id:s==null?void 0:s.id,values:r}):T(r))).payload.message==="success"&&(l(n()),s!=null&&s.id||t.resetFields())};return p.useEffect(()=>{s!=null&&s.id&&t.setFieldsValue(s.values)},[s,t]),a.jsx("div",{className:"flex justify-center mt-5",children:a.jsxs(i,{className:"w-4/5",onFinish:o,colon:!1,layout:"vertical",form:t,children:[a.jsx(i.Item,{style:{width:"350px"},label:"Task Status Name",name:"taskStatusName",tooltip:"This is a required field",rules:[{required:!0,message:"This is a required field."}],children:a.jsx(w,{placeholder:"Task Status name"})}),a.jsx(i.Item,{label:"",children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(I,{size:"large",htmlType:"submit",type:"primary",children:s!=null&&s.id?"Update":"Create"})})})]})})}function B(){const s=u(),{list:t,loading:l,total:o,edit:r}=f(e=>e.taskStatus),d=[{title:"NAME",dataIndex:"taskStatusName"},{title:"CREATE DATE",dataIndex:"createdAt",render:e=>c(e).format("ll")},{title:"UPDATE DATE",dataIndex:"updatedAt",render:e=>c(e).format("ll")},{id:3,title:"",key:"action",render:({id:e,taskStatusName:x})=>[{label:a.jsxs("div",{onClick:()=>s(E({id:e,values:{taskStatusName:x}})),className:"flex items-center gap-2 cursor-pointer",children:[a.jsx(g,{className:" rounded-md"}),"Edit"]}),key:"edit"},{label:a.jsx(A,{id:e,title:"delete",permission:"delete-crmTaskStatus",deleteThunk:y,loadThunk:n}),key:"delete"}],csvOff:!0}];return p.useEffect(()=>{s(n())},[s]),a.jsxs(h,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Task status",extra:a.jsx(N,{permission:"create-crmTaskStatus",title:"Create Task Status",width:35,children:a.jsx(m,{})}),children:[a.jsx(S,{permission:"readAll-crmTaskStatus",children:a.jsx(j,{list:t,columns:d,loading:l,total:o,title:"Task Status List",isSearch:!1})}),a.jsx(b,{permission:"update-crmTaskStatus",title:"Update Task Status",width:35,open:r,setClose:C,children:a.jsx(m,{edit:r})})]})}export{B as default};
