import{cL as g,r as s,cO as n,cN as e,cM as w,cS as i}from"./vendor-3a94a37a.js";import{bV as N,ab as y,C as v,U as j,T as V,bW as q}from"./index-ed7845ca.js";import{C as E}from"./CommonDelete-4339174a.js";import{C as F}from"./CreateDrawer-a7af16b9.js";import{A as P}from"./AddDiscount-05e89f9a.js";import{F as a,k as O,M as T,b as h,h as A,D as b,B}from"./vendor-large-f75deccb.js";import"./UploadMany-c4472299.js";function U({data:r}){const o=g(),{type:d,value:c,startDate:l,endDate:u,id:m}=r,[p]=a.useForm(),[t,x]=s.useState(),[Y,D]=s.useState(!1),[C,z]=s.useState({type:d,value:c,startDate:n(l,"YYYY-MM-DD"),endDate:n(u,"YYYY-MM-DD")}),M=()=>{D(!0)},k=async f=>{const I={...f,startDate:n(f.startDate).format("YYYY-MM-DD"),endDate:n(f.endDate).format("YYYY-MM-DD")};(await o(N({id:m,values:I}))).payload.message=="success"&&(D(!1),x(!1))},S=()=>{x(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:M,className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(O,{className:"gray-600  rounded-md"}),"Edit"]}),e.jsx(T,{title:"Update discount",open:Y,onCancel:()=>D(!1),footer:!1,children:e.jsxs(a,{form:p,layout:"vertical",className:"sm:mx-10",initialValues:C,onFinish:k,onFinishFailed:S,autoComplete:"off",labelAlign:"left",children:[e.jsx(a.Item,{style:{marginBottom:"10px"},label:"Type",name:"type",required:!0,children:e.jsxs(h,{children:[e.jsx(h.Option,{children:"Percentage"},"percentage"),e.jsx(h.Option,{children:"Flat"},"flat")]})}),e.jsx(a.Item,{style:{marginBottom:"10px"},label:"Value",name:"value",required:!0,rules:[{required:!0,message:"Please input discount Value!"}],children:e.jsx(A,{size:"small",placeholder:"15"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(a.Item,{label:"Start Date",required:!0,className:"w-1/2",name:"startDate",rules:[{required:!0,message:"Please input Start Date!"}],children:e.jsx(b,{label:"StartDate",size:"small",format:"YYYY-MM-DD"})}),e.jsx(a.Item,{label:"End Date",required:!0,className:"w-1/2",name:"endDate",rules:[{required:!0,message:"Please input End Date!"}],children:e.jsx(b,{label:"endDate",size:"small",format:"YYYY-MM-DD"})})]}),e.jsx(a.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-[24px]",children:e.jsx(B,{loading:t,onClick:()=>x(!0),type:"primary",htmlType:"submit",shape:"round",children:"Update Discount"})})]})})]})}function X(){const r=g(),{list:o,total:d,loading:c}=w(t=>t.discount);s.useState(!1);const[l,u]=s.useState({page:1,count:10,status:"true"}),m=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Type",dataIndex:"type",key:"type"},{id:3,title:"Value",dataIndex:"value",key:"value"},{id:4,title:"Start Date",dataIndex:"startDate",key:"startDate",render:t=>i(t).format("ll"),renderCSV:t=>i(t).format("ll")},{id:5,title:"End Date",dataIndex:"endDate",key:"endDate",render:t=>i(t).format("ll"),renderCSV:t=>i(t).format("ll")},{id:4,title:"",key:"action",render:t=>[{label:e.jsx(j,{permission:"update-discount",children:e.jsx(U,{data:t})}),key:"edit"},{label:e.jsx(E,{values:{id:t.id,status:t.status},title:t.status==="true"?"Hide":"Show",permission:"delete-discount",deleteThunk:q,loadThunk:y,query:l,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],p=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return s.useEffect(()=>{r(y(l))},[r,l]),e.jsxs(v,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Discount",extra:e.jsx(F,{permission:"create-discount",title:"Create Discount",width:35,children:e.jsx(P,{})}),children:[" ",e.jsx(j,{permission:"readAll-discount",children:e.jsx(V,{total:d,columns:m,list:o,loading:c,setPageConfig:u,title:"Discount",filters:p})})]})}export{X as default};
