import{cL as T,r as f,cN as t,cM as j,cQ as x,cO as o}from"./vendor-3a94a37a.js";import{eM as y,eN as u,eO as C,C as S,U as b,T as g,eP as w}from"./index-ed7845ca.js";import{V as k}from"./ViewBtn-ffc9b5cb.js";import{C as N}from"./CommonDelete-4339174a.js";import{C as v}from"./CreateDrawer-a7af16b9.js";import{F as i,g as I,I as H,y as p,B as $}from"./vendor-large-f75deccb.js";function A(){const s=T(),[m]=i.useForm(),[c,a]=f.useState(!1),l=async r=>{a(!0);try{const n={...r,startTime:r.startTime.format("HH:mm"),endTime:r.endTime.format("HH:mm")};(await s(y(n))).payload.message==="success"&&(m.resetFields(),s(u({}))),a(!1)}catch{a(!1)}},h=r=>{a(!1)};return t.jsxs("div",{className:" h-full",children:[t.jsx(I,{level:4,className:"m-3 text-center",children:"Create Shift"}),t.jsxs(i,{form:m,name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:l,onFinishFailed:h,children:[t.jsx(i.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter Shift Name!"}],children:t.jsx(H,{})}),t.jsxs("div",{className:"flex justify-between gap-3",children:[t.jsx(i.Item,{className:"w-full",label:"Start Time",name:"startTime",rules:[{required:!0,message:"Please select Start Time!"}],children:t.jsx(p,{})}),t.jsx(i.Item,{className:"w-full",label:"End Time",name:"endTime",rules:[{required:!0,message:"Please select end Time!"}],children:t.jsx(p,{})})]}),t.jsx(i.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:t.jsx($,{type:"primary",htmlType:"submit",shape:"round",loading:c,children:"Create Shift"})})]})]})}const D=()=>{const s=T(),{list:m,total:c,loading:a}=j(e=>e.shift),[l,h]=f.useState({page:1,count:10,status:"true"}),r=[{id:1,title:"ID",dataIndex:"id",key:"id",render:e=>t.jsx(x,{to:`/admin/hrm/shift/${e}`,children:e}),renderCsv:e=>e},{id:2,title:"Name",dataIndex:"name",key:"name",render:(e,{id:d})=>t.jsx(x,{to:`/admin/hrm/shift/${d}`,children:e}),renderCsv:e=>e},{id:3,title:"Work Hour",dataIndex:"workHour",key:"workHour",render:e=>`${e} Hours`,renderCsv:e=>`${e} Hours`},{id:5,title:"Start Time",dataIndex:"startTime",key:"startTime",render:e=>o(`2023-11-22T${e}`).format("h:mm A"),renderCsv:e=>o(`2023-11-22T${e}`).format("h:mm A")},{id:4,title:"End Time",dataIndex:"endTime",key:"endTime",render:e=>o(`2023-11-22T${e}`).format("h:mm A"),renderCsv:e=>o(`2023-11-22T${e}`).format("h:mm A")},{id:4,title:"",key:"action",render:({id:e,status:d})=>[{label:t.jsx(k,{title:"View",path:`/admin/hrm/shift/${e}`}),key:"view"},{label:t.jsx(N,{values:{id:e,status:d},title:d==="true"?"Hide":"Show",permission:"delete-shift",deleteThunk:w,loadThunk:u,query:l,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],n=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return f.useEffect(()=>(s(u(l)),()=>{s(C())}),[s,l]),t.jsx(S,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Shift List",extra:t.jsx(v,{permission:"create-shift",title:"Create Shift",width:35,children:t.jsx(A,{})}),children:t.jsx(b,{permission:"readAll-shift",children:t.jsx(g,{total:c,columns:r,list:m,loading:a,filters:n,setPageConfig:h,title:"Shift List"})})})};export{D as default};
