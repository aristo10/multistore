import{r as y,cL as C,cN as a,cO as r,cM as Y,cQ as f}from"./vendor-3a94a37a.js";import{U as D,eu as E,ev as j,C as g,T}from"./index-ed7845ca.js";import{C as A}from"./CreateDrawer-a7af16b9.js";import{V as I}from"./ViewBtn-ffc9b5cb.js";import{F as l,b as x,D as h,I as P,B as b,f as L,d as v}from"./vendor-large-f75deccb.js";function M(){const[n]=l.useForm(),[m,d]=y.useState(!1),c=localStorage.getItem("id"),i=C(),p=async o=>{d(!0);try{const e={...o,userId:c,leaveFrom:r(o.leaveFrom).format(),leaveTo:r(o.leaveTo).format()};(await i(E(e))).payload.message=="success"&&(n.resetFields(),i(j({page:1,count:10}))),d(!1)}catch(e){console.log(e)}},{Title:u}=L;return a.jsx("div",{children:a.jsxs(D,{permission:"create-leaveApplication",children:[a.jsx(u,{level:4,className:"m-2 mt-5 mb-5 text-center",children:"Application for Leave"}),a.jsx(l,{form:n,style:{margin:"40px"},name:"basic",layout:"vertical",onFinish:p,autoComplete:"off",children:a.jsxs("div",{children:[a.jsx(l.Item,{style:{marginBottom:"10px"},label:"Leave Type",name:"leaveType",rules:[{required:!0,message:"Please input your leave type!"}],children:a.jsxs(x,{mode:"single",placeholder:"Select leave type",optionFilterProp:"children",children:[a.jsx(x.Option,{value:"PAID",children:"PAID"}),a.jsx(x.Option,{value:"UNPAID",children:"UNPAID"})]})}),a.jsx(l.Item,{style:{marginBottom:"10px"},label:"Start Date",name:"leaveFrom",rules:[{required:!0,message:"Please input your start date!"}],children:a.jsx(h,{})}),a.jsx(l.Item,{style:{marginBottom:"20px"},label:"End Date",name:"leaveTo",rules:[{required:!0,message:"Please input your end date!"}],children:a.jsx(h,{})}),a.jsx(l.Item,{style:{marginBottom:"20px"},label:"Reason",name:"reason",children:a.jsx(P.TextArea,{})}),a.jsx(l.Item,{style:{marginBottom:"10px"},className:"flex justify-center",children:a.jsx(b,{type:"primary",htmlType:"submit",loading:m,children:"Submit Leave"})})]})})]})})}function B(){const n=C(),{list:m,total:d,loading:c}=Y(e=>e.leave),[i,p]=y.useState({page:1,count:10}),u=[{id:1,title:"ID",dataIndex:"id",key:"id",render:e=>a.jsx(f,{to:`/admin/hrm/leave/${e}`,children:e}),renderCsv:e=>e},{id:2,title:" Name",key:"name",dataIndex:"user",render:({firstName:e,lastName:t,id:s})=>a.jsx(f,{to:`/admin/hrm/staff/${s}`,children:e+" "+t}),renderCsv:({firstName:e,lastName:t})=>e+" "+t},{id:3,title:"Leave Type",dataIndex:"leaveType",key:"leaveType"},{id:4,title:"Leave From",key:"leaveFrom",render:({leaveFrom:e,status:t,acceptLeaveFrom:s})=>t==="ACCEPTED"?r(s).format("DD-MM-YYYY"):r(e).format("DD-MM-YYYY"),renderCsv:({leaveFrom:e,status:t,acceptLeaveFrom:s})=>t==="ACCEPTED"?r(s).format("DD-MM-YYYY"):r(e).format("DD-MM-YYYY")},{id:5,title:"Leave To",key:"leaveTo",render:({leaveTo:e,status:t,acceptLeaveTo:s})=>t==="ACCEPTED"?r(s).format("DD-MM-YYYY"):r(e).format("DD-MM-YYYY"),renderCsv:({leaveTo:e,status:t,acceptLeaveTo:s})=>t==="ACCEPTED"?r(s).format("DD-MM-YYYY"):r(e).format("DD-MM-YYYY")},{id:6,title:"Leave Duration",dataIndex:"leaveDuration",key:"leaveDuration",render:e=>e>1?a.jsxs("span",{children:[e," days"]}):a.jsxs("span",{children:[e," day"]}),renderCsv:e=>e>1?e+"days":e+"day"},{id:7,title:"Status",dataIndex:"status",key:"status",render:e=>e==="ACCEPTED"?a.jsx(v,{color:"green",children:e.toUpperCase()}):e==="REJECTED"?a.jsx(v,{color:"red",children:e.toUpperCase()}):a.jsx(v,{color:"orange",children:e.toUpperCase()}),renderCsv:e=>e},{id:7,title:"",key:"action",render:({id:e})=>[{label:a.jsx(I,{title:"View",path:`/admin/hrm/leave/${e}`}),key:"view"}],csvOff:!0}],o=[{key:"status",label:"Status",type:"select",options:[{label:"All"},{label:"ACCEPTED",value:"ACCEPTED"},{label:"PENDING",value:"PENDING"},{label:"REJECTED",value:"REJECTED"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return y.useEffect(()=>{n(j(i))},[n,i]),a.jsx(g,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Leave Application",extra:a.jsx(A,{permission:"create-leaveApplication",title:"Create Leave",width:35,children:a.jsx(M,{})}),children:a.jsx(D,{permission:"readAll-leaveApplication",children:a.jsx(T,{total:d,columns:u,list:m,loading:c,filters:o,setPageConfig:p,title:"Leave List"})})})}export{B as default};
