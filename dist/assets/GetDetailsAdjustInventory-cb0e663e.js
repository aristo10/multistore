import{cN as s,cQ as P,cS as i,cM as A,cL as g,cT as C,r as Q}from"./vendor-3a94a37a.js";import{am as T,aX as k,gM as $,gN as S,C as h,L as F}from"./index-ed7845ca.js";import{T as L,a as y}from"./Tabs-8f68912a.js";import{L as v}from"./List-9eb27318.js";import{i as w}from"./invoiceGenerator-eaeb8720.js";import{n as R}from"./numberToWords-4c291141.js";import{u as z}from"./useCurrency-4b14dd3d.js";import{d as B}from"./vendor-large-f75deccb.js";function E({list:t}){const r=[{title:"ID",dataIndex:"productId",key:"productId"},{title:"Name",dataIndex:"product",render:l=>s.jsx(P,{to:`/admin/product/${l.id}`,children:l.name}),tdClass:"whitespace-normal"},{title:"Adjust Quantity",dataIndex:"adjustQuantity",key:"adjustQuantity"},{title:"Price",dataIndex:"product",key:"productPurchasePrice",render:l=>l.productPurchasePrice}],e=l=>l.map(o=>({...o,key:o.id}));return s.jsx("div",{className:"m-1 md:mt-4",children:s.jsx(T,{scroll:{x:!0},loading:!t,columns:r,data:t?e(t):[]})})}function M({list:t}){const r=[{id:1,title:"ID",dataIndex:"id",key:"id",render:l=>s.jsx(P,{to:`/admin/transaction/${l}`,children:l}),renderCsv:l=>l},{id:2,title:"Date",dataIndex:"date",key:"date",render:l=>i(l).format("ll"),renderCsv:l=>i(l).format("ll")},{id:3,title:"Debit Account",dataIndex:"debit",key:"debit",render:l=>l==null?void 0:l.name,renderCsv:l=>l==null?void 0:l.name},{id:4,title:"Credit Account",dataIndex:"credit",key:"credit",render:l=>l==null?void 0:l.name,renderCsv:l=>l==null?void 0:l.name},{id:5,title:"Amount",dataIndex:"amount",key:"amount",responsive:["md"]},{title:"Type",dataIndex:"type",key:"type"},{id:6,title:"Particulars",dataIndex:"particulars",key:"particulars"}],e=l=>l.map(o=>({...o,key:o.id}));return s.jsx("div",{className:"m-1 md:mt-4",children:s.jsx(T,{scroll:{x:!0},loading:!t,columns:r,data:t?e(t):[]})})}function G({data:t,title:r,type:e,btnName:l}){var a;const{currencyName:o}=z()||{},u=A(n=>{var c;return(c=n==null?void 0:n.setting)==null?void 0:c.data})||null;g();const d=[{label:"IN WORDS: ",value:`${R(Math.round(t==null?void 0:t.totalAdjustPrice)).toUpperCase()} ${o}`||""},{label:"Notes: ",value:t!=null&&t.note?t==null?void 0:t.note:""}],m=[{label:"Total Increment Quantity",value:`${t!=null&&t.totalIncrementQuantity?t.totalIncrementQuantity:0}`},{label:"Total Increment Price",value:`${t!=null&&t.totalIncrementPrice?t.totalIncrementPrice.toFixed(2):0}`},{label:"Total Decrement Quantity",value:`${t!=null&&t.totalDecrementQuantity?t.totalDecrementQuantity:0}`},{label:"Total Decrement Price",value:`${t!=null&&t.totalDecrementPrice?t.totalDecrementPrice.toFixed(2):0}`}],x=["SL","Adjust Id","Product","Adjust Quantity","Adjust Price","Date"],p=(a=t==null?void 0:t.adjustInvoiceProduct)==null?void 0:a.map((n,c)=>[`${c+1}`,n==null?void 0:n.adjustInvoiceId,n==null?void 0:n.product.name,n==null?void 0:n.adjustQuantity,n==null?void 0:n.product.productPurchasePrice,i(n==null?void 0:n.product.createdAt).format("ll")]),b=[{value:`Adjust By: ${t.user&&t.user.username}`},{value:`Adjust Type: ${t.adjustType&&t.adjustType}`}],f=[{value:`Adjust Date: ${i(t==null?void 0:t.createdAt).format("ll")}`},{value:`Invoice Id:${t==null?void 0:t.id} `}],j={jsPDF:{},tableFontSize:8,dataTopFontSize:10,bottomRightFontSize:10,bottomLeftFontSize:8,footerFontSize:10};return s.jsx("div",{className:"flex gap-2",children:s.jsx(k,{className:"bg-primary flex justify-center items-center px-4 py-2 text-white rounded",onClick:()=>w(e,{title:r,TopRightInfo:f,companyInfo:u,customerInfo:b,bottomLeftContent:d,bottomRightContent:m,tableBody:p,tableHead:x,settings:j,leftBottomSecondColunmX:34,rightColumnLevelPosition:10}),children:l})})}function V(){var o,u,N,d,m,x,p,b,f,j,a,n,c,I;const t=g(),{id:r}=C(),{adjustInventory:e,loading:l}=A(D=>D.adjustInventory);return Q.useEffect(()=>(t($(r)),()=>{t(S())}),[t,r]),s.jsx(s.Fragment,{children:e?s.jsxs("div",{className:"flex gap-2 md:gap-4",children:[s.jsxs(h,{className:"w-2/3",bodyClass:"p-0",children:[s.jsx("div",{className:"flex justify-between mx-2 py-2 border-b items-center",children:s.jsx("div",{className:"flex gap-3",children:s.jsx("div",{className:"text-end ",children:e&&s.jsx(G,{data:e==null?void 0:e.adjustInvoice,title:"Adjust Invoice",type:"print",btnName:"Print"})})})}),s.jsxs(L,{className:"mt-4",children:[s.jsx(y,{label:"Products",children:s.jsx(E,{list:(o=e==null?void 0:e.adjustInvoice)==null?void 0:o.adjustInvoiceProduct})}),s.jsx(y,{label:"Transactions",children:s.jsx(M,{list:e==null?void 0:e.transaction})})]})]}),s.jsxs("div",{className:"w-1/3 flex flex-col gap-2 md:gap-4",children:[s.jsx(h,{title:s.jsx("div",{className:"flex items-center",children:s.jsxs("span",{className:"font-normal",children:["Invoice No"," ",s.jsxs("span",{className:"font-semibold",children:["#",(u=e==null?void 0:e.adjustInvoice)==null?void 0:u.id]})]})}),children:s.jsx(s.Fragment,{children:s.jsx(v,{labelClassName:"w-[40%]",list:[{label:"Invoice Date",value:i((N=e==null?void 0:e.adjustInvoice)==null?void 0:N.date).format("ll")},{label:"Adjust Type",value:s.jsx(B,{color:((d=e==null?void 0:e.adjustInvoice)==null?void 0:d.adjustType)==="INCREMENT"?"green":"red",children:(m=e==null?void 0:e.adjustInvoice)==null?void 0:m.adjustType})},{label:"Adjust By ",value:(p=(x=e==null?void 0:e.adjustInvoice)==null?void 0:x.user)==null?void 0:p.username}]})})}),s.jsx(h,{title:"Adjust Details",children:s.jsx(v,{labelClassName:"w-[40%]",list:[{label:"Increment Quantity",value:s.jsx("div",{className:"before:content-['+'] relative before:absolute before:text-green-500 before:font-bold before:-left-3 before:top-0",children:(b=e==null?void 0:e.adjustInvoice)!=null&&b.totalIncrementQuantity?Number((f=e==null?void 0:e.adjustInvoice)==null?void 0:f.totalIncrementQuantity):0}),className:" pb-2"},{label:"Decrement Quantity",value:s.jsxs("div",{className:"before:content-['-'] relative before:absolute before:text-red-500 before:font-bold before:-left-3 before:top-0",children:[" ",(j=e==null?void 0:e.adjustInvoice)!=null&&j.totalDecrementQuantity?Number((a=e==null?void 0:e.adjustInvoice)==null?void 0:a.totalDecrementQuantity):0]}),className:"border-b pb-2"},{label:"Total Adjust Amount",value:(n=e==null?void 0:e.adjustInvoice)!=null&&n.totalAdjustPrice?Number((c=e==null?void 0:e.adjustInvoice)==null?void 0:c.totalAdjustPrice).toFixed(2):0,className:" pb-2"}]})}),s.jsx(h,{children:s.jsx(v,{labelClassName:"w-[40%] font-bold",list:[{label:"Note",value:(I=e==null?void 0:e.adjustInvoice)==null?void 0:I.note,className:"flex-col gap-1"}]})})]})]}):s.jsx(F,{})})}export{V as default};
