import{cL as A,r as i,cM as y,cN as e,cO as b,cS as P,cQ as I}from"./vendor-3a94a37a.js";import{fr as S,ac as D,fs as O,ft as T,aH as k,C as L,U as w,T as B}from"./index-ed7845ca.js";import{C as F}from"./CreateDrawer-a7af16b9.js";import{A as q}from"./AddCustomer-f6c915fd.js";import{B as N}from"./BigDrawer-240149a9.js";import{A as E}from"./AddPaymentMethod-df418ab3.js";import{F as l,H as v,b as o,I as f,B as U,D as H,M as R}from"./vendor-large-f75deccb.js";import{U as V}from"./UpdatePayment-202f946d.js";import"./UploadMany-c4472299.js";import"./AddAccount-8cfc0f4b.js";function X(){const[d]=l.useForm(),n=A(),[h,c]=i.useState(!1),{list:s,loading:p}=y(a=>a.paymentMethod),{list:m}=y(a=>a.customers),[u,j]=i.useState(null),[x,C]=i.useState(null),t=a=>{const r={...a,paymentMethodId:u,customerId:x};n(O(r)).payload.message=="success"&&n(T({page:1,count:10,status:"true"})),c(!1)},g=()=>{};i.useEffect(()=>{n(S()),n(D({query:"all"}))},[n]);const M=a=>{j(a)},Y=a=>{C(a)};return e.jsx("div",{children:e.jsxs(l,{form:d,name:"basic",layout:"vertical",className:"sm:mx-10",initialValues:{remember:!0},onFinish:t,onFinishFailed:g,autoComplete:"off",children:[e.jsx(l.Item,{style:{marginBottom:"15px"},label:"Payment Method",name:"paymentMethodId",rules:[{required:u===null,message:"Please select payment method !"}],children:e.jsxs(v.Compact,{block:!0,children:[e.jsx(o,{name:"paymentMethodId",loading:p,showSearch:!0,placeholder:"Select Payment Method",optionFilterProp:"children",filterOption:(a,r)=>r.children.includes(a),filterSort:(a,r)=>a.children.toLowerCase().localeCompare(r.children.toLowerCase()),onChange:M,children:s&&s.map(a=>e.jsx(o.Option,{value:a.id,children:a.methodName},a.id))}),e.jsx(N,{btnTitle:"Add Payment Method",title:"new Payment Method",children:e.jsx(E,{})})]})}),e.jsx(l.Item,{style:{marginBottom:"15px"},label:"Customer",name:"customerId",rules:[{required:x===null,message:"Please select customer !"}],children:e.jsxs(v.Compact,{block:!0,children:[e.jsx(o,{name:"paymentMethodId",loading:!m,showSearch:!0,placeholder:"Select Payment Method",optionFilterProp:"children",filterOption:(a,r)=>r.children.includes(a),filterSort:(a,r)=>a.children.toLowerCase().localeCompare(r.children.toLowerCase()),onChange:Y,children:m&&m.map(a=>e.jsx(o.Option,{value:a.id,children:a.username},a.id))}),e.jsx(N,{btnTitle:"Add Customer",title:"new customer",children:e.jsx(q,{})})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l.Item,{style:{marginBottom:"15px"},label:"Amount",name:"amount",className:"w-full",rules:[{required:!0,message:"Please input amount !"}],children:e.jsx(f,{})}),e.jsx(l.Item,{style:{marginBottom:"15px"},label:"Order Id",name:"cartOrderId",className:"w-full",rules:[{required:!0,message:"Please select Order !"}],children:e.jsx(f,{})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l.Item,{style:{marginBottom:"15px"},label:"Customer Account",name:"CustomerAccount",className:"w-full",rules:[{required:!0,message:"Please select customer account!"}],children:e.jsx(f,{})}),e.jsx(l.Item,{style:{marginBottom:"15px"},label:"TRX Id",name:"CustomerTransactionId",className:"w-full",rules:[{required:!0,message:"Please input Customer Transaction Id !"}],children:e.jsx(f,{})})]}),e.jsx(l.Item,{style:{marginBottom:"15px"},className:"flex justify-center mt-[24px]",children:e.jsx(U,{type:"primary",htmlType:"submit",shape:"round",loading:h,onClick:()=>{c(!0)},children:"Create Manual Payment"})})]})})}function $({setPageConfig:d}){const{list:n,loading:h}=y(s=>s.paymentMethod),c=(s,p)=>{d(m=>({...m,[p]:s,page:1}))};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"filterTag float-left min-w-[145px] max-w-[150px]",children:e.jsx(o,{placeholder:"Payment Method",loading:h,showSearch:!1,style:{width:"100%"},maxTagPlaceholder:s=>e.jsxs("div",{className:"",children:[s.length," Selected"]}),maxTagCount:0,onChange:s=>c(s,"paymentMethodId"),allowClear:!0,children:n==null?void 0:n.map(s=>e.jsx(o.Option,{value:s.id,children:s==null?void 0:s.methodName},s.id))})}),e.jsx("div",{className:"filterTag float-left min-w-[85px] max-w-[150px]",children:e.jsxs(o,{placeholder:"Status",className:"",showSearch:!1,mode:"multiple",style:{width:"100%"},maxTagPlaceholder:s=>e.jsxs("div",{className:"",children:[s.length," Selected"]}),maxTagCount:0,onChange:s=>c(s,"status"),children:[e.jsx(o.Option,{value:"true",children:"Show"},"true"),e.jsx(o.Option,{value:"false",children:"Hide"},"false")]})})]})}function se(){const d=A(),[n,h]=i.useState(!1),{list:c,total:s,loading:p}=y(t=>t.manualPayment),[m,u]=i.useState({page:1,count:10,status:"true"}),j=()=>{h(!1)},x=[{id:1,title:"Invoice No",dataIndex:"cartOrderId",key:"cartOrderId",render:t=>e.jsx(I,{to:`/admin/order/${t}`,children:t}),renderCsv:t=>t},{id:2,title:"Customer",dataIndex:"customer",key:"customer",render:t=>e.jsx(I,{to:`/admin/hrm/staff/${t.id}`,children:t.username}),renderCsv:t=>t.username},{id:3,title:"Account No",dataIndex:"customerAccount",key:"customerAccount",render:t=>t||"-",renderCsv:t=>t},{id:4,title:"Amount",dataIndex:"amount",key:"amount"},{id:5,title:"Method",dataIndex:"paymentMethod",key:"paymentMethod",render:t=>t.methodName,renderCsv:t=>t.methodName},{id:6,title:"TRX ID",dataIndex:"customerTransactionId",key:"customerTransactionId",render:t=>t||"-",renderCsv:t=>t},{id:7,title:"Created At",dataIndex:"createdAt",key:"createdAt",render:t=>P(t).format("YYYY-MM-DD"),renderCsv:t=>P(t).format("YYYY-MM-DD")},{id:8,title:"Action",key:"Action",render:t=>e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(w,{permission:"update-manualPayment",children:e.jsx(V,{data:t})})}),csvOff:!0}];i.useEffect(()=>{d(k(m))},[d,m]),i.useEffect(()=>{d(S())},[d]);const C=t=>{const g=t.format("YYYY-MM-DD");u(M=>({...M,fromDate:g}))};return e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"E-Com Payments",extra:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(H,{onChange:C,allowClear:!0,className:"sm:w-2/5 md:w-[30%]",defaultValue:b(P().endOf("month").format("YYYY-MM-DD"),"YYYY-MM-DD")}),e.jsx(F,{className:"sm:w-3/5 md:w-[70%]",permission:"create-manualPayment",title:"Create Manual Payment",width:35,children:e.jsx(X,{})})]}),children:e.jsx(w,{permission:"readAll-manualPayment",children:e.jsx(B,{total:s,columns:x,list:c,loading:p,setPageConfig:u,title:"Manual Payment List",isSearch:!0,filter:e.jsx($,{setPageConfig:u})})})}),e.jsx(R,{title:"Update Manual Payment",open:n,onCancel:j,footer:!1})]})}export{se as default};
