import{d3 as K,d4 as X,d5 as Z,cL as B,cN as a,cT as V,r as Q,cM as Y,cQ as o,d0 as ee,dc as ae,du as A,cS as te}from"./vendor-3a94a37a.js";import{ao as W,ap as z,fK as T,a5 as se,aX as re,c4 as le,g_ as ie,C as ne,bt as de,U as oe,cl as ce,am as R,L as me,s as ue}from"./index-ed7845ca.js";import{L as g}from"./List-9eb27318.js";import{u as xe}from"./useCurrency-4b14dd3d.js";import{V as he}from"./ViewBtn-ffc9b5cb.js";import{C as pe}from"./CommonDelete-4339174a.js";import{B as ge}from"./BigDrawer-240149a9.js";import{M as be}from"./MediaGallery-5095f29f.js";import{P as fe,F as L,Q as J,j as je,n as ye,k as ve,T as $}from"./vendor-large-f75deccb.js";import{F as Ne}from"./FormProductListCard-571d2cbc.js";import{G as we}from"./BarcodeGenerator-1ab2db8d.js";import"./UploaderWithDrag-568744bd.js";import"./AddProductAttribute-4ec2c5fe.js";import"./UploadMany-c4472299.js";import"./AddProductAttributeValue-d16feddc.js";const Ie={list:null,error:"",loading:!1,total:0},Pe=K("product/deleteImage",async({values:t,id:i})=>{try{const{data:l}=await X({method:"patch",url:`product/${i}`,headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:t});return W(l,"Product image deleted successfully")}catch(l){return z(l,!0)}}),ke=K("product/addProductGalleryImage",async({values:t,id:i})=>{try{const{data:l}=await X({method:"put",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},url:`product/${i}`,data:t});return W(l,"Product image added successfully")}catch(l){return z(l,!0)}});Z({name:"GalleryImageSlice",initialState:Ie,reducers:{},extraReducers:t=>{}});function Ge({product:t}){const i=B(),{id:l,data:n}=t,e=4-(n==null?void 0:n.length),c=async h=>{var u;((u=(await i(ke({values:{galleryImage:h.map(x=>x.id)},id:l}))).payload)==null?void 0:u.message)==="success"&&i(T(l))},d=a.jsx("button",{className:"mx-1 flex justify-center items-center bg-[#2890FF] hover:bg-[#79b1ed] rounded p-1 gap-1 text-white",type:"button",children:a.jsx(fe,{className:"text-[10px] flex items-center"})});return a.jsx(a.Fragment,{children:a.jsx("div",{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:a.jsx(be,{button:d,isMultiple:!0,onInsert:c,maxCount:e})})})})}function Ce({product:t}){var x,f,j,y,v,N,w,I,P,k,G,C,S;const i=B(),{id:l}=V(),[n]=L.useForm(),[e,c]=Q.useState(!1),d=Y(p=>{var m;return(m=p.discount)==null?void 0:m.list}),[h,b]=Q.useState([]),u=async p=>{c(!0);try{const m={...p,productGroupId:t==null?void 0:t.productGroup.id};(await i(le(m))).payload.message==="success"&&(n.resetFields(),i(T(l)))}catch{c(!1)}finally{c(!1)}};return Q.useEffect(()=>{i(se())},[i]),a.jsx(a.Fragment,{children:a.jsxs(L,{form:n,name:"basic",layout:"vertical",className:"sm:mx-4",initialValues:{productGroupName:(x=t==null?void 0:t.productGroup)==null?void 0:x.productGroupName},onFinish:u,autoComplete:"off",children:[a.jsx("div",{children:a.jsxs("div",{className:"my-4",children:[a.jsx("h1",{className:"border-b pb-1 text-base font-medium text-gray-600",children:"Product Group Information"}),a.jsx(g,{labelClassName:"w-[35%] md:w-[30%] 2xl:w-[25%]",list:[{label:"Manufacturer",value:a.jsx(o,{to:`/admin/manufacturer/${(f=t==null?void 0:t.productGroup.manufacturer)==null?void 0:f.id}`,children:(j=t==null?void 0:t.productGroup.manufacturer)==null?void 0:j.name})},{label:"Brand",value:a.jsx(o,{to:`/admin/product-brand/${(y=t==null?void 0:t.productGroup.productBrand)==null?void 0:y.id}`,children:(v=t==null?void 0:t.productGroup.productBrand)==null?void 0:v.name})},{label:"Category",value:a.jsx(o,{to:`/admin/product-category/${(w=(N=t==null?void 0:t.productGroup.subCategory)==null?void 0:N.productCategory)==null?void 0:w.id}`,children:(P=(I=t.productGroup.subCategory)==null?void 0:I.productCategory)==null?void 0:P.name})},{label:"Sub-category",value:a.jsx(o,{to:`/admin/product-subcategory/${(k=t==null?void 0:t.productGroup.subCategory)==null?void 0:k.id}`,children:(G=t==null?void 0:t.productGroup.subCategory)==null?void 0:G.name})},{label:"UoM",value:a.jsx(a.Fragment,{children:(t==null?void 0:t.productGroup.uom)&&`${t==null?void 0:t.productGroup.uomValue}${(C=t==null?void 0:t.productGroup.uom)!=null&&C.name?`/${t.productGroup.uom.name}`:""}`})}]})]})}),a.jsx(Ne,{setAttributeId:b,form:n,discount:d,productGroupName:(S=t==null?void 0:t.productGroup)==null?void 0:S.variantName}),a.jsx(L.Item,{style:{marginBottom:"15px"},className:"flex justify-center mt-[24px]",children:a.jsx(re,{color:"primary",type:"submit",loading:e,children:"Add Variant"})})]})})}function Se({data:t=[]}){const i=B(),{id:l}=V(),n=async e=>{var d;var c=window.confirm("Are you sure you want to delete?");c&&((d=(await i(Pe({id:l,values:{galleryImage:e}}))).payload)==null?void 0:d.message)==="success"&&i(T(l))};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(e=>a.jsxs("div",{className:"relative w-[150px] h-[90px] p-1 md:p-2 group",children:[a.jsx(J,{className:"object-fill",height:90,width:150,src:`${window.env.VITE_APP_API}/media/view/${e.imageName}`||"/images/default.jpg"}),a.jsx("div",{className:"absolute top-4 right-0 invisible  group-hover:visible",children:a.jsx("div",{onClick:()=>n(e.imageName),className:"flex items-center gap-2",children:a.jsx(je,{className:"bg-red-600 text-white inline-block rounded-md p-3"})})})]},e.id))})})}const qe=()=>{var b,u,x,f,j,y,v,N,w,I,P,k,G,C,S,p,m,F,E,_,D,M,U,O,H;const{id:t}=V(),i=[{id:1,title:"ID",dataIndex:"id",key:"id",width:"50px",render:s=>a.jsx(o,{to:`/admin/product/${s}`,children:s}),renderCsv:s=>s},{id:2,title:"Image",dataIndex:"productThumbnailImage",render:s=>a.jsx("div",{className:"w-[2.5rem] h-[1.375rem] relative",children:a.jsx("img",{className:"absolute object-cover w-full h-full",alt:"product",onError:h,src:`${window.env.VITE_APP_API}/media/view/${s}`||"/images/default.jpg"})}),key:"image",width:"70px",csvOff:!0},{id:4,title:"Name",dataIndex:"name",key:"name",render:(s,{id:r})=>a.jsx(o,{title:s,to:`/admin/product/${r}`,children:ue(s,45)}),width:"150px",renderCsv:s=>s,tdClass:"whitespace-normal"},{id:3,title:"SKU",dataIndex:"sku",key:"sku"},{id:7,title:"Purchase price",dataIndex:"stockInfo",render:s=>{var r;return(r=s[0])==null?void 0:r.productPurchasePrice},renderCsv:s=>{var r;return(r=s[0])==null?void 0:r.productPurchasePrice},key:"productPurchasePrice",responsive:["md"]},{id:8,title:"Sale price",dataIndex:"stockInfo",render:s=>{var r;return(r=s[0])==null?void 0:r.productSalePrice},renderCsv:s=>{var r;return(r=s[0])==null?void 0:r.productSalePrice},key:"productSalePrice",responsive:["md"]},{id:9,title:"Attributes",dataIndex:"productProductAttributeValue",key:"productProductAttributeValue",render:s=>s==null?void 0:s.map((r,q)=>a.jsxs("span",{children:[r.productAttributeValue.productAttribute.name,":"," ",r.productAttributeValue.name,q!==s.length-1?", ":""]},q))},{id:6,title:"Quantity",dataIndex:"stockInfo",render:s=>{var r;return(r=s[0])==null?void 0:r.productQuantity},renderCsv:s=>{var r;return(r=s[0])==null?void 0:r.productQuantity},key:"productQuantity"},{id:12,title:"Reorder QTY",dataIndex:"stockInfo",render:s=>{var r;return(r=s[0])==null?void 0:r.reorderQuantity},renderCsv:s=>{var r;return(r=s[0])==null?void 0:r.reorderQuantity},key:"reorderQuantity"},{id:13,title:"",key:"action",render:({id:s})=>[{label:a.jsx(he,{title:"View",path:`/admin/product/${s}`}),key:"view"}],csvOff:!0}],l=[{id:1,title:"Store",dataIndex:"store",render:s=>s==null?void 0:s.name,renderCsv:s=>s==null?void 0:s.name,key:"store"},{id:1,title:"Purchase price",dataIndex:"productPurchasePrice",key:"productPurchasePrice"},{id:1,title:"Sale price",dataIndex:"productSalePrice",key:"productSalePrice"},{id:1,title:"Quantity",dataIndex:"productQuantity",key:"productQuantity"},{id:1,title:"Reorder quantity",dataIndex:"reorderQuantity",key:"reorderQuantity"},{id:1,title:"Negative Sell Allowed",dataIndex:"isNegativeSale",key:"isNegativeSale",render:s=>s==="true"?"Yes":"No"}],n=B(),{product:e,error:c}=Y(s=>s.products),d=xe();Q.useEffect(()=>(n(T(t)),()=>{n(ie())}),[n,t]);const h=s=>{s.target.src="/images/default.jpg"};return a.jsx(a.Fragment,{children:e?a.jsx(ne,{className:"bg-white",title:a.jsxs(a.Fragment,{children:[a.jsx("div",{children:e==null?void 0:e.name}),(e==null?void 0:e.status)==="true"?a.jsx("span",{className:"px-2 py-[2px] font-normal text-sm bg-green-500 text-white rounded-full",children:"Active"}):a.jsx("span",{className:"px-2 py-[2px] font-normal text-sm bg-gray-500 text-white rounded-full",children:"Inactive"})]}),extra:a.jsx(ye,{className:"mr-1",content:a.jsx(de,{items:[{label:a.jsx(oe,{permission:"update-product",children:a.jsxs(o,{to:`/admin/product/${e==null?void 0:e.id}/update`,className:"flex items-center gap-2 cursor-pointer",children:[a.jsx(ve,{className:" rounded-md"}),"Edit"]})}),key:"edit"},{label:a.jsx(pe,{values:{id:t,status:e==null?void 0:e.status},title:e.status==="true"?"Hide":"Show",permission:"delete-product",deleteThunk:ce,loadThunk:T,query:t,className:"bg-white text-black"}),key:"delete"},{label:a.jsxs(o,{to:`/admin/print-barcode/${t}`,className:"flex items-center gap-2 rounded",children:[a.jsx(ee,{className:"text-[1rem]"}),"Barcode print"]}),key:"barcode"}]}),placement:"bottomRight",arrow:!1,trigger:"click",children:a.jsx(ae,{className:"cursor-pointer text-base"})}),children:a.jsxs("div",{className:"my-4 xl:px-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"w-full md:w-1/2",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"border-b pb-1 text-base font-medium text-gray-600",children:"Specifications"}),a.jsx(g,{labelClassName:"w-[35%] md:w-[30%] 2xl:w-[25%]",list:[{label:"Manufacturer",value:a.jsx(o,{to:`/admin/manufacturer/${(b=e==null?void 0:e.productGroup.manufacturer)==null?void 0:b.id}`,children:(u=e==null?void 0:e.productGroup.manufacturer)==null?void 0:u.name})},{label:"Brand",value:a.jsx(o,{to:`/admin/product-brand/${(x=e==null?void 0:e.productGroup.productBrand)==null?void 0:x.id}`,children:(f=e==null?void 0:e.productGroup.productBrand)==null?void 0:f.name})},{label:"Category",value:a.jsx(o,{to:`/admin/product-category/${(y=(j=e==null?void 0:e.productGroup.subCategory)==null?void 0:j.productCategory)==null?void 0:y.id}`,children:(N=(v=e.productGroup.subCategory)==null?void 0:v.productCategory)==null?void 0:N.name})},{label:"Sub-category",value:a.jsx(o,{to:`/admin/product-subcategory/${(w=e==null?void 0:e.productGroup.subCategory)==null?void 0:w.id}`,children:(I=e==null?void 0:e.productGroup.subCategory)==null?void 0:I.name})},{label:"UoM",value:a.jsx(a.Fragment,{children:(e==null?void 0:e.productGroup.uom)&&`${e==null?void 0:e.productGroup.uomValue}${(P=e==null?void 0:e.productGroup.uom)!=null&&P.name?`/${e.productGroup.uom.name}`:""}`})},{label:"Attributes",value:a.jsx(g,{labelClassName:"w-auto",list:(k=e==null?void 0:e.productProductAttributeValue)==null?void 0:k.map(s=>({label:s.productAttributeValue.productAttribute.name+":",value:s.productAttributeValue.name}))})},e.length&&{label:"Length",value:e.length},e.width&&{label:"Width",value:e.width},e.height&&{label:"Height",value:e.height},e.weight&&{label:"Weight",value:e.weight}]})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("h1",{className:"border-b pb-1 text-base font-medium text-gray-600",children:"Product Pricing"}),a.jsx(g,{labelClassName:"w-[35%] md:w-[30%] 2xl:w-[25%]",list:[{label:"Sale Price",value:a.jsxs("span",{className:"",children:[a.jsx("span",{dangerouslySetInnerHTML:{__html:d==null?void 0:d.currencySymbol}}),(G=e==null?void 0:e.stockInfo[0])==null?void 0:G.productSalePrice]})},{label:"Purchase Price",value:a.jsxs("span",{className:"",children:[a.jsx("span",{dangerouslySetInnerHTML:{__html:d==null?void 0:d.currencySymbol}}),(C=e==null?void 0:e.stockInfo[0])==null?void 0:C.productPurchasePrice]})},{label:"Purchase TAX",value:`${(S=e==null?void 0:e.productGroup.productPurchaseTax)!=null&&S.percentage?(p=e==null?void 0:e.productGroup.productPurchaseTax)==null?void 0:p.percentage:0}%`},{label:"Sale TAX",value:`${(m=e==null?void 0:e.productGroup.productSalesTax)!=null&&m.percentage?(F=e==null?void 0:e.productGroup.productSalesTax)==null?void 0:F.percentage:0}%`},{label:"Discount",value:(E=e==null?void 0:e.discount)!=null&&E.value?`${e==null?void 0:e.discount.value}${(e==null?void 0:e.discount.type)=="percentage"?"%":" flat"}`:"0%"}]})]})]}),a.jsx("div",{className:"w-full md:w-1/2",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(we,{sku:e==null?void 0:e.sku}),a.jsx(J,{className:"fluid  max-w-[300px] aspect-square",src:window.env.VITE_APP_API+"/media/view/"+e.productThumbnailImage||"/images/default.jpg",onError:h}),a.jsx("span",{className:"mt-4"})]})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 py-4",children:[a.jsxs("div",{className:"w-full md:w-1/2",children:[a.jsx("h1",{className:"border-b pb-1 text-base font-medium text-gray-600",children:"Item Details"}),a.jsx(g,{labelClassName:"w-[35%] md:w-[30%] 2xl:w-[25%]",list:[{label:a.jsxs("span",{className:"flex items-center gap-1",children:["SKU",a.jsx($,{placement:"topLeft",title:"The stock keeping unit of the item",children:a.jsx(A,{})})]}),value:e==null?void 0:e.sku},(e==null?void 0:e.eanNo)&&{label:a.jsxs("span",{className:"flex items-center gap-1",children:["EAN",a.jsx($,{placement:"topLeft",title:"Thirteen digit unique number (International Article Number)",children:a.jsx(A,{})})]}),value:e.eanNo},(e==null?void 0:e.upcNo)&&{label:a.jsxs("span",{className:"flex items-center gap-1",children:["UPC",a.jsx($,{placement:"topLeft",title:"Twelve digit unique code (Universal Product Code)",children:a.jsx(A,{})})]}),value:e.upcNo},(e==null?void 0:e.isbnNo)&&{label:a.jsxs("span",{className:"flex items-center gap-1",children:["ISBN",a.jsx($,{placement:"topLeft",title:"Thirteen digit unique commercial book identifier (International Standard Book Number) ",children:a.jsx(A,{})})]}),value:e.isbnNo},(e==null?void 0:e.partNo)&&{label:"Part No",value:e.partNo},{label:"Create Date",value:te(e==null?void 0:e.createdAt).format("ll")}]})]}),a.jsx("div",{className:"w-full md:w-1/2",children:a.jsxs("div",{className:"w-full",children:[a.jsx("h1",{className:"border-b pb-1 text-base font-medium text-gray-600",children:"Stock Details"}),a.jsx(g,{labelClassName:"w-[35%] md:w-[30%] 2xl:w-[25%]",list:[{label:"Quantity",value:(_=e==null?void 0:e.stockInfo[0])==null?void 0:_.productQuantity},{label:"Reorder Quantity",value:(D=e==null?void 0:e.stockInfo[0])==null?void 0:D.reorderQuantity},{label:"Negative Sell Allowed",value:((M=e.stockInfo[0])==null?void 0:M.isNegativeSale)==="true"?"Yes":"No"}]})]})})]}),a.jsxs("div",{className:"w-full text-base font-medium my-3",children:[a.jsxs("h1",{className:"flex gap-1 items-center font-medium border-b text-slate-600 py-2 mb-2",children:["Gallery Images"," ",a.jsx(Ge,{product:{id:e.id,data:(U=e.productGroup)==null?void 0:U.galleryImage}})]}),a.jsx(Se,{data:e.productGroup.galleryImage})]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"flex gap-1 items-center font-medium border-b text-slate-600 py-2",children:["Others Variant",a.jsx(ge,{title:"Variant",width:85,children:a.jsx(Ce,{product:e})})]}),a.jsx("div",{className:"mt-2",children:a.jsx(R,{columns:i,data:(O=e.productGroup.products)==null?void 0:O.filter(s=>s.id!==e.id)})})]}),a.jsxs("div",{className:"",children:[a.jsx("h1",{className:"font-medium border-b text-slate-600 py-2",children:"Product description"}),a.jsx("p",{className:"py-2",dangerouslySetInnerHTML:{__html:e==null?void 0:e.productGroup.description}})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"flex gap-1 items-center font-medium border-b text-slate-600 py-2",children:"Others Stock"}),a.jsx("div",{className:"mt-2",children:a.jsx(R,{columns:l,data:(H=e==null?void 0:e.stockStoreInfo)==null?void 0:H.filter(s=>{var r;return s.storeId!==((r=e==null?void 0:e.stockInfo[0])==null?void 0:r.storeId)})})})]})]})}):a.jsx(me,{})})};export{qe as default};
