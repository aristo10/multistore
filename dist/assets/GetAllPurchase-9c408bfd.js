import{cN as e,r as n,df as f,dg as T,dh as P,di as A,cL as _,cM as g,cS as p,cO as y,cQ as b,dl as F,dm as L}from"./vendor-3a94a37a.js";import{U as H}from"./useStoreFilter-d90bb3a9.js";import{ct as O,cu as E,aU as R,C as U,U as B,T as z,aW as V}from"./index-ed7845ca.js";import{C as $}from"./CreateButton-dda4b580.js";import{V as q}from"./ViewBtn-ffc9b5cb.js";import{a as c}from"./nFormetter-959ac4e7.js";import{u as G}from"./useCurrency-4b14dd3d.js";import{T as u,M as Q,D as W}from"./vendor-large-f75deccb.js";import{S as J}from"./SendPurchaseInvoice-d5c1d00e.js";import"./emailConfigSlice-145edc06.js";import"./purchasePDF-c30bf5e1.js";import"./invoiceGenerator-eaeb8720.js";import"./numberToWords-4c291141.js";import"./TagInput-f33dd18b.js";import"./AddProduct-aa890cea.js";import"./ImageUploader-c0ae741f.js";import"./MediaGallery-5095f29f.js";import"./UploaderWithDrag-568744bd.js";import"./BigDrawer-240149a9.js";import"./AddManufacturer-2f6bafee.js";import"./AddProductBrand-894ab785.js";import"./UploadMany-c4472299.js";import"./AddProductSubcategory-71762def.js";import"./AddProductCategory-6511f02f.js";import"./AddUoM-1dc09ff9.js";import"./AddVatTax-97a0925d.js";import"./FormProductListCard-571d2cbc.js";import"./AddProductAttribute-4ec2c5fe.js";import"./AddProductAttributeValue-d16feddc.js";import"./AddDiscount-05e89f9a.js";const K=({information:t,count:x})=>{var a,m,d,o;const l=G();return e.jsx(n.Fragment,{children:e.jsxs("section",{className:"grid sm:grid-cols-2 xl:grid-cols-4 gap-6 mt-5 mb-5",children:[e.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[e.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-violet-600 bg-violet-100 rounded-lg mr-6",children:e.jsx(f,{size:30})}),e.jsx("div",{children:e.jsxs(u,{title:e.jsxs("span",{className:"text-lg",children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),(a=t==null?void 0:t.totalAmount)==null?void 0:a.toFixed(3)]}),children:[e.jsxs("span",{className:"block text-violet-600 text-2xl sm:text-3xl font-bold sm:text-center",children:[" ",e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.totalAmount?c(Number(t==null?void 0:t.totalAmount)):0]}),e.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2  dark:text-yellow-100 ",children:["Total Purchases"," ",e.jsxs("span",{className:"text-violet-600",children:["#",x?c(x):0]})]})]})})]}),e.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[e.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-violet-500 bg-violet-100 rounded-lg mr-6",children:e.jsx(T,{size:30})}),e.jsx("div",{children:e.jsxs(u,{title:e.jsxs("span",{className:"text-lg",children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),(m=t==null?void 0:t.paidAmount)==null?void 0:m.toFixed(3)]}),children:[e.jsxs("span",{className:"block text-violet-500 text-2xl sm:text-3xl font-bold sm:text-center",children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.paidAmount?c(Number(t.paidAmount)):0]}),e.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2  dark:text-yellow-100 ",children:["Total Purchase Paid"," "]})]})})]}),e.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[e.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-blue-600 bg-blue-100 rounded-lg mr-6",children:e.jsx(P,{size:30})}),e.jsx("div",{children:e.jsxs(u,{title:e.jsxs("span",{className:"text-lg",children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),(d=t==null?void 0:t.dueAmount)==null?void 0:d.toFixed(3)]}),children:[e.jsxs("span",{className:"block text-blue-600 text-2xl sm:text-3xl font-bold sm:text-center",children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.dueAmount?c(t==null?void 0:t.dueAmount):0]}),e.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2 dark:text-yellow-100 ",children:[" ","Total Purchase Due"," "]})]})})]}),e.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[e.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-blue-600 bg-blue-100 rounded-lg mr-6",children:e.jsx(A,{size:30})}),e.jsx("div",{children:e.jsxs(u,{title:e.jsxs("span",{className:"text-lg",children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),(o=t==null?void 0:t.totalReturnAmount)==null?void 0:o.toFixed(3)]}),children:[e.jsxs("span",{className:"block text-blue-600 text-2xl sm:text-3xl font-bold sm:text-center",children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.totalReturnAmount?c(t==null?void 0:t.totalReturnAmount):0]}),e.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2 dark:text-yellow-100 ",children:[" ","Total Purchase Return"]})]})})]})]})})},Ye=()=>{const{RangePicker:t}=W,[x,l]=n.useState(!1),a=_(),{list:m,total:d,loading:o,information:v}=g(s=>s.purchases),{list:h}=g(s=>s.suppliers),{storeFilter:k}=H(),[i,j]=n.useState({page:1,count:10,status:"true",startDate:p().startOf("month").format("YYYY-MM-DD"),endDate:p().endOf("month").format("YYYY-MM-DD")}),N=[{id:1,title:"Invoice",key:"id",render:({id:s})=>e.jsx(b,{to:`/admin/purchase/${s}`,children:s}),renderCsv:({id:s})=>s},{id:2,title:"Date",dataIndex:"date",key:"date",render:s=>p(s).format("ll"),renderCsv:s=>p(s).format("ll")},{id:3,title:"Supplier",dataIndex:"supplier",key:"supplierId",render:s=>e.jsx(b,{to:`/admin/supplier/${s==null?void 0:s.id}`,children:s==null?void 0:s.name}),renderCsv:s=>s==null?void 0:s.name},{id:4,title:"Total Amount",dataIndex:"totalAmount",key:"totalAmount",render:s=>s.toFixed(2)},{id:7,title:"Paid",dataIndex:"paidAmount",key:"paidAmount",render:s=>s.toFixed(2)},{id:6,title:"Due",dataIndex:"dueAmount",key:"dueAmount",render:s=>s.toFixed(2)},{id:4,title:"Tax",dataIndex:"totalTax",key:"totalTax",render:s=>s.toFixed(2)},{id:8,title:"",dataIndex:"",key:"action",render:({id:s,dueAmount:r})=>[{label:e.jsx(q,{title:"View",path:`/admin/purchase/${s}`}),key:"view"},{label:e.jsx(b,{to:r?`/admin/payment/supplier/${s}`:"#",state:{dueAmount:r},children:e.jsxs("button",{className:"flex items-center gap-2 rounded disabled:cursor-not-allowed",disabled:!r,children:[e.jsx(F,{className:"text-[1rem]"})," Payment"]})}),key:"payment"},{label:e.jsxs("div",{onClick:()=>{M(),a(V(s))},className:"flex gap-2  items-center cursor-pointer hover:text-primary",children:[e.jsx(L,{className:"text-[1rem]"}),"Email"]}),key:"SendEmail"}],csvOff:!0}],S=[k,{key:"supplierId",label:"Supplier",type:"select",options:h==null?void 0:h.map(s=>({label:s==null?void 0:s.name,value:s==null?void 0:s.id})),className:"min-w-[123px] max-w-[150px]",popupClassName:"w-[200px]"}];n.useEffect(()=>(a(O(i)),()=>{a(E())}),[a,i]);const w=s=>{const r=s[0].format("YYYY-MM-DD"),Y=s[1].format("YYYY-MM-DD");j(C=>({...C,startDate:r,endDate:Y}))},M=()=>{l(!0)},D=()=>{l(!1)},I=()=>{l(!1)};return n.useEffect(()=>{a(R({query:"all"}))},[a]),e.jsxs("div",{className:"card card-custom mt-3 ",children:[e.jsxs("div",{className:"card-body",children:[e.jsx(K,{information:v,count:d}),e.jsx("br",{}),e.jsx(U,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Purchase Invoice",extra:e.jsxs("div",{className:"justify-between md:justify-start flex gap-3 items-center",children:[e.jsx("div",{children:e.jsx(t,{className:"range-picker ",onCalendarChange:w,defaultValue:[y(i.startDate,"YYYY-MM-DD"),y(i.endDate,"YYYY-MM-DD")]})}),e.jsx($,{to:"/admin/purchase/add",title:"Create Purchase"})]}),children:e.jsx(B,{permission:"readAll-purchaseInvoice",children:e.jsx(z,{list:m,total:d,columns:N,loading:o,setPageConfig:j,title:"Purchase List",filters:S,isSearch:!0})})})]}),e.jsx(Q,{title:"Send Purchase Invoice",open:x,onOk:D,onCancel:I,footer:!1,children:e.jsx(J,{setIsModalOpen:l,modal:!0})})]})};export{Ye as default};
