import{r as I,cM as i,cL as D,cN as a}from"./vendor-3a94a37a.js";import{G as R,H as E,t as F,v as L,a as P,I as B,w as Q,d as z,J as G,K as H}from"./index-ed7845ca.js";import{F as t,I as g,b as s,D as j,B as J}from"./vendor-large-f75deccb.js";function W({createAs:l}){const[w,y]=I.useState(!1),{list:r,loading:f}=i(e=>e.company),{list:n,loading:T}=i(e=>e.contact),{list:o,loading:S}=i(e=>e.quote),{list:c,loading:k}=i(e=>e.opportunity),{list:u,loading:q}=i(e=>e.priority),{list:p,loading:N}=i(e=>e.taskType),{list:h,loading:b}=i(e=>e.taskStatus),{list:m,loading:C}=i(e=>e.users),[x]=t.useForm(),d=D();I.useEffect(()=>{d(R()),d(E()),d(F()),d(L()),d(P()),d(B()),d(Q()),d(z({query:"all"}))},[d]);const v=async e=>{y(!0);const O={...e,assigneeId:parseInt(e.assigneeId),companyId:parseInt(e.companyId),contactId:parseInt(e.contactId),opportunityId:parseInt(e.opportunityId),quoteId:parseInt(e.quoteId),taskTypeId:parseInt(e.taskTypeId),priorityId:parseInt(e.priorityId),crmTaskStatusId:parseInt(e.crmTaskStatusId),type:"crm"};(await d(G(O))).payload.message==="success"&&(x.resetFields(),l!=null&&l.name?d(l.singleLoadThunk(l.value)):d(H({status:!0,page:1,count:10}))),y(!1)};return a.jsx("div",{className:"flex justify-center mt-5",children:a.jsxs(t,{className:"w-4/5",onFinish:v,colon:!1,layout:"vertical",initialValues:l?{[l.name]:l.value}:{},form:x,children:[a.jsx(t.Item,{style:{width:"100%"},label:"Task name",name:"name",tooltip:"This is a required field",rules:[{required:!0,message:"Task name is Required."}],children:a.jsx(g,{placeholder:"Example name"})}),a.jsxs("div",{className:"flex justify-between gap-5",children:[a.jsx(t.Item,{label:"Assignee",name:"assigneeId",className:"w-full",tooltip:"This is a required field",rules:[{required:!0,message:"Assignee is Required."}],children:a.jsx(s,{style:{width:"100%"},loading:C,allowClear:!0,showSearch:!0,placeholder:"assignee name",children:m==null?void 0:m.map(e=>a.jsx(s.Option,{value:e.id,children:e==null?void 0:e.username},e.id))})}),a.jsx(t.Item,{label:"Company",name:"companyId",className:"w-full",children:a.jsx(s,{style:{width:"100%"},loading:f,allowClear:!0,disabled:(l==null?void 0:l.name)==="companyId",showSearch:!0,placeholder:"Select company Name",children:r&&(r==null?void 0:r.map(e=>a.jsx(s.Option,{value:e.id,children:e.companyName},e.id)))})})]}),a.jsx(t.Item,{label:"Contact",name:"contactId",children:a.jsx(s,{style:{width:"100%"},loading:T,allowClear:!0,showSearch:!0,placeholder:"Select contact name",disabled:(l==null?void 0:l.name)=="contactId",children:n==null?void 0:n.map(e=>a.jsxs(s.Option,{value:e.id,children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]},e.id))})}),a.jsxs("div",{className:"flex justify-between gap-5",children:[a.jsx(t.Item,{label:"Opportunity",name:"opportunityId",className:"w-full",children:a.jsx(s,{style:{width:"100%"},loading:k,allowClear:!0,showSearch:!0,placeholder:"Select opportunity Name",disabled:(l==null?void 0:l.name)==="opportunityId",children:c==null?void 0:c.map(e=>a.jsx(s.Option,{value:e.id,children:e.opportunityName},e.id))})}),a.jsx(t.Item,{label:"Quote",name:"quoteId",className:"w-full",children:a.jsx(s,{style:{width:"100%"},loading:S,allowClear:!0,showSearch:!0,placeholder:"Select quote Name",children:o==null?void 0:o.map(e=>a.jsx(s.Option,{value:e.id,children:e.quoteName},e.id))})})]}),a.jsxs("div",{className:"flex justify-between gap-5",children:[a.jsx(t.Item,{label:"Task type",name:"taskTypeId",className:"w-full",tooltip:"This is a required field",rules:[{required:!0,message:"Task type is Required."}],children:a.jsx(s,{style:{width:"100%"},loading:N,allowClear:!0,showSearch:!0,placeholder:"Select task type",children:p==null?void 0:p.map(e=>a.jsx(s.Option,{value:e.id,children:e.taskTypeName},e.id))})}),a.jsx(t.Item,{label:"Task priority",name:"priorityId",className:"w-full",tooltip:"This is a required field",rules:[{required:!0,message:"Task priority is Required."}],children:a.jsx(s,{style:{width:"100%"},loading:q,allowClear:!0,showSearch:!0,placeholder:"Select task priority",children:u==null?void 0:u.map(e=>a.jsx(s.Option,{value:e.id,children:e.name},e.id))})})]}),a.jsx(t.Item,{label:"Task status",name:"crmTaskStatusId",tooltip:"This is a required field",rules:[{required:!0,message:"Task status is Required."}],children:a.jsx(s,{style:{width:"100%"},loading:b,allowClear:!0,showSearch:!0,placeholder:"Select task status",children:h==null?void 0:h.map(e=>a.jsx(s.Option,{value:e.id,children:e.taskStatusName},e.id))})}),a.jsx(t.Item,{label:"Start date",name:"startDate",tooltip:"This is a required field",rules:[{required:!0,message:"Start date is Required."}],children:a.jsx(j,{placeholder:"Select start date"})}),a.jsx(t.Item,{label:"End date",name:"endDate",tooltip:"This is a required field",rules:[{required:!0,message:"End date is Required."}],children:a.jsx(j,{placeholder:"Select end date"})}),a.jsx(t.Item,{label:"Description",name:"description",children:a.jsx(g.TextArea,{rows:4,placeholder:"Descriptions"})}),a.jsx("div",{className:"w-[50%] mx-auto",children:a.jsx(t.Item,{label:"",children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(J,{className:"w-full",size:"large",htmlType:"submit",type:"primary",loading:w,children:"Create"})})})})]})})}export{W as A};
