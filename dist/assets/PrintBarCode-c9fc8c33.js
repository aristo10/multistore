import{d2 as S,cN as e,r as j,dq as y,dr as C,cS as p,cT as z,cL as I,cM as g,ds as F}from"./vendor-3a94a37a.js";import{fK as B,ch as A,C as $}from"./index-ed7845ca.js";import{B as k}from"./BigDrawer-240149a9.js";import{A as R}from"./AddPrintPage-4c75e243.js";import{F as x,b as N,h as u}from"./vendor-large-f75deccb.js";function v({sku:t,printPaper:l}){const{inputRef:i}=S({value:`${t}`,options:{background:"#FFFFFF",height:l.height?l.height:60,fontSize:l.fontSize?l.fontSize:15,width:l.width?l.width:1.5},format:"EAN-13"});return e.jsx("svg",{ref:i})}const b=j.forwardRef(({product:t,printPaper:l,printPage:i},m)=>{const{pageName:n,col:h,row:o}=l,r=i==null?void 0:i.find(w=>w.pageSizeName==n),a=parseInt(o)*parseInt(h),d=`${(r==null?void 0:r.width)*25.4}mm`||"210mm",s=`${(r==null?void 0:r.height)*25.4}mm`||"297mm",c=[];for(let w=0;w<a;w++)c.push(e.jsxs("div",{className:" border border-dotted px-1 py-1 flex flex-col justify-center items-center",children:[e.jsx("span",{className:"text-sm text-center",children:t==null?void 0:t.name}),e.jsx(v,{printPaper:l,sku:t==null?void 0:t.sku})]}));const f={a4Page:{width:d,height:s,padding:"5px",margin:"auto"}};return e.jsxs("div",{ref:m,style:f.a4Page,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-sm w-[200px]",children:p().format("MM/DD/YY, h:mm A")}),e.jsx("span",{className:"w-[200px] text-gray-500",children:"Print Barcode | Inventory"}),e.jsx("span",{className:"w-[200px]",children:""})]}),e.jsx("div",{className:`grid print-cols-${h} print-rows-${o} m-[15px]`,children:c})]})});b.displayName="printToPdf";function D({product:t,printPaper:l,printPage:i}){const m=j.useRef(),n=y.useReactToPrint({content:()=>m.current});return e.jsxs("div",{children:[e.jsx("div",{className:"hidden",children:e.jsx(b,{ref:m,product:t,printPaper:l,printPage:i})}),e.jsxs("button",{onClick:n,className:"bg-primary duration-200 font-medium mx-3 px-5 py-2 text-white rounded",children:["Print ",e.jsx(C,{className:"inline"})]})]})}function E({product:t,printPaper:l,printPage:i}){const{pageName:m,col:n,row:h}=l,o=i==null?void 0:i.find(f=>f.pageSizeName==m),r=parseInt(h)*parseInt(n),a=`${(o==null?void 0:o.width)*25.4}mm`||"210mm",d=`${(o==null?void 0:o.height)*25.4}mm`||"297mm",s=[];for(let f=0;f<r;f++)s.push(e.jsxs("div",{className:"min-w-[147.68px] max-w-[4004.724px] min-h-[ 117.060px] max-h-[124.100px] border border-dotted px-1 py-1 flex flex-col justify-center items-center",children:[e.jsx("span",{className:"text-sm text-center",children:t==null?void 0:t.name}),e.jsx(v,{printPaper:l,sku:t.sku})]}));const c={a4Page:{width:a,height:d,padding:"5px",margin:"auto",border:"1px solid #828282"}};return e.jsx("div",{className:"overflow-hidden ",children:e.jsxs("div",{style:c.a4Page,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-sm w-[200px]",children:p().format("MM/DD/YY, h:mm A")}),e.jsx("span",{className:"w-[200px]",children:""})]}),e.jsx("div",{className:`grid print-cols-${n} print-rows-${h} m-[10px]`,children:s})]})})}function Y(){const{id:t}=z(),l=I(),{product:i,loading:m}=g(s=>s.products),{list:n,loading:h}=g(s=>s.print),[o,r]=j.useState(!1),[a,d]=j.useState({pageName:"A4",row:10,col:3,height:60,width:1.5,fontSize:15});return j.useEffect(()=>{l(B(t)),l(A({status:"true",page:1,count:10}))},[l,t]),e.jsxs($,{title:"Print Barcode",extra:e.jsxs("div",{className:" flex",children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>r(!0),className:" bg-primary duration-200 font-medium mx-3 px-5 py-2 text-white rounded",children:["Preview ",e.jsx(F,{className:"inline"})," "]})}),n&&e.jsx(D,{product:i,printPaper:a,printPage:n})]}),children:[e.jsx("div",{className:"bg-white p-3 rounded w-full md:w-[80%] lg:w-[60%] xl:w-[45%] 2xl:w-[40%] 3xl:w-[30%] mb-3",children:e.jsxs(x,{layout:"vertical",children:[e.jsx(x.Item,{label:e.jsxs("div",{className:"flex gap-2 items-center",children:["Page Size",e.jsx(k,{children:e.jsx(R,{})})]}),className:"w-[80%] md:w-full",children:e.jsx(N,{name:"pageSize",loading:h,showSearch:!0,placeholder:"page size",optionFilterProp:"children",filterOption:(s,c)=>c.children.includes(s),filterSort:(s,c)=>s.children.toLowerCase().localeCompare(c.children.toLowerCase()),defaultValue:"A4",onChange:s=>{d({...a,pageName:s})},children:n&&n.map(s=>e.jsx(N.Option,{value:s.pageSizeName,children:s.pageSizeName},s.id))})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(x.Item,{className:"w-1/2",label:"Column",children:e.jsx(u,{onChange:s=>d({...a,col:s}),defaultValue:a==null?void 0:a.col,size:"small",placeholder:"3"})}),e.jsx(x.Item,{className:"w-1/2",label:"Row",children:e.jsx(u,{defaultValue:a==null?void 0:a.row,size:"small",placeholder:"10",onChange:s=>d({...a,row:s})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x.Item,{label:"Height",children:e.jsx(u,{defaultValue:a==null?void 0:a.height,size:"small",placeholder:"60",onChange:s=>d({...a,height:s})})})," ",e.jsx(x.Item,{label:"Width",children:e.jsx(u,{defaultValue:a==null?void 0:a.width,size:"small",placeholder:"1.5",step:.1,onChange:s=>d({...a,width:s})})})," ",e.jsx(x.Item,{label:"FontSize",children:e.jsx(u,{defaultValue:a==null?void 0:a.fontSize,size:"small",placeholder:"15",onChange:s=>d({...a,fontSize:s})})})]})]})}),e.jsx("div",{children:i&&o&&e.jsx(E,{printPage:n,product:i,printPaper:a})})]})}export{Y as default};
