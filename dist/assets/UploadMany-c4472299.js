import{cL as U,r as u,c_ as $,cN as t,d7 as R,de as T,d4 as k,cV as c}from"./vendor-3a94a37a.js";import{aX as g}from"./index-ed7845ca.js";const q=({urlPath:d,loadAllThunk:f,query:h,demoData:b,title:y})=>{const j=U(),[w,i]=u.useState(!1),[l,v]=u.useState(),N=$(),m=new FileReader,S=s=>{v(s.target.files[0])};function C(s){const a=s.split(`
`),n=[],r=a[0].split(",");for(let e=1;e<a.length;e++){const p=a[e].split(",");if(p.length===r.length){const x={};for(let o=0;o<r.length;o++){const D=r[o].trim().replace(/(^['"]|['"]$)/g,""),L=p[o].trim().replace(/(^['"]|['"]$)/g,"");x[D]=L}n.push(x)}}return n}const F=async s=>{var n,r;const a=C(s);try{const e=await k.post(`${d}?query=createmany`,a);(e==null?void 0:e.statusText)==="Created"?(f&&j(f({...h})),c.success("Uploaded Success"),d=="product"&&N("/admin/product")):c.error("Something went wrong, Please try again"),i(!1)}catch(e){i(!1),c.error(((r=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:r.error)||"Something went wrong")}},V=s=>{s.preventDefault(),i(!0),l&&(m.onload=function(a){const n=a.target.result;F(n)},m.readAsText(l))};return t.jsxs("div",{className:"text-center mt-2  ",children:[!l&&t.jsxs("p",{className:"flex flex-col items-center gap-2 mb-2",style:{color:"red"},children:["Please select a CSV file for uploading",t.jsx(g,{className:"px-5 py-1 max-w-[150px] bg-teal-500 text-white border rounded-md",children:t.jsx(R,{className:" text-white text-xs  md:text-base text-center px-0 py-1 rounded w-[120px]",data:b,filename:y,children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[t.jsx(T,{})," ",t.jsx("span",{children:"Demo CSV"})]})})})]}),t.jsxs("form",{className:"form-group",children:[t.jsx("input",{required:!0,className:`text-sm text-slate-500 rounded-lg border border-slate-500 p-2
          file:mr-4 file:py-2 file:px-4
          file:rounded-full file:border-0
          file:text-sm file:font-semibold
          file:bg-blue-50 file:text-blue-700
          hover:file:bg-blue-100
          mt-4 file:mt-0 file:ml-4
          mb-4 file:mb-0`,type:"file",id:"csvFileInput",accept:".csv",onChange:S}),t.jsx("br",{}),t.jsx(g,{loading:w,className:"rounded-lg bg-blue-500 text-white font-bold px-4 disabled:opacity-50",disabled:!l,type:"submit",onClick:V,children:"Import From CSV"})]})]})},I=q;export{I as U};
