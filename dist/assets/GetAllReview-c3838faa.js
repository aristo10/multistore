import{cL as x,r as o,cN as t,cM as w,cS as u}from"./vendor-3a94a37a.js";import{ce as g,cf as f,C as R,U as j,T as C,s as d}from"./index-ed7845ca.js";import{F as c,M as I,I as b,B as k}from"./vendor-large-f75deccb.js";function M({item:s,pageConfig:m}){const l=x(),[r]=c.useForm(),[n,i]=o.useState(),[p,e]=o.useState(!1),a=()=>{e(!0)},v=async y=>{(await l(g({reviewId:s==null?void 0:s.id,...y}))).payload.message=="success"&&(e(!1),i(!1),l(f(m)))},h=()=>{i(!1)};return o.useEffect(()=>{s.reviewReply.length>0&&r.setFieldsValue({comment:s.reviewReply[0].comment||""})},[r,s.reviewReply]),t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:a,className:"bg-[#1890ff] px-3 py-2 text-white rounded-md",style:{fontSize:"15px"},children:"Reply Review"}),t.jsxs(I,{title:t.jsxs("div",{children:[" ",t.jsx("span",{className:"text-gray-500",children:"Review from"})," ",s.customer.username]}),open:p,onCancel:()=>e(!1),footer:!1,children:[t.jsxs("div",{className:"p-3 border rounded mb-10",children:[t.jsx("p",{className:"font-bold",children:"Review:"})," ",t.jsxs("p",{className:"max-h-[200px] overflow-y-auto",children:[s==null?void 0:s.review," "]})]}),t.jsxs(c,{form:r,layout:"vertical",onFinish:v,onFinishFailed:h,autoComplete:"off",labelAlign:"left",children:[t.jsx(c.Item,{style:{marginBottom:"10px"},label:"Replay",name:"comment",required:!0,children:t.jsx(b.TextArea,{placeholder:"Write reply"})}),t.jsx(c.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-[24px]",children:t.jsx(k,{loading:n,onClick:()=>i(!0),type:"primary",htmlType:"submit",shape:"round",children:"Replay"})})]})]})]})}function D(){const s=x(),{list:m,loading:l,total:r}=w(e=>e.reviewRating),[n,i]=o.useState({page:1,count:10,status:"true"}),p=[{id:1,title:"ID",dataIndex:"id",key:"id",width:"50px"},{id:2,title:"Product ",dataIndex:"product",key:"product",render:e=>e.name,renderCsv:e=>e.name},{id:3,title:"Rating",dataIndex:"rating",key:"rating"},{id:4,title:"Review Create Date ",dataIndex:"createdAt",key:"createdAt",render:e=>u(e).format("DD/MM/YYYY"),renderCsv:e=>u(e).format("DD/MM/YYYY")},{id:5,title:"Customer ",dataIndex:"customer",key:"customer",render:e=>e.username,renderCsv:e=>e.username},{id:6,title:"Review",dataIndex:"review",key:"review",render:e=>d(e,25),renderCsv:e=>d(e,25)},{id:6,title:"Review",dataIndex:"reviewReply",key:"reply",render:e=>{var a;return d((a=e[0])==null?void 0:a.comment,25)},renderCsv:e=>{var a;return d((a=e[0])==null?void 0:a.comment,25)}},{id:4,title:"Action",key:"Action",render:e=>t.jsx("div",{className:"flex items-center gap-3",children:t.jsx(M,{item:e,pageConfig:n})}),width:"150px",csvOff:!0}];return o.useEffect(()=>{s(f(n))},[s,n]),t.jsx(R,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Review",children:t.jsx(j,{permission:"readAll-reviewRating",children:t.jsx(C,{total:r,columns:p,list:m,loading:l,setPageConfig:i,title:"Review"})})})}export{D as default};
