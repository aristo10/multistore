import{cT as h,cN as e,cS as u,cQ as y}from"./vendor-3a94a37a.js";import{C as g,U as p,T as f}from"./index-ed7845ca.js";import{C as I}from"./CommonDelete-4339174a.js";import{C as T}from"./CreateDrawer-a7af16b9.js";import{b,c as C,t as P}from"./taskStatusApi-717b5942.js";import{u as D}from"./projectApi-2d6ff3a1.js";import{F as s,I as x,b as j,B as N,k as w}from"./vendor-large-f75deccb.js";function F({isFixed:r,projectId:n}){const{IsLoading:o,data:i}=D(),[t,{isLoading:k}]=b(),[m]=s.useForm(),{id:l}=h(),S=async a=>{const d={...a,projectId:r?parseInt(l||n):a.projectId},c=await t(d);c.data&&!c.error&&m.resetFields()};return e.jsx(e.Fragment,{children:e.jsx(s,{form:m,style:{margin:"16px"},name:"basic",layout:"vertical",onFinish:S,children:e.jsxs("div",{children:[r?e.jsx(e.Fragment,{children:!n&&e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Project",tooltip:"Project is already selected ",name:"projectId",initialValue:l,children:e.jsx(x,{})})}):e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Project",name:"projectId",rules:[{required:!0,message:"Select Project"}],children:e.jsx(j,{showSearch:!0,loading:o,placeholder:"Select Project",optionFilterProp:"children",filterOption:(a,d)=>d.children.toLowerCase().indexOf(a.toLowerCase())>=0,children:i==null?void 0:i.map(a=>e.jsx(j.Option,{value:a.id,children:a.name},a.id))})}),e.jsx(s.Item,{style:{marginBottom:"20px"},label:"Task Status Name",name:"name",rules:[{required:!0,message:"Enter Task Status Name"}],children:e.jsx(x,{placeholder:"Enter Task Status Name"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},children:e.jsx(N,{type:"primary",size:"large",htmlType:"submit",loading:k,children:"Add Task Status"})})]})})})}function Q(){const{id:r}=h(),{isLoading:n,data:o}=C(r),i=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Name",dataIndex:"name",key:"name"},{id:4,title:"Start Date",key:"startDate",render:({startDate:t})=>u(t).format("ll")},{id:5,title:"End Date",key:"endDate",render:({endDate:t})=>u(t).format("ll")},{id:3,title:"",key:"action",render:({id:t})=>[{label:e.jsx(p,{permission:"update-product",children:e.jsxs(y,{to:`/admin/hrm/project/task-status/update/${t}`,className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(w,{className:" rounded-md"}),"Edit"]})}),key:"Update"},{label:e.jsx(I,{className:"bg-white text-black",id:t,permission:"delete-taskStatus",deleteThunk:P.endpoints.deleteTaskStatus.initiate,title:"Delete"}),key:"delete"}]}];return e.jsx(g,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Task Status in Project",extra:e.jsx(T,{permission:"create-taskStatus",title:"Create Task Status",width:50,children:e.jsx(F,{projectId:r,isFixed:!0})}),children:e.jsx(p,{permission:"readAll-taskStatus",children:e.jsx(f,{list:o,columns:i,loading:n,title:"Task Status list",isSearch:!1})})})}export{Q as default};
