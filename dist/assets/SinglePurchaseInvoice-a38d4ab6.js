import{cM as b,cL as N,cS as p,r as h,cN as o,cT as P,cQ as d}from"./vendor-3a94a37a.js";import{aZ as g,cr as C,cs as A,C as D,an as $,am as R}from"./index-ed7845ca.js";import{i as k}from"./invoiceGenerator-eaeb8720.js";import{n as w}from"./numberToWords-4c291141.js";import{u as F}from"./useCurrency-4b14dd3d.js";import{m as Y}from"./vendor-large-f75deccb.js";function Q({data:e,title:t}){var v,I,y;const{currencyName:l}=F()||{},c=b(i=>{var j;return(j=i==null?void 0:i.setting)==null?void 0:j.data})||null,n=N(),f=[{value:` Invoice No: ${e==null?void 0:e.id}`},{value:`Invoice Date: ${p(e==null?void 0:e.date).format("YYYY-MM-DD")}`},{value:`Currency: ${l}`}],m=[{label:"IN WORDS: ",value:`${w(Math.round((e==null?void 0:e.totalAmount)+(e!=null&&e.tax?e==null?void 0:e.tax:0))).toUpperCase()} ${l}`||""},{label:"Terms And Conditions: ",value:e!=null&&e.termsAndConditions?e.termsAndConditions.toUpperCase():""},{label:"NOTES: ",value:e!=null&&e.note?e==null?void 0:e.note.toUpperCase():""}],x=[{label:"Total:",value:`${(e==null?void 0:e.totalAmount)-(e!=null&&e.discount?e==null?void 0:e.discount:0)}`},{label:"Tax Amount:",value:`${e!=null&&e.tax?e==null?void 0:e.tax:0}`},{label:"Grand Total:",value:`${(e==null?void 0:e.totalAmount)+(e!=null&&e.tax?e==null?void 0:e.tax:0)}`}],s=["SI","Product Description","Quantity","Purchase Price","Total Price","Total Tax"],u=(v=e==null?void 0:e.returnPurchaseInvoiceProduct)==null?void 0:v.map(i=>[i.id,i.product.name,i.productQuantity,`${i.productUnitPurchasePrice}`,`${i.productFinalAmount*i.productQuantity}`,`${i.tax}`]),T=[{value:`Supplier: ${(y=(I=e==null?void 0:e.purchaseInvoice)==null?void 0:I.supplier)==null?void 0:y.name}`},{value:`Purchase Invoice Id: ${e==null?void 0:e.purchaseInvoiceId}`}],S={jsPDF:{},tableFontSize:10,infoTopFontSize:10,bottomRightFontSize:10,bottomLeftFontSize:8,footerFontSize:10};return h.useEffect(()=>{!c&&n(g())},[n,c]),o.jsx("div",{className:"",children:o.jsx("button",{className:"bg-primary flex justify-center items-center px-4 py-[9px] text-white rounded",onClick:()=>k("print",{title:t,TopRightInfo:f,companyInfo:c,customerInfo:T,bottomLeftContent:m,bottomRightContent:x,tableBody:u,tableHead:s,settings:S,leftBottomSecondColumnX:32}),children:"Print Invoice"})})}function B(){const e=N(),{id:t}=P(),[l,c]=h.useState([]),{returnPurchase:n,loading:f}=b(s=>s.purchaseReturn),r=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Product Name",key:"product",dataIndex:"product",render:s=>o.jsx(d,{to:`/admin/product/${s==null?void 0:s.id}`,children:s==null?void 0:s.name})},{id:3,title:"Date",dataIndex:"createdAt",key:"date",render:s=>p(s).format("ll")},{id:4,title:"Product Quantity",dataIndex:"productQuantity",key:"productQuantity"},{id:5,title:"Purcahse Price",dataIndex:"productUnitPurchasePrice",key:"productUnitPurchasePrice"},{id:5,title:"Total Tax",dataIndex:"taxAmount",key:"taxAmount"}];h.useEffect(()=>(c(r),e(C(t)),()=>{e(A())}),[]);const m=s=>{c(s)},x=s=>s==null?void 0:s.map(u=>({...u,key:u.id}));return o.jsx(o.Fragment,{children:o.jsxs(D,{title:o.jsxs("h5",{className:"flex items-center",children:[o.jsx(Y,{}),o.jsxs("span",{className:"mr-left",children:["ID : ",t]})]}),extra:o.jsx("div",{className:"flex gap-2",children:n&&o.jsx(Q,{title:"Purchase return Invoice",data:n})}),children:[o.jsx("div",{className:"text-[18px] font-medium flex justify-center",children:"Purchase Return Product Information"}),n&&o.jsx("div",{children:o.jsxs("div",{className:"flex justify-between my-2",children:[o.jsx($,{options:r,columns:r,columnsToShowHandler:m}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("div",{className:"bg-gray-100 px-2 py-1 rounded-sm m-1",children:["Purchase Invoice Id: ",n==null?void 0:n.purchaseInvoiceId]}),o.jsxs("div",{className:"bg-gray-100 px-2 py-1 rounded-sm m-1",children:["Date: ",p(n==null?void 0:n.createdAt).format("DD/MM/YYYY")]})]})]})}),o.jsx("div",{className:"mb-5 ",children:o.jsx(R,{scroll:{x:!0},loading:!n,columns:l,data:n?x(n==null?void 0:n.returnPurchaseInvoiceProduct):[]})}),o.jsxs("div",{className:"font-bold text-[16px]",children:["Total Return Amount:"," ",((n==null?void 0:n.totalAmount)||0)+((n==null?void 0:n.tax)||0)]}),o.jsxs("h6",{className:" m-0 max-w-[500px] py-2",children:[o.jsx("span",{className:"font-bold",children:"Return Note:"}),o.jsxs("span",{className:"font-medium",children:[" ",n==null?void 0:n.note]})," "]})]})})}export{B as default};
