import{cL as j,r as u,cM as x,cN as e,cO as I,cT as A}from"./vendor-3a94a37a.js";import{gU as C,d as S,gV as M,gW as N,eD as E,gX as D,gA as q,C as B,U as J,T as H,gY as F,gZ as P}from"./index-ed7845ca.js";import{C as L}from"./CreateDrawer-a7af16b9.js";import{C as V}from"./CommonDelete-4339174a.js";import{V as O}from"./ViewBtn-ffc9b5cb.js";import{F as i,b as g,D as v,y as T,I as Y,B as k,M as U,d as z,k as G}from"./vendor-large-f75deccb.js";const $=()=>{const{Option:n}=g,[c]=i.useForm(),l=j(),[d,o]=u.useState(!1),{list:r,loading:m}=x(s=>s.jobApplication),{list:p,loading:f}=x(s=>s.users),h=async s=>{o(!0);try{s.scheduleDate=I(s.scheduleDate).format("YYYY-MM-DD HH:mm:ss"),s.scheduleTime=I(s.scheduleTime).format("HH:mm:ss"),(await l(M(s))).payload.message==="success"&&(c.resetFields(),l(N({page:1,count:10,status:"true"}))),o(!1)}catch{}};return u.useEffect(()=>{l(C()),l(S({query:"all"}))},[l]),e.jsx(i,{style:{marginBottom:"40px"},form:c,eventKey:"jobInterview-form",name:"basic",className:"mx-4",layout:"vertical",onFinish:h,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Job Applicant",name:"jobApplicationId",rules:[{required:!0,message:"please Input Job Applicant!"}],children:e.jsx(g,{loading:m,size:"middle",mode:"single",allowClear:!0,style:{width:"100%"},placeholder:"Please select Job Applicant",children:r&&r.map(s=>e.jsxs(n,{value:s.id,children:[s.name,"- ",s.id]},s.id))})}),e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Schedule Date",name:"scheduleDate",rules:[{required:!0,message:"please Input Job Interview Schedule Date"}],children:e.jsx(v,{format:"YYYY-MM-DD"})}),e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Schedule Time",name:"scheduleTime",rules:[{required:!0,message:"please Input Job Interview Schedule Time"}],children:e.jsx(T,{format:"HH:mm:s"})}),e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Comment",name:"comment",rules:[{required:!0,message:"please Input Job Interview comment"}],children:e.jsx(Y,{placeholder:"please input comment here"})}),e.jsx(i.Item,{style:{marginBottom:"12px"},label:"Assign Member",name:"assignedMembers",rules:[{required:!0,message:"Please input Assign member!"}],children:e.jsx(g,{mode:"multiple",loading:f,style:{width:"100%"},placeholder:"select member",optionLabelProp:"children",children:p&&p.map(s=>e.jsx(n,{value:s.id,children:s.username},s.id))})}),e.jsx(i.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:6,span:12},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",block:!0,loading:d,children:"Add Job Interview"})})]})})},R=$,W=({handleCancel:n})=>{const{Option:c}=g,[l]=i.useForm(),d=j(),[o,r]=u.useState(!1),{edit:m}=x(a=>a.jobInterview),{list:p,loading:f}=x(a=>a.jobApplication),{list:h,loading:s}=x(a=>a.users);A();const b=async a=>{r(!0);try{a.scheduleDate=I(a.scheduleDate).format("YYYY-MM-DD HH:mm:ss"),a.scheduleTime=I(a.scheduleTime).format("HH:mm:ss"),(await d(E({id:m.id,values:a}))).payload.message==="success"&&(l.resetFields(),n()),r(!1)}catch{}};return u.useEffect(()=>{d(C()),d(S({query:"all"}))},[d]),u.useEffect(()=>{l.setFieldValue("jobApplicationId",m.jobApplicationId),l.setFieldValue("comment",m.comment),l.setFieldValue("assignedMembers",m.assignedMembers)},[l,m]),e.jsx(i,{style:{marginBottom:"40px"},form:l,eventKey:"jobInterview-form",name:"basic",className:"mx-4",layout:"vertical",onFinish:b,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Job Applicant",name:"jobApplicationId",rules:[{required:!0,message:"please Input Job Applicant!"}],children:e.jsx(g,{loading:f,size:"middle",mode:"single",allowClear:!0,style:{width:"100%"},placeholder:"Please select Job Applicant",children:p&&p.map(a=>e.jsxs(c,{value:a.id,children:[a.name,"- ",a.id]},a.id))})}),e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Schedule Date",name:"scheduleDate",rules:[{required:!0,message:"please Input Job Interview Schedule Date"}],children:e.jsx(v,{format:"YYYY-MM-DD"})}),e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Schedule Time",name:"scheduleTime",rules:[{required:!0,message:"please Input Job Interview Schedule Time"}],children:e.jsx(T,{format:"HH:mm:s"})}),e.jsx(i.Item,{style:{marginBottom:"10px"},label:"Comment",name:"comment",rules:[{required:!0,message:"please Input Job Interview comment"}],children:e.jsx(Y,{placeholder:"please input comment here"})}),e.jsx(i.Item,{style:{marginBottom:"12px"},label:"Assign Member",name:"assignedMembers",rules:[{required:!0,message:"Please input Assign member!"}],children:e.jsx(g,{mode:"multiple",loading:s,style:{width:"100%"},placeholder:"select member",optionLabelProp:"children",children:h&&h.map(a=>e.jsx(c,{value:a.id,children:a.username},a.id))})}),e.jsx(i.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:6,span:12},children:e.jsx(k,{type:"primary",size:"large",htmlType:"submit",block:!0,loading:o,children:"Update Job Interview"})})]})})},K=W;function X({setPageConfig:n}){const c=l=>{const d=I(l).format("YYYY-MM-DD");n(d!=="Invalid Date"?o=>{const r={...o};return r.query==="search"&&(delete r.query,delete r.key),{...r,scheduleDate:d}}:o=>{const r={...o};return r.query==="search"&&(delete r.query,delete r.key),{...r,scheduleDate:null}})};return e.jsx("div",{children:e.jsx(v,{placeholder:"Schedule Date",onChange:c,format:"YYYY-MM-DD"})})}function ae(){const n=j(),{list:c,loading:l,total:d}=x(t=>t.jobInterview),{list:o,loading:r}=x(t=>t.job),[m,p]=u.useState({page:1,count:10,status:"true"}),[f,h]=u.useState(!1),s=()=>{h(!0)},b=()=>{h(!1)},a=[{key:"id",title:"ID",dataIndex:"id"},{key:"jobApplication",title:"Candidate Name",dataIndex:"jobApplication",render:t=>t==null?void 0:t.name,renderCsv:t=>t==null?void 0:t.name},{key:"jobApplication",title:"Applied For",dataIndex:"jobApplication",render:t=>{var w;return(w=t==null?void 0:t.job)==null?void 0:w.jobTitle},renderCsv:t=>{var w;return(w=t==null?void 0:t.job)==null?void 0:w.jobTitle}},{key:"scheduleDate",title:"Schedule Date",dataIndex:"scheduleDate"},{key:"scheduleTime",title:"Schedule Time",dataIndex:"scheduleTime",render:t=>I(`1970-01-01 ${t}`,{customParseFormat:"HH:mm:ss"}).format("h:mm A")},{key:"interviewStatus",title:"Interview Status",dataIndex:"interviewStatus",render:t=>e.jsx(z,{color:t==="PENDING"?"orange":"green",children:t})},{id:4,title:"",key:"action",render:t=>[{label:e.jsx(O,{title:"View",path:`/admin/hrm/job-interview/${t.id}`}),key:"view"},{label:e.jsx(J,{permission:"update-jobApplication",children:e.jsxs("div",{onClick:()=>{n(F(t)),s()},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(G,{className:"gray-600 rounded-md"}),"Edit"]})}),key:"edit"},{label:e.jsx(V,{values:{id:t.id,status:t.status},title:t.status==="true"?"Hide":"Show",permission:"delete-jobApplication",deleteThunk:P,loadThunk:D,query:m,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],y=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"interviewStatus",label:"Interview Status",type:"select",options:[{label:"PENDING",value:"PENDING"},{label:"INTERVIEWED",value:"INTERVIEWED"}],className:"min-w-[140px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"jobId",label:"Jobs",type:"select",options:o==null?void 0:o.map(t=>({label:t==null?void 0:t.jobTitle,value:t==null?void 0:t.id})),className:"min-w-[140px] max-w-[150px]",popupClassName:"w-[100px]"}];return u.useEffect(()=>{n(D(m))},[n,m]),u.useEffect(()=>{n(q())},[n]),e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Job Interview",extra:e.jsxs(e.Fragment,{children:[e.jsx(X,{setPageConfig:p}),e.jsx(L,{permission:"create-jobInterview",title:"Create Job Interview",width:45,children:e.jsx(R,{})})]}),children:e.jsx(J,{permission:"readAll-jobInterview",children:e.jsx(H,{total:d,columns:a,list:c,loading:l,filters:y,setPageConfig:p,title:"Job Interview List",isSearch:!0})})}),e.jsx(U,{title:"Update Job Interview",open:f,onCancel:b,footer:!1,children:e.jsx(K,{handleCancel:b})})]})}export{ae as default};
