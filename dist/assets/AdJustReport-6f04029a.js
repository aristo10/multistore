import{cM as f,cN as t,cL as S,r as D,cO as F,cS as p,cQ as k}from"./vendor-3a94a37a.js";import{aX as I,aU as A,al as M,eU as P,C as R,c6 as G,s as L}from"./index-ed7845ca.js";import{R as Q}from"./ReportTable-b23b8ac7.js";import{i as O}from"./invoiceGenerator-eaeb8720.js";import{u as $}from"./useCurrency-4b14dd3d.js";import{F as m,b as j,D as N,T as y}from"./vendor-large-f75deccb.js";function w({data:s,title:o,type:l,btnName:d}){var v;$();const i=f(n=>{var h;return(h=n==null?void 0:n.setting)==null?void 0:h.data})||null,x=[],c=[{label:"Total Increment Quantity",value:`${s!=null&&s.totalGrandIncrementQuantity?s.totalGrandIncrementQuantity.toFixed(2):0}`},{label:"Total Increment Price",value:`${s!=null&&s.totalGrandIncrementPrice?s.totalGrandIncrementPrice.toFixed(2):0}`},{label:"Total Decrement Quantity",value:`${s!=null&&s.totalGrandDecrementQuantity?s.totalGrandDecrementQuantity.toFixed(2):0}`},{label:"Total Decrement Price",value:`${s!=null&&s.totalGrandDecrementPrice?s.totalGrandDecrementPrice.toFixed(2):0}`}],u=["SL","Adjust Id","Product","Adjust Quantity","Adjust Type","Adjust Price"],e=(v=s==null?void 0:s.allAdjustInvoice)==null?void 0:v.map((n,h)=>{var T,Y,g;return[`${h+1}`,(T=n==null?void 0:n.adjustInvoiceProduct)==null?void 0:T.map(r=>r==null?void 0:r.adjustInvoiceId).join(`
`),(Y=n==null?void 0:n.adjustInvoiceProduct)==null?void 0:Y.map(r=>r==null?void 0:r.product.name).join(`
`),(g=n==null?void 0:n.adjustInvoiceProduct)==null?void 0:g.map(r=>r==null?void 0:r.adjustQuantity).join(`
`),n==null?void 0:n.adjustType,n==null?void 0:n.totalAdjustPrice]}),a=[],b=[],C={jsPDF:{},tableFontSize:8,dataTopFontSize:10,bottomRightFontSize:10,bottomLeftFontSize:8,footerFontSize:10};return t.jsx("div",{className:"flex gap-2",children:t.jsx(I,{className:"bg-primary flex justify-center items-center px-4 py-2 text-white rounded",onClick:()=>O(l,{title:o,TopRightInfo:b,companyInfo:i,customerInfo:a,bottomLeftContent:x,bottomRightContent:c,tableBody:e,tableHead:u,settings:C,rightColumnLevelPosition:10}),children:d})})}function z({setPageConfig:s,pageConfig:o,setShowTable:l}){const d=S(),[i,x]=D.useState(!1),{list:c,loading:u}=f(a=>a.store),e=async a=>{x(!0),(await d(P({...a,startDate:a.startDate.format("YYYY-MM-DD"),endDate:a.endDate.format("YYYY-MM-DD"),query:"report"}))).payload.message==="success"&&l(!0),x(!1)};return D.useEffect(()=>{d(A({query:"all"})),d(M())},[d]),t.jsx("div",{className:"flex flex-col items-center gap-2 p-5 m-4 rounded bg-white w-1/3",children:t.jsxs(m,{layout:"vertical",className:"w-full",initialValues:{startDate:F(o.startDate,"YYYY-MM-DD"),endDate:F(o.endDate,"YYYY-MM-DD")},onFinish:e,children:[t.jsxs("div",{className:"w-full flex gap-2",children:[t.jsx(m.Item,{label:"Select type",name:"type",className:"w-1/2",children:t.jsxs(j,{placeholder:"Select Type",allowClear:!0,showSearch:!1,style:{width:"100%"},maxTagCount:0,children:[t.jsx(j.Option,{value:"Increment",children:"Increment"},"Increment"),t.jsx(j.Option,{value:"Decrement",children:"Decrement"},"Decrement")]})}),t.jsx(m.Item,{label:"Select store",name:"storeId",className:"w-1/2",children:t.jsx(j,{placeholder:"All",loading:u,allowClear:!0,maxTagPlaceholder:a=>t.jsxs("div",{className:"",children:[a.length," Selected"]}),maxTagCount:0,mode:"multiple",showSearch:!1,style:{width:"100%"},children:c==null?void 0:c.map(a=>t.jsx(j.Option,{value:a.id,children:a==null?void 0:a.name},a.id))})})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(m.Item,{label:"From",name:"startDate",className:"w-1/2",children:t.jsx(N,{onChange:a=>s({...o,startDate:a.format("YYYY-MM-DD")})})}),t.jsx(m.Item,{label:"To",name:"endDate",className:"w-1/2",children:t.jsx(N,{onChange:a=>s({...o,endDate:a.format("YYYY-MM-DD")})})})]}),t.jsx(m.Item,{children:t.jsx(I,{loading:i,type:"submit",className:"w-full bg-green-500 text-white rounded p-2",children:"Generate Report"})})]})})}function J(){S();const[s,o]=D.useState(!1),{list:l,loading:d}=f(e=>e.adjustInventory),[i,x]=D.useState({query:"report",startDate:p().startOf("month").format("YYYY-MM-DD"),endDate:p().endOf("month").format("YYYY-MM-DD")}),c=[{id:1,title:"ID",key:"id",render:({id:e})=>t.jsx(k,{to:`/admin/adjust-inventory/${e}`,children:e})},{title:"Type",dataIndex:"adjustType",key:"adjustType"},{id:2,title:t.jsx(y,{title:"Total Increment Quantity",children:"Total I.Q."}),dataIndex:"totalIncrementQuantity",key:"totalIncrementQuantity",render:e=>e==null?void 0:e.toFixed(2)},{id:3,title:t.jsx(y,{title:"Total Increment Price",children:"Total I.P."}),dataIndex:"totalIncrementPrice",key:"totalIncrementPrice",render:e=>e==null?void 0:e.toFixed(2)},{id:4,title:t.jsx(y,{title:"Total Decrement Quantity",children:"Total D.Q."}),dataIndex:"totalDecrementQuantity",key:"totalDecrementQuantity",render:e=>e==null?void 0:e.toFixed(2)},{id:5,title:t.jsx(y,{title:"Total Decrement Price",children:"Total D.P."}),dataIndex:"totalDecrementPrice",key:"totalDecrementPrice",render:e=>e==null?void 0:e.toFixed(2)},{id:7,title:"Note",dataIndex:"note",key:"note",render:e=>L(e,20)},{id:8,title:"Date",dataIndex:"date",key:"date",render:e=>p(e).format("ll")}],u=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Total Increment Quantity",dataIndex:"totalIncrementQuantity",key:"totalIncrementQuantity",renderCsv:e=>e==null?void 0:e.toFixed(2)},{id:3,title:"Total Increment Price",dataIndex:"totalIncrementPrice",key:"totalIncrementPrice",renderCsv:e=>e==null?void 0:e.toFixed(2)},{id:4,title:"Total Decrement Quantity",dataIndex:"totalDecrementQuantity",key:"totalDecrementQuantity",renderCsv:e=>e==null?void 0:e.toFixed(2)},{id:5,title:"Total Decrement Price",dataIndex:"totalDecrementPrice",key:"totalDecrementPrice",renderCsv:e=>e==null?void 0:e.toFixed(2)},{id:7,title:"Note",dataIndex:"note",key:"note",renderCsv:e=>e},{id:8,title:"Date",dataIndex:"date",key:"date",renderCsv:e=>p(e).format("ll")}];return t.jsx("div",{className:"card card-custom mt-3 ",children:t.jsx("div",{className:"card-body",children:t.jsx(R,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Adjust Report",children:s?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between p-5 items-start ",children:[t.jsx("div",{children:t.jsx(I,{onClick:()=>o(e=>!e),className:"bg-green-500 text-white",children:"Generate again"})}),t.jsxs("div",{className:"flex px-5 gap-2 items-center ",children:[t.jsx(w,{data:l,title:"Adjust Report",pageConfig:i,type:"print",btnName:"Print"}),t.jsx(w,{data:l,title:"Adjust Report",pageConfig:i,type:"download",btnName:"Export PDF"}),t.jsx("div",{children:t.jsx(G,{list:l==null?void 0:l.allAdjustInvoice,columns:u,title:"Adjust Report",className:"bg-primary   h-auto py-2 ",btnName:"Export CSV"})})]})]}),t.jsx(Q,{list:l==null?void 0:l.allAdjustInvoice,columns:c,loading:d})]}):t.jsx(z,{setPageConfig:x,pageConfig:i,setShowTable:o})})})})}export{J as default};
