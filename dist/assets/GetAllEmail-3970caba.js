import{cN as e,cQ as d,cL as g,r as m,cM as u,cS as C}from"./vendor-3a94a37a.js";import{z as v,C as y,U as E,T as $,s as k}from"./index-ed7845ca.js";import{M as S}from"./Modal-2abf3ad3.js";import{C as I}from"./CreateDrawer-a7af16b9.js";import{A}from"./AddEmail-58ac19a5.js";import{C as P,a as l,d as b}from"./vendor-large-f75deccb.js";import"./TagInput-f33dd18b.js";import"./AddProduct-aa890cea.js";import"./ImageUploader-c0ae741f.js";import"./MediaGallery-5095f29f.js";import"./UploaderWithDrag-568744bd.js";import"./BigDrawer-240149a9.js";import"./AddManufacturer-2f6bafee.js";import"./AddProductBrand-894ab785.js";import"./UploadMany-c4472299.js";import"./AddProductSubcategory-71762def.js";import"./AddProductCategory-6511f02f.js";import"./AddUoM-1dc09ff9.js";import"./AddVatTax-97a0925d.js";import"./FormProductListCard-571d2cbc.js";import"./AddProductAttribute-4ec2c5fe.js";import"./AddProductAttributeValue-d16feddc.js";import"./AddDiscount-05e89f9a.js";function T({email:r}){var a,n,i,x,p,c,h,j,s,t,N;return e.jsx(e.Fragment,{children:r&&e.jsxs(P,{children:[e.jsxs("div",{className:"flex justify-evenly items-center gap-10 border-b py-2",children:[(r==null?void 0:r.contact)&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Contact"}),e.jsxs(d,{to:`/admin/crm/contact/${(a=r.contact)==null?void 0:a.id}`,children:[(n=r.contact)==null?void 0:n.firstName," ",(i=r.contact)==null?void 0:i.lastName]})]}),(r==null?void 0:r.company)&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Company"}),e.jsx(d,{to:`/admin/crm/company/${(x=r.company)==null?void 0:x.id}`,children:(p=r.company)==null?void 0:p.companyName})]}),(r==null?void 0:r.opportunity)&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Opportunity"}),e.jsx(d,{to:`/admin/crm/opportunity/${(c=r.opportunity)==null?void 0:c.id}`,children:(h=r.opportunity)==null?void 0:h.opportunityName})]}),(r==null?void 0:r.quote)&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Quote"}),e.jsx(d,{to:`/admin/crm/quote/${(j=r.quote)==null?void 0:j.id}`,children:(s=r.quote)==null?void 0:s.quoteName})]})]}),e.jsxs("div",{className:"border-t border-b px-5 py-3",children:["To ",e.jsx("span",{className:"font-bold ml-2",children:r==null?void 0:r.receiverEmail})]}),e.jsxs(l,{className:"bg-transparent",bordered:!1,defaultActiveKey:[],children:[!!((t=r==null?void 0:r.cc)!=null&&t.length)&&e.jsx(l.Panel,{header:"CC",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:r.cc.map((f,o)=>e.jsxs("span",{children:[f.ccEmail,o!==r.cc.length-1&&","]},o))})},"1"),!!((N=r==null?void 0:r.bcc)!=null&&N.length)&&e.jsx(l.Panel,{header:"BCC",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:r.bcc.map((f,o)=>e.jsxs("span",{children:[f.bccEmail,o!==r.bcc.length-1&&","]},o))})},"2")]}),e.jsxs("div",{className:"border-t border-b px-5 py-3",children:["Subject: ",e.jsx("span",{className:"font-bold ml-2",children:r==null?void 0:r.subject})]}),e.jsx(l,{bordered:!1,className:"bg-transparent",defaultActiveKey:["1"],children:e.jsx(l.Panel,{header:"Body",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r==null?void 0:r.body}})},"1")})]})})}function es(){const r=g(),[a,n]=m.useState(),{list:i,loading:x,total:p}=u(s=>s.email),[c,h]=m.useState({page:1,count:10}),j=[{title:"Subject",key:"Subject",render:s=>e.jsx("div",{className:"cursor-pointer",onClick:()=>n(s),children:k(s.subject,30)})},{title:"Owner",dataIndex:"emailOwner",key:"owner",render:(s,t)=>e.jsxs(d,{to:`/admin/hrm/staff/${t==null?void 0:t.emailOwnerId}`,children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),renderCsv:s=>`${s==null?void 0:s.firstName} ${s==null?void 0:s.lastName}`},{title:"Company",key:"company",dataIndex:"company",render:s=>e.jsx(d,{to:`/admin/crm/company/${s==null?void 0:s.id}`,children:s==null?void 0:s.companyName}),renderCsv:s=>s==null?void 0:s.companyName},{title:"Contact",key:"contact",dataIndex:"contact",render:s=>e.jsxs(d,{to:`/admin/crm/contact/${s==null?void 0:s.id}`,children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),renderCsv:s=>`${s==null?void 0:s.firstName} ${s==null?void 0:s.lastName}`},{title:"Opportunity",key:"opportunity",dataIndex:"opportunity",render:s=>e.jsx(d,{to:`/admin/crm/opportunity/${s==null?void 0:s.id}`,children:s==null?void 0:s.opportunityName}),renderCsv:s=>s==null?void 0:s.opportunityName},{title:"Quote",key:"quote",dataIndex:"quote",render:s=>e.jsx(d,{to:`/admin/crm/quote/${s==null?void 0:s.id}`,children:s==null?void 0:s.quoteName}),renderCsv:s=>s==null?void 0:s.quoteName},{title:"Status",key:"emailStatus",dataIndex:"emailStatus",render:s=>{if(s==="sent")return e.jsx(b,{color:"green",children:s.toUpperCase()});if(s==="failed")return e.jsx(b,{color:"red",children:s.toUpperCase()})},renderCsv:s=>s},{title:"Create date",key:"Create date",dataIndex:"createdAt",render:s=>C(s).format("ll"),renderCsv:s=>C(s).format("ll")}];return m.useEffect(()=>{r(v(c))},[r,c]),e.jsxs(y,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Email",extra:e.jsx(I,{permission:"create-email",title:"Create Email",width:50,children:e.jsx(A,{})}),children:[e.jsx(E,{permission:"readAll-email",children:e.jsx($,{list:i,columns:j,loading:x,total:p,setPageConfig:h,title:"Email List",isSearch:!0})}),e.jsx(S,{open:a,onClose:()=>n(!1),className:"md:w-[80%] md:h-[80%]",children:e.jsx(T,{email:a})})]})}export{es as default};
