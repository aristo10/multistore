import{r as o,cM as w,cL as b,cN as e,dc as I,cQ as y}from"./vendor-3a94a37a.js";import{al as A,an as Q,bt as D,fN as O,c6 as E,aX as B,bS as F,cm as P,fO as R,C as V,U}from"./index-ed7845ca.js";import{V as $}from"./ViewBtn-ffc9b5cb.js";import{C as K}from"./CreateDrawer-a7af16b9.js";import{A as G}from"./AddPurchaseOrder-125b1b4d.js";import{b as C,n as H,o as M,P as Y}from"./vendor-large-f75deccb.js";const z=({columns:r,list:a,total:c,loading:h,paginatedThunk:i,children:l,query:n,setProductList:j,storeId:u,setStoreId:x})=>{const[p,t]=o.useState([]),{list:d,loading:v,defaultStore:f}=w(s=>s.store),m=b(),N={selectedRowKeys:p,onChange:(s,g)=>{t(s),j(g)}},k=(s,g)=>{m(i({...n,status:!0,page:s,count:g}))},L=s=>{x(s),m(i({...n,status:!0,storeId:s}))},[T,S]=o.useState([]);return o.useEffect(()=>{S(r)},[]),o.useEffect(()=>{m(A())},[m]),o.useEffect(()=>{f&&x(f.id)},[f]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"pb-3",children:e.jsxs("div",{className:"w-full dark:text-yellow-50 flex flex-col md:flex-row gap-2 items-center justify-between",children:[e.jsx("div",{className:"",children:e.jsx("div",{className:"filterTag float-left min-w-[130px] max-w-[150px]",children:e.jsx(C,{placeholder:"Select a store",mode:"single",loading:v,showSearch:!1,value:u,onChange:L,maxTagPlaceholder:s=>e.jsxs("div",{className:"",children:[s.length," Selected"]}),maxTagCount:0,children:d==null?void 0:d.map(s=>e.jsx(C.Option,{value:s.id,children:s.name},s.id))})})}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(Q,{options:r,columns:r,columnsToShowHandler:S}),e.jsx(H,{content:e.jsx(D,{items:[{key:"1",label:e.jsx(O,{list:a,columns:r,title:"Shortage Products"})},{key:"2",label:e.jsx(E,{notButton:!0,list:a,columns:r,title:"Shortage Products"})}]}),placement:"bottomRight",arrow:!1,trigger:"click",children:e.jsx(B,{color:"gray",icon:e.jsx(I,{size:15}),className:"px-2"})})]})]})}),e.jsx(M,{loading:h,rowSelection:N,columns:T,dataSource:!!(a!=null&&a.length)&&a.map(s=>({...s,key:s==null?void 0:s.id})),pagination:!1,scroll:{x:1e3,y:window.innerHeight-319}}),e.jsx("div",{className:"flex justify-center mt-3",children:c>=11&&e.jsx(F,{onChange:k,total:c})})]}),l&&l]})},X=()=>{const r=b(),[a,c]=o.useState([]),{list:h,loading:i,total:l}=w(t=>t.productSortList),[n,j]=o.useState({page:1,count:100,status:"true"}),[u,x]=o.useState(),p=[{id:2,title:"ID",dataIndex:"product",key:"id",render:({id:t})=>e.jsx(y,{to:`/admin/product/${t}`,children:t}),renderCsv:({id:t})=>t},{id:4,title:"Name",dataIndex:"product",key:"name",render:({id:t,name:d})=>e.jsx(y,{to:`/admin/product/${t}`,children:d}),renderCsv:t=>t,tdClass:"whitespace-normal"},{id:3,title:"SKU",dataIndex:"product",render:({sku:t})=>t,renderCsv:({sku:t})=>t,key:"sku"},{id:6,title:"QTY",dataIndex:"productQuantity",key:"productQuantity"},{id:7,title:"Purchase price",dataIndex:"productPurchasePrice",key:"productPurchasePrice",responsive:["md"]},{id:8,title:"Sale price",dataIndex:"productSalePrice",key:"productSalePrice",responsive:["md"]},{id:12,title:"Reorder QTY",dataIndex:"reorderQuantity",key:"reorderQuantity"},{id:13,title:"Action",key:"action",render:({product:t})=>e.jsx("div",{className:"flex",children:e.jsx($,{path:`/admin/product/${t==null?void 0:t.id}`})}),csvOff:!0}];return o.useEffect(()=>(r(P(n)),()=>{r(R())}),[r,n]),e.jsx(V,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Product Short List",extra:a.length?e.jsx(e.Fragment,{children:e.jsx(K,{permission:"create-product",title:"Create Purchase Order",children:e.jsx(G,{list:a,storeId:u})})}):e.jsx("button",{disabled:!0,title:"Select at least one product",className:`xs:px-3 px-2 md:text-base py-[6px] lg:px-5  border bg-gray-400
                    text-white rounded cursor-not-allowed`,children:e.jsxs("span",{className:"flex items-center justify-center gap-1 md:gap-2 ",children:[e.jsx(Y,{}),e.jsx("span",{className:"",children:"Create Purchase Order"})]})}),children:e.jsx(U,{permission:"readAll-reorderQuantity",children:e.jsx(z,{list:h,total:l,loading:i,columns:p,csvFileName:"Product Sort List",paginatedThunk:P,setProductList:c,productList:a,setStoreId:x,storeId:u})})})},J=X;function ae(){return e.jsx(e.Fragment,{children:e.jsx(J,{})})}export{ae as default};
