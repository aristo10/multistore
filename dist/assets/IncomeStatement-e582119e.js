import{cM as y,cL as S,cN as e,r as N,cS as v,cO as D}from"./vendor-3a94a37a.js";import{aX as A,bK as C,L as F}from"./index-ed7845ca.js";import{a as w}from"./accountInvoiceGenerator-f2ac8776.js";import{u as I}from"./useCurrency-4b14dd3d.js";import{C as M,b as Y,D as T}from"./vendor-large-f75deccb.js";function L({data:t,title:u,store:c}){var m,b,f;const{currencyName:i}=I()||{},s=y(n=>{var j;return(j=n==null?void 0:n.setting)==null?void 0:j.data})||null;S();const x=[],a=[],h=[{header:"Account",dataKey:"subAccount"},{header:"Amount",dataKey:"balance"}],l=((m=t==null?void 0:t.revenue)==null?void 0:m.map(n=>({subAccount:n.subAccount,balance:n.balance})))||[],g=((b=t==null?void 0:t.expense)==null?void 0:b.map(n=>({subAccount:n.subAccount,balance:n.balance})))||[];(f=t==null?void 0:t.equity)!=null&&f.map(n=>({subAccount:n.subAccount,balance:n.balance}));const d=[{subAccount:"Revenue"},...l,{subAccount:"Total",balance:t==null?void 0:t.totalRevenue.toFixed(3)},{subAccount:"Expense"},...g,{subAccount:"Total",balance:t==null?void 0:t.totalExpense.toFixed(3)},{subAccount:"Profit",balance:t==null?void 0:t.profit.toFixed(3)}],p=[{value:`Date: ${new Date().toLocaleDateString()}`},{value:c?`Store: ${c}`:""},{value:`Currency: ${i}`}],r=[],o={jsPDF:{},tableFontSize:10,infoTopFontSize:10,bottomRightFontSize:10,bottomLeftFontSize:8,footerFontSize:10};return e.jsx("div",{className:"flex gap-2",children:e.jsx(A,{color:"gray",onClick:()=>w("print",{title:u,TopRightInfo:r,companyInfo:s,customerInfo:p,bottomLeftContent:x,bottomRightContent:a,tableBody:d,tableHead:h,settings:o,leftBottomSecondColumnX:45}),children:"Print"})})}const E=()=>{const t=S(),{RangePicker:u}=T,[c,i]=N.useState({query:"is",startDate:v().startOf("month").format("YYYY-MM-DD"),endDate:v().endOf("month").format("YYYY-MM-DD")}),{incomeStatement:s,loading:x}=y(r=>r==null?void 0:r.accounts)||null,{list:a,loading:h,defaultStore:l}=y(r=>r.store),g=(r,o)=>{i({...c,[o]:r})};let d=null;a&&c.storeId&&(d=a.filter(o=>c.storeId.includes(o.id)).map(o=>o.name).join(", "));const p=r=>{const o=r[0].format("YYYY-MM-DD"),m=r[1].format("YYYY-MM-DD");i(b=>({...b,startDate:o,endDate:m}))};return N.useEffect(()=>{t(C(c))},[t,c]),e.jsx(e.Fragment,{children:e.jsx(M,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"card-title flex justify-between items-center mb-2",children:[e.jsxs("h5",{className:"text-xl flex flex-col gap-2 mb-3",children:[e.jsxs("span",{className:"ml-2 report-section-card-title ",children:["Income Statement"," "]}),e.jsx(u,{className:"range-picker",onCalendarChange:p,defaultValue:[D(c.startDate,"YYYY-MM-DD"),D(c.endDate,"YYYY-MM-DD")]}),e.jsx("div",{className:"filterTag min-w-[120px] max-w-[150px]",children:e.jsx(Y,{placeholder:"Select Store",className:"",loading:h,defaultValue:l==null?void 0:l.id,mode:"multiple",showSearch:!1,style:{width:"100%"},maxTagPlaceholder:r=>e.jsxs("div",{className:"",children:[r.length," Selected"]}),maxTagCount:0,onChange:r=>g(r,"storeId"),children:a.map(r=>e.jsx(Y.Option,{value:r.id,children:r.name},r.id))})})]}),s&&e.jsx(L,{data:s,title:"Income Statement",store:d})]}),!x&&e.jsx("div",{className:"border-gray-200 w-full rounded bg-white overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsxs("h5",{className:"mt-2 mb-1 ml-2 font-semibold text-base",children:["Revenue"," "]}),e.jsx("thead",{className:"text-gray-600 text-[13px]  font-bold border-gray tracking-wider text-left px-5 py-3 hover:cursor-pointer uppercase border-b-2 border-gray-200",children:e.jsxs("tr",{className:"border-b border-gray",children:[e.jsx("th",{scope:"col",className:"text-gray-200 border-gray border-b-2 border-t-2 border-gray-200 py-3 px-3 bg-gray-900 text-left  font-semibold uppercase tracking-wider",children:"Account"}),e.jsx("th",{scope:"col",className:"text-gray-200 border-gray border-b-2 border-t-2 border-gray-200 py-3 px-3 bg-gray-900 text-left  font-semibold uppercase tracking-wider",children:"Amount"})]})}),e.jsxs("tbody",{children:[s&&(s==null?void 0:s.revenue.map((r,o)=>e.jsxs("tr",{className:"hover:bg-gray-100 hover:cursor-pointer",children:[e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:r.subAccount}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:r.balance?Number(r.balance).toFixed(3):""})]},o))),e.jsxs("tr",{className:"hover:bg-gray-100 hover:cursor-pointer",children:[e.jsxs("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:[" ",e.jsx("strong",{children:"TOTAL"})]}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:e.jsx("strong",{children:s==null?void 0:s.totalRevenue.toFixed(3)})})]}),e.jsxs("h5",{className:"mt-2 mb-1 ml-2 font-semibold text-base",children:[" ","Expense"]}),s&&(s==null?void 0:s.expense.map((r,o)=>e.jsxs("tr",{className:"hover:bg-gray-100 hover:cursor-pointer",children:[e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:r.subAccount}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:r.balance?Number(r.balance).toFixed(3):""})]},o))),e.jsxs("tr",{className:"hover:bg-gray-100 hover:cursor-pointer",children:[e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:e.jsx("strong",{children:"TOTAL"})}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:e.jsx("strong",{children:s==null?void 0:s.totalExpense.toFixed(3)})})]}),e.jsxs("h5",{className:"mt-2 mb-1 ml-2 font-semibold text-base",children:[" ","Profit"]}),e.jsxs("tr",{className:"hover:bg-gray-100 hover:cursor-pointer",children:[e.jsxs("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:[" ",e.jsx("strong",{children:"Total "})]}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:e.jsx("strong",{children:s==null?void 0:s.profit.toFixed(3)})})]})]})]})}),x&&e.jsx(F,{})]})})})};export{E as default};
