import{cL as b,r as p,cN as e,cM as j,cO as g,cS as u}from"./vendor-3a94a37a.js";import{g1 as k,g2 as x,g3 as D,C as I,U as h,T as w,g4 as N,g5 as v}from"./index-ed7845ca.js";import{C as B}from"./CreateDrawer-a7af16b9.js";import{F as l,I as P,D as C,B as H,M as F,k as A}from"./vendor-large-f75deccb.js";import{C as S}from"./CommonDelete-4339174a.js";const E=()=>{const[o]=l.useForm(),r=b(),[n,c]=p.useState(!1),m=async a=>{c(!0);try{const d=a.date[0],s=a.date[1],i={name:a.name,startDate:d,endDate:s};(await r(k(i))).payload.message==="success"&&(o.resetFields(),r(x({page:1,count:10,status:"true"}))),c(!1)}catch(d){console.log(d)}};return e.jsx(l,{style:{marginBottom:"40px"},form:o,eventKey:"department-form",name:"basic",layout:"vertical",className:"mx-4",onFinish:m,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(l.Item,{style:{marginBottom:"10px"},label:"Name",name:"name",rules:[{required:!0,message:"Please input name!"}],children:e.jsx(P,{placeholder:"New Year"})}),e.jsx(l.Item,{style:{marginBottom:"20px"},label:"Date",name:"date",rules:[{required:!0,message:"Please input date!"}],children:e.jsx(C.RangePicker,{})}),e.jsx(l.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:6,span:12},children:e.jsx(H,{type:"primary",size:"large",htmlType:"submit",block:!0,loading:n,children:"Add Public Holiday"})})]})})},M=E,T=({handleCancel:o})=>{const[r]=l.useForm(),n=b(),[c,m]=p.useState(!1),{publicHoliday:a}=j(s=>s.publicHoliday),d=async s=>{m(!0);try{const i=s.date[0],y=s.date[1],f={name:s.name,startDate:i,endDate:y};(await n(D({id:a.id,values:f}))).payload.message==="success"&&(n(x({page:1,count:10,status:!0})),o()),m(!1)}catch(i){console.log(i)}};return p.useEffect(()=>{r.setFieldValue("name",a.name),r.setFieldValue("date",[g(a.startDate),g(a.endDate)])},[r,a]),e.jsx(l,{style:{marginBottom:"40px"},form:r,eventKey:"department-form",name:"basic",layout:"vertical",className:"mx-4",onFinish:d,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(l.Item,{style:{marginBottom:"10px"},label:"Name",name:"name",rules:[{required:!0,message:"Please input name!"}],children:e.jsx(P,{placeholder:"New Year"})}),e.jsx(l.Item,{style:{marginBottom:"20px"},label:"Date",name:"date",rules:[{required:!0,message:"Please input date!"}],children:e.jsx(C.RangePicker,{})}),e.jsx(l.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:6,span:12},children:e.jsx(H,{type:"primary",size:"large",htmlType:"submit",block:!0,loading:c,children:"Update Public Holiday"})})]})})},U=T;function K(){const o=b(),{list:r,total:n,loading:c}=j(t=>t.publicHoliday),[m,a]=p.useState(!1),d=()=>{a(!0)},s=()=>{a(!1)},[i,y]=p.useState({page:1,count:10,status:"true"}),f=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Name",dataIndex:"name",key:"name"},{id:3,title:"Start Date",dataIndex:"startDate",key:"date",render:t=>u(t).format("ll"),renderCsv:t=>u(t).format("ll")},{id:4,title:"End Date",dataIndex:"endDate",key:"date",render:t=>u(t).format("ll"),renderCsv:t=>u(t).format("ll")},{id:3,title:"Created At",dataIndex:"createdAt",key:"createdAt",render:t=>u(t).format("ll"),renderCsv:t=>u(t).format("ll")},{id:4,title:"",dataIndex:"",key:"action",render:t=>[{label:e.jsx(h,{permission:"update-publicHoliday",children:e.jsxs("div",{onClick:()=>{o(N(t)),d()},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(A,{className:"gray-600 rounded-md"}),"Edit"]})}),key:"edit"},{label:e.jsx(S,{values:{id:t.id,status:t.status},title:t.status==="true"?"Delete":"Show",permission:"delete-publicHoliday",deleteThunk:v,loadThunk:x,query:i,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}];return p.useEffect(()=>{o(x(i))},[o,i]),e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Public Holiday",extra:e.jsx(B,{permission:"create-publicHoliday",title:"Create Public Holiday",width:35,children:e.jsx(M,{})}),children:e.jsx(h,{permission:"readAll-publicHoliday",children:e.jsx(w,{total:n,columns:f,list:r,loading:c,setPageConfig:y,title:"Public Holiday List"})})}),e.jsx(F,{title:"Update Public Holiday",open:m,onCancel:s,footer:!1,children:e.jsx(U,{handleCancel:s})})]})}export{K as default};
