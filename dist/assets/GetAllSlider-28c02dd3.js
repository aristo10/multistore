import{cL as g,r as o,cN as e,cM as L,cS as I}from"./vendor-3a94a37a.js";import{f2 as T,f3 as h,f4 as w,f5 as D,C as O,U as b,T as M,f6 as E}from"./index-ed7845ca.js";import{C as Y}from"./CommonDelete-4339174a.js";import{C as A}from"./CreateDrawer-a7af16b9.js";import{F as t,g as B,b as S,U as F,P as v,I as C,B as U,k as P,M as R}from"./vendor-large-f75deccb.js";function q(){const[s]=t.useForm(),l=g(),[m,n]=o.useState(!1),[d,a]=o.useState([]),c=({fileList:r})=>{a(r)},u=async r=>{try{let i=new FormData;i.append("images[]",d[0].originFileObj),i.append("index",parseInt(r.index)),i.append("linkUrl",r.linkUrl),(await l(T(i))).payload.message==="success"&&(s.resetFields(),l(h()),a([])),n(!1)}catch{n(!1)}},x=()=>{};return e.jsx("div",{children:e.jsxs("div",{className:" h-full",children:[e.jsx(B,{level:4,className:"m-3 text-center",children:"Add Slider Image"}),e.jsxs(t,{form:s,name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:u,onFinishFailed:x,children:[e.jsx(t.Item,{style:{marginBottom:"20px"},label:"Slider Index",name:"index",rules:[{required:!0,message:"Please enter index number!"}],children:e.jsx(S,{name:"index",placeholder:"Select index",children:[1,2,3,4,5,6,7,8,9].map((r,i)=>e.jsx(S.Option,{value:r,children:r},i))})}),e.jsxs(t.Item,{label:"Slider Image",valuePropName:"image",required:!0,className:"w-full",children:[e.jsx(F,{listType:"picture-card",beforeUpload:()=>!1,name:"image",fileList:d,maxCount:1,onChange:c,children:e.jsxs("div",{children:[e.jsx(v,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})}),e.jsx("p",{className:"text-sm text-red-400",children:"Get better view, the slider image must be 920 * 400 or relative ratio"})]}),e.jsx(t.Item,{label:"URL Link",name:"linkUrl",style:{marginBottom:"10px"},children:e.jsx(C,{placeholder:"Input image URL"})}),e.jsx(t.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:e.jsx(U,{type:"primary",htmlType:"submit",shape:"round",loading:m,children:"Create Slider Image"})})]})]})})}function V({item:s}){const[l]=t.useForm(),[m,n]=o.useState(!1),d=g(),[a,c]=o.useState(!1),[u,x]=o.useState([]),r=({fileList:f})=>{x(f)},i=async f=>{const N=w(f);try{let p=new FormData;p.append("images[]",u[0].originFileObj),p.append("linkUrl",N.linkUrl),p.append("_method","put"),(await d(D({id:s.id,values:p}))).payload.message==="success"&&(l.resetFields(),d(h()),y(),x([])),c(!1)}catch{c(!1)}},j=()=>{n(!0)},y=()=>{n(!1)},k=()=>{};return o.useEffect(()=>{l.setFieldValue("index",s.index),l.setFieldValue("linkUrl",s.linkUrl),l.setFieldValue("image",s.image)},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{j()},children:[e.jsx(P,{className:"bg-gray-600 p-1 text-white rounded-md"}),"Edit"]}),e.jsx(R,{title:"Update Slider",open:m,onCancel:y,footer:!1,children:e.jsx("div",{children:e.jsxs(t,{form:l,name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:i,onFinishFailed:k,children:[e.jsx(t.Item,{label:"Slider Image",valuePropName:"image",required:!0,className:"w-full",children:e.jsx(F,{listType:"picture-card",beforeUpload:()=>!1,name:"image",fileList:u,maxCount:1,onChange:r,children:e.jsxs("div",{children:[e.jsx(v,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})}),e.jsx(t.Item,{label:"URL Link",name:"linkUrl",style:{marginBottom:"10px"},children:e.jsx(C,{placeholder:"Input image URL"})}),e.jsx(t.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:e.jsx(U,{type:"primary",htmlType:"submit",shape:"round",loading:a,children:"Update Slider Image"})})]})})})]})}function K(){const s=g(),{list:l,loading:m}=L(a=>a.slider),n=a=>{a.target.src="/images/default.jpg"},d=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:3,title:"Image Index",dataIndex:"index",key:"index"},{id:2,title:"Image",dataIndex:"image",render:a=>e.jsx("div",{className:"w-[2.5rem] h-[1.375rem] relative",children:e.jsx("img",{className:"absolute object-cover w-full h-full",alt:"product",onError:n,src:`${a}`||"/images/default.jpg"})}),csvOff:!0,key:"image"},{id:3,title:"Create Date",dataIndex:"createdAt",key:"createdAt",render:a=>I(a).startOf("month").format("YYYY-MM-DD"),renderCsv:a=>I(a).format("DD/MM/YYYY")},{id:4,title:"",key:"action",render:a=>[{label:e.jsx(b,{permission:"update-currency",children:e.jsx(V,{item:a})}),key:"edit"},{label:e.jsx(Y,{permission:"delete-slider",deleteThunk:E,title:"Hide",id:a.id,loadThunk:h}),key:"delete"}],csvOff:!0}];return o.useEffect(()=>{s(h())},[s]),e.jsx(O,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Slider Images",extra:e.jsx(A,{permission:"create-currency",title:"Create Slider",width:35,children:e.jsx(q,{})}),children:e.jsx(b,{permission:"readAll-currency",children:e.jsx(M,{total:null,columns:d,list:l,loading:m,title:"Slider Image"})})})}export{K as default};
