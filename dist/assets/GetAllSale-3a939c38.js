import{cN as s,r as m,df as T,dg as A,dh as _,di as P,cL as L,cM as h,cS as r,cO as y,cQ as x,dl as O,dm as H}from"./vendor-3a94a37a.js";import{U as B}from"./useStoreFilter-d90bb3a9.js";import{ac as E,d as U,cB as $,cC as z,C as V,U as R,T as q,b0 as G}from"./index-ed7845ca.js";import{C as Q}from"./CreateButton-dda4b580.js";import{V as J}from"./ViewBtn-ffc9b5cb.js";import{a as n}from"./nFormetter-959ac4e7.js";import{u as K}from"./useCurrency-4b14dd3d.js";import{T as c,M as W,d as X,D as Z}from"./vendor-large-f75deccb.js";import{S as ee,d as se}from"./DetailSale-7695696b.js";import"./List-9eb27318.js";import"./Tabs-8f68912a.js";import"./SaleProductListCard-76fb09a1.js";import"./invoiceGenerator-eaeb8720.js";import"./numberToWords-4c291141.js";import"./AddTransaction-603c2655.js";import"./AddAccount-8cfc0f4b.js";import"./BigDrawer-240149a9.js";import"./BtnLoader-1c0e147f.js";import"./emailConfigSlice-145edc06.js";import"./TagInput-f33dd18b.js";import"./AddProduct-aa890cea.js";import"./ImageUploader-c0ae741f.js";import"./MediaGallery-5095f29f.js";import"./UploaderWithDrag-568744bd.js";import"./AddManufacturer-2f6bafee.js";import"./AddProductBrand-894ab785.js";import"./UploadMany-c4472299.js";import"./AddProductSubcategory-71762def.js";import"./AddProductCategory-6511f02f.js";import"./AddUoM-1dc09ff9.js";import"./AddVatTax-97a0925d.js";import"./FormProductListCard-571d2cbc.js";import"./AddProductAttribute-4ec2c5fe.js";import"./AddProductAttributeValue-d16feddc.js";import"./AddDiscount-05e89f9a.js";const te=({information:t,count:i,isCustomer:d,title:b})=>{const l=K();return s.jsx(m.Fragment,{children:s.jsxs("section",{className:"grid sm:grid-cols-2 xl:grid-cols-4 gap-6 mt-5 mb-5",children:[s.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[s.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-violet-600 bg-violet-100 rounded-lg mr-6",children:s.jsx(T,{size:30})}),s.jsx("div",{children:s.jsxs(c,{title:s.jsxs("span",{className:"text-lg",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t==null?void 0:t.totalAmount.toFixed(3)]}),children:[s.jsxs("span",{className:"block text-violet-600 text-2xl sm:text-3xl font-bold sm:text-center",children:[" ",s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.totalAmount?n(Number(t.totalAmount)):0]}),s.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2  dark:text-yellow-100 ",children:["Total Sales"," ",s.jsxs("span",{className:"text-violet-600",children:["#",i?n(i):0]})]})]})})]}),s.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[s.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-violet-500 bg-violet-100 rounded-lg mr-6",children:s.jsx(A,{size:30})}),s.jsx("div",{children:s.jsxs(c,{title:s.jsxs("span",{className:"text-lg",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t==null?void 0:t.paidAmount.toFixed(3)]}),children:[s.jsxs("span",{className:"block text-violet-500 text-2xl sm:text-3xl font-bold sm:text-center",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.paidAmount?n(Number(t.paidAmount)):0]}),s.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2  dark:text-yellow-100 ",children:["Total Sale Paid"," "]})]})})]}),s.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[s.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-blue-600 bg-blue-100 rounded-lg mr-6",children:s.jsx(_,{size:30})}),s.jsx("div",{children:s.jsxs(c,{title:s.jsxs("span",{className:"text-lg",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t==null?void 0:t.dueAmount.toFixed(3)]}),children:[s.jsxs("span",{className:"block text-blue-600 text-2xl sm:text-3xl font-bold sm:text-center",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.dueAmount?n(t==null?void 0:t.dueAmount):0]}),s.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2 dark:text-yellow-100 ",children:[" ","Total Sale Due"," "]})]})})]}),s.jsxs("div",{className:"ant-shadow w-full relative sm:p-2 dark:bg-[#2e2d35] flex sm:justify-center items-center md:p-6 p-2 bg-white rounded-lg dashboard-card-bg",children:[s.jsx("div",{className:"sm:hidden inline-flex flex-shrink-0 items-center justify-center h-14 w-14 text-blue-600 bg-blue-100 rounded-lg mr-6",children:s.jsx(P,{size:30})}),s.jsx("div",{children:s.jsxs(c,{title:s.jsxs("span",{className:"text-lg",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t==null?void 0:t.profit.toFixed(3)]}),children:[s.jsxs("span",{className:"block text-blue-600 text-2xl sm:text-3xl font-bold sm:text-center",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.currencySymbol}}),t!=null&&t.profit?n(t==null?void 0:t.profit):0]}),s.jsxs("span",{className:"uppercase sm:text-[14px] block font-semibold sm:font-bold sm:mt-2 dark:text-yellow-100 ",children:[" ","Total Sale Profit"]})]})})]})]})})},He=()=>{var g,v;const t=L(),[i,d]=m.useState(!1),{list:b,total:l,loading:N}=h(e=>e.sales),{list:p}=h(e=>e.customers),{list:u}=h(e=>e.users),{storeFilter:k}=B(),[o,j]=m.useState({page:1,count:10,status:"true",startDate:r().startOf("month").format("YYYY-MM-DD"),endDate:r().endOf("month").format("YYYY-MM-DD"),user:""}),S=[{id:1,title:"Invoice",dataIndex:"id",key:"id",render:(e,{id:a})=>s.jsx(x,{to:`/admin/sale/${a}`,children:a}),renderCsv:e=>e},{title:"Store",dataIndex:"store",key:"store",render:e=>e==null?void 0:e.name,renderCsv:e=>e==null?void 0:e.name},{id:2,title:"Date",dataIndex:"date",key:"date",render:e=>r(e).format("ll"),renderCsv:e=>r(e).format("ll")},{id:3,title:"Customer",dataIndex:"customer",key:"customerId",render:e=>s.jsx(x,{to:`/admin/customer/${e==null?void 0:e.id}`,children:e==null?void 0:e.username}),renderCsv:e=>e==null?void 0:e.username},{id:4,title:"Total Amount",dataIndex:"totalAmount",key:"totalAmount",render:e=>Number(e).toFixed(2),renderCsv:e=>Number(e).toFixed(2)},{id:7,title:"Paid",dataIndex:"paidAmount",key:"paidAmount",render:e=>Number(e).toFixed(2),responsive:["md"],renderCsv:e=>Number(e).toFixed(2)},{id:6,title:"Due",dataIndex:"dueAmount",key:"dueAmount",render:e=>Number(e).toFixed(2),renderCsv:e=>Number(e).toFixed(2),responsive:["md"]},{id:6,title:"Tax",dataIndex:"totalTaxAmount",key:"totalTaxAmount",render:e=>Number(e).toFixed(2),renderCsv:e=>Number(e).toFixed(2),responsive:["md"]},{id:5,title:"Due date",dataIndex:"dueDate",key:"discount",render:e=>e?s.jsxs("div",{className:"flex gap-1 items-center",children:[r(e).format("ll"),se(e)&&s.jsx(X,{className:"text-xs",color:"red",children:"Overdue"})]}):null,renderCsv:e=>Number(e).toFixed(2)},{id:8,title:"Profit",dataIndex:"profit",key:"profit",render:e=>Number(e).toFixed(2),renderCsv:e=>Number(e).toFixed(2),responsive:["md"]},{id:9,title:"Sale Person",dataIndex:"user",key:"user",render:e=>s.jsx(x,{to:`/admin/hrm/staff/${e==null?void 0:e.id}`,children:e==null?void 0:e.username}),renderCsv:e=>e==null?void 0:e.username,responsive:["md"]},{id:10,title:"",dataIndex:"id",key:"action",render:({id:e,dueAmount:a})=>[{label:s.jsx(J,{title:"View",path:`/admin/sale/${e}`}),key:"view"},{label:s.jsx(x,{to:a?`/admin/payment/customer/${e}`:"#",state:{dueAmount:a||0},children:s.jsxs("button",{className:"flex items-center gap-2 rounded disabled:cursor-not-allowed",disabled:!a,children:[s.jsx(O,{className:"text-[1rem]"})," Payment"]})}),key:"payment"},{label:s.jsxs("div",{onClick:()=>{I(),t(G(e))},className:"flex gap-2  items-center cursor-pointer hover:text-primary",children:[s.jsx(H,{className:"text-[1rem]"}),"Email"]}),key:"SendEmail"}],csvOff:!0}],C=[k,{key:"salePersonId",label:"Sale Person",type:"select",options:u==null?void 0:u.map(e=>({label:e==null?void 0:e.username,value:e.id})),className:"min-w-[120px] max-w-[150px]",popupClassName:"w-[200px]"},{key:"customerId",label:"Customer",type:"select",options:p==null?void 0:p.map(e=>({label:e==null?void 0:e.username,value:e==null?void 0:e.id})),className:"min-w-[100px] max-w-[150px]",popupClassName:"w-[200px]"},{key:"orderStatus",label:"Status",type:"select",options:[{label:"Pending",value:"pending"},{label:"Received",value:"received"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}];m.useEffect(()=>{t(E({query:"all"})),t(U({query:"all"}))},[t]);const{RangePicker:f}=Z;m.useEffect(()=>(t($(o)),()=>{t(z())}),[t,o]);const w=e=>{const a=e[0].format("YYYY-MM-DD"),Y=e[1].format("YYYY-MM-DD");j(F=>({...F,startDate:a,endDate:Y}))},I=()=>{d(!0)},M=()=>{d(!1)},D=()=>{d(!1)};return s.jsxs("div",{className:"card card-custom mt-2",children:[s.jsxs("div",{className:"card-body",children:[s.jsx(te,{information:l==null?void 0:l._sum,count:(g=l==null?void 0:l._count)==null?void 0:g.id,isCustomer:!0}),s.jsx("br",{}),s.jsx(V,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Sale Invoice",extra:s.jsxs(s.Fragment,{children:[" ",s.jsx("div",{children:s.jsx(f,{className:"range-picker",onCalendarChange:w,defaultValue:[y(o.startDate,"YYYY-MM-DD"),y(o.endDate,"YYYY-MM-DD")]})}),s.jsx(Q,{to:"/admin/sale/add",title:"Create Sale"})]}),children:s.jsx(R,{permission:"readAll-saleInvoice",children:s.jsx(q,{list:b,columns:S,loading:N,total:(v=l==null?void 0:l._count)==null?void 0:v.id,setPageConfig:j,title:"Sale List",filters:C,isSearch:!0})})})]}),s.jsx(W,{title:"Send Sale Invoice",open:i,onOk:M,onCancel:D,footer:!1,children:s.jsx(ee,{setIsModalOpen:d,modal:!0})})]})};export{He as default};
