import{cL as q,c_ as $,cT as B,r,cM as z,cN as e,cQ as J,cP as j}from"./vendor-3a94a37a.js";import{T as M,N as U,A as V,E as _,Q as G}from"./Attachments-046a2313.js";import{I as H,O as K}from"./ImageUploadCrm-bd19e05e.js";import{u as W,d as X,C as Y,e as D,f,L as Z,bE as ee,N as se,bF as le,ae as P}from"./index-ed7845ca.js";import{F as c,B as R,b as Q,I as g,u as ae,v as ne}from"./vendor-large-f75deccb.js";import{D as te}from"./DetailsInfo-ac9192ab.js";import"./AddEmail-58ac19a5.js";import"./TagInput-f33dd18b.js";import"./AddProduct-aa890cea.js";import"./ImageUploader-c0ae741f.js";import"./MediaGallery-5095f29f.js";import"./UploaderWithDrag-568744bd.js";import"./BigDrawer-240149a9.js";import"./AddManufacturer-2f6bafee.js";import"./AddProductBrand-894ab785.js";import"./UploadMany-c4472299.js";import"./AddProductSubcategory-71762def.js";import"./AddProductCategory-6511f02f.js";import"./AddUoM-1dc09ff9.js";import"./AddVatTax-97a0925d.js";import"./FormProductListCard-571d2cbc.js";import"./AddProductAttribute-4ec2c5fe.js";import"./AddProductAttributeValue-d16feddc.js";import"./AddDiscount-05e89f9a.js";import"./DetailsNote-cf259519.js";import"./AddQuote-b08df3aa.js";import"./AddTask-88f11895.js";import"./AddAttachment-08320204.js";import"./AddOpportunity-ee63437e.js";function oe({contact:s,contactLoading:d}){var T,k;const m=q(),N=$(),{ContactId:l}=B(),[o]=c.useForm(),[p,x]=r.useState(!1),{list:u,loading:b}=z(a=>a.users),v=async()=>{var a=window.confirm("Are you sure you want to delete?");a&&(await m(ee(l))).payload.message==="success"&&(N(-1),m(se({})))},{permissions:h}=W(),w=h==null?void 0:h.includes("update-contact"),I=async a=>{const C={...a,contactOwnerId:parseInt(a.contactOwnerId)};(await m(D({id:s.id,values:C}))).payload.message==="success"&&(m(f(s.id)),x(!1))},y=a=>{x(!1),o.resetFields(),console.log("Failed:",a)};return r.useEffect(()=>{m(X({query:"all"}))},[m]),e.jsx(e.Fragment,{children:s?e.jsx(Y,{children:e.jsx(c,{form:o,colon:!1,disabled:!w,labelCol:{span:2},wrapperCol:{span:8},layout:"inline",onFieldsChange:()=>x(!0),onFinish:I,onFinishFailed:y,initialValues:{firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",contactOwnerId:(s==null?void 0:s.contactOwnerId)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",jobTitle:(s==null?void 0:s.jobTitle)||""},children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center px-5 p-3 border-b",children:[e.jsxs("div",{className:"flex items-end gap-5",children:[e.jsx(H,{data:s,updateThunk:D,loadThunk:f}),e.jsxs("div",{className:"flex flex-col dark:text-white",children:[e.jsxs("span",{className:"font-bold",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),s.jobTitle&&((T=s.company)==null?void 0:T.companyName)&&e.jsxs("span",{children:[s.jobTitle," at"," ",e.jsx(J,{to:`/admin/company/${s.companyId}`,children:(k=s.company)==null?void 0:k.companyName})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[p&&e.jsx(c.Item,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(R,{type:"primary",htmlType:"submit",children:"Save"}),e.jsx(R,{loading:d,type:"danger",onClick:y,children:"Cancel"})]})}),e.jsx(R,{danger:!0,onClick:v,children:"Delete"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 p-3",children:[e.jsx(c.Item,{className:"flex flex-col",label:"Contact Owner",name:"contactOwnerId",children:e.jsx(Q,{className:"md:ml-5",bordered:!1,loading:b,children:u==null?void 0:u.map(a=>e.jsxs(Q.Option,{value:a.id,children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]},a.id))})}),e.jsx(c.Item,{label:"First Name",name:"firstName",children:e.jsx(g,{bordered:!1,suffix:e.jsx(j,{}),className:"md:ml-5"})}),e.jsx(c.Item,{label:"Last Name",name:"lastName",children:e.jsx(g,{bordered:!1,suffix:e.jsx(j,{}),className:"md:ml-5"})}),e.jsx(c.Item,{label:"Email",name:"email",children:e.jsx(g,{bordered:!1,suffix:e.jsx(j,{}),className:"md:ml-5"})}),e.jsx(c.Item,{label:"Phone Number",name:"phone",children:e.jsx(g,{bordered:!1,suffix:e.jsx(j,{}),className:"md:ml-5"})}),e.jsx(c.Item,{label:"Job Title",name:"jobTitle",children:e.jsx(g,{bordered:!1,suffix:e.jsx(j,{}),className:"md:ml-5"})})]})]})})}):e.jsx(Z,{})})}function Pe(){var E,F,L,O,S,A;const{id:s}=B(),[d,m]=r.useState(!1),N=q(),{contact:l,loading:o}=z(t=>t.contact);r.useEffect(()=>(N(f(s)),()=>{le()}),[N,s]);const p=r.useRef(null),x=r.useRef(null),u=r.useRef(null),b=r.useRef(null),v=r.useRef(null),h=r.useRef(null),w=r.useRef(null),I=()=>{const t=x.current,n=p.current,i=t.offsetTop-n.offsetTop;n.scrollTop=i},y=()=>{const t=b.current,n=p.current,i=t.offsetTop-n.offsetTop;n.scrollTop=i},T=()=>{const t=u.current,n=p.current,i=t.offsetTop-n.offsetTop;n.scrollTop=i},k=()=>{const t=w.current,n=p.current,i=t.offsetTop-n.offsetTop;n.scrollTop=i},a=()=>{const t=h.current,n=p.current,i=t.offsetTop-n.offsetTop;n.scrollTop=i},C=()=>{const t=v.current,n=p.current,i=t.offsetTop-n.offsetTop;n.scrollTop=i};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative  w-full h-[calc(100vh-52.8px)] overflow-hidden flex flex-row",children:[e.jsx("div",{className:`hidden md:flex dark:bg-transparent bg-[#2A2D3E] dark:border-gray-50 border-primary hover:bg-primary  border-2 text-white absolute top-[10px] left-[225px] w-[30px] h-[30px] leading-[30px] rounded-full justify-center items-center z-30 duration-300   ${d?"top-[10px] left-[4px]":"top-[10px] md:left-[185px] 2xl:left-[225px]"}`,children:d?e.jsx(ae,{onClick:()=>m(!d),className:"text-[16px] cursor-pointer"}):e.jsx(ne,{onClick:()=>m(!d),className:"text-[16px] cursor-pointer"})}),e.jsx("div",{className:P("hidden md:block left-0 top-0 z-10  duration-300 h-screen  w-[200px] 2xl:w-[240px] bg-sideNavBg  text-white select-none",{"w-[20px] 2xl:w-[20px]":d}),children:!d&&e.jsxs("div",{className:"flex items-start flex-col gap-1 select-none",children:[e.jsxs("div",{onClick:y,className:"flex gap-3 items-center  px-5 py-2 font-semibold  mt-14",children:["Opportunities",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(E=l==null?void 0:l.opportunity)==null?void 0:E.length})]}),e.jsxs("div",{onClick:k,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Tasks",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(F=l==null?void 0:l.crmTask)==null?void 0:F.length})]}),e.jsxs("div",{onClick:T,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Notes",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(L=l==null?void 0:l.note)==null?void 0:L.length})]}),e.jsxs("div",{onClick:C,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Attachments",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(O=l==null?void 0:l.attachment)==null?void 0:O.length})]}),e.jsxs("div",{onClick:I,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Emails",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(S=l==null?void 0:l.emails)==null?void 0:S.length})]}),e.jsxs("div",{onClick:a,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Quotes",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(A=l==null?void 0:l.quote)==null?void 0:A.length})]})]})}),e.jsxs("div",{ref:p,className:P("flex flex-col w-full 2xl:w-[calc(100vw-240px)] md:w-[calc(100vw-200px)] duration-300 p-4 scroll-smooth overflow-y-auto",{"md:w-[calc(100vw-20px)] 2xl:w-[calc(100vw-20px)]":d}),children:[e.jsx(oe,{contact:l,contactLoading:o}),e.jsx(te,{contact:l,contactLoading:o}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("div",{ref:b,children:e.jsx(K,{data:l,loading:o,name:"contactId",singleLoadThunk:f})}),e.jsx("div",{ref:w,children:e.jsx(M,{data:l,loading:o,name:"contactId",singleLoadThunk:f})}),e.jsx("div",{ref:u,className:"",children:e.jsx(U,{data:l,loading:o,name:"contactId",singleLoadThunk:f})}),e.jsx("div",{ref:v,children:e.jsx(V,{data:l,loading:o,name:"contactId",singleLoadThunk:f})}),e.jsx("div",{ref:x,children:e.jsx(_,{data:l,loading:o,name:"contactId",singleLoadThunk:f})}),e.jsx("div",{ref:h,children:e.jsx(G,{data:l,loading:o,name:"contactId",singleLoadThunk:f})})]})]})]})})}export{Pe as default};
