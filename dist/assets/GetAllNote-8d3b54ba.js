import{cM as d,cL as h,r as u,cN as a,cQ as p,cS as j}from"./vendor-3a94a37a.js";import{a as w,t as b,v as y,w as v,d as g,dd as N,C as A,U as c,T as I,de as C,df as f,dg as $}from"./index-ed7845ca.js";import{M as E}from"./Modal-2abf3ad3.js";import{C as M}from"./CommonDelete-4339174a.js";import{C as S}from"./CreateDrawer-a7af16b9.js";import{A as D,D as T}from"./DetailsNote-cf259519.js";import{E as Q}from"./vendor-large-f75deccb.js";function Y(){const l=d(s=>s.company.list)||[],i=d(s=>s.contact.list)||[],n=d(s=>s.opportunity.list)||[],o=d(s=>s.quote.list)||[],r=d(s=>s.users.list)||[],t=h(),x=[{key:"noteOwner",label:"Owner",type:"select",options:r==null?void 0:r.map(s=>({label:`${s.username}`,value:s.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"company",label:"Company",type:"select",options:l==null?void 0:l.map(s=>({label:s.companyName,value:s.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"contact",label:"Contact",type:"select",options:i==null?void 0:i.map(s=>({label:s.firstName+" "+s.lastName,value:s.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"opportunity",label:"Opportunity",type:"select",options:n==null?void 0:n.map(s=>({label:s.opportunityName,value:s.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"quote",label:"Quote",type:"select",options:o==null?void 0:o.map(s=>({label:s.quoteName,value:s.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return u.useEffect(()=>{t(w()),t(b()),t(y()),t(v()),t(g({query:"all"}))},[t]),x||[]}function R(){const l=h(),{list:i,loading:n,total:o,edit:r}=d(e=>e.note),[t,x]=u.useState({page:1,count:10}),s=Y(),k=[{title:"Title",key:"title",dataIndex:"title",render:(e,m)=>a.jsx("span",{className:"cursor-pointer",onClick:()=>l(f(m)),children:e}),renderCsv:e=>e},{title:"Owner",dataIndex:"noteOwner",key:"owner",render:(e,m)=>a.jsx(p,{to:`/admin/hrm/staff/${m==null?void 0:m.noteOwnerId}`,children:e==null?void 0:e.fullName}),renderCsv:e=>e==null?void 0:e.fullName},{title:"company",key:"company",dataIndex:"company",render:e=>a.jsx(p,{to:`/admin/crm/company/${e==null?void 0:e.id}`,children:e==null?void 0:e.companyName}),renderCsv:e=>e==null?void 0:e.companyName},{title:"Contact",key:"contact",dataIndex:"contact",render:e=>a.jsxs(p,{to:`/admin/crm/contact/${e==null?void 0:e.id}`,children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),renderCsv:e=>`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`},{title:"Opportunity",key:"opportunity",dataIndex:"opportunity",render:e=>a.jsx(p,{to:`/admin/crm/opportunity/${e==null?void 0:e.id}`,children:e==null?void 0:e.opportunityName}),renderCsv:e=>e==null?void 0:e.opportunityName},{title:"Quote",key:"quote",dataIndex:"quote",render:e=>e!=null&&e.id?a.jsx(p,{to:`/admin/crm/quote/${e==null?void 0:e.id}`,children:e==null?void 0:e.quoteName}):"-"},{title:"Create date",key:"Create date",dataIndex:"createdAt",render:e=>j(e).format("MMMM Do YYYY")},{id:5,title:"",key:"action",render:e=>[{label:a.jsx("span",{className:"cursor-pointer",onClick:()=>l(f(e)),children:a.jsxs("button",{className:"flex justify-center items-center gap-2 rounded",children:[a.jsx(Q,{})," View"]})}),key:"view"},{label:a.jsx(M,{values:{id:e.id,status:e.status},title:e.status==="true"?"Hide":"Show",permission:"delete-note",deleteThunk:$,loadThunk:N,query:t,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}];return u.useEffect(()=>{l(N(t))},[l,t]),a.jsxs(a.Fragment,{children:[a.jsx(A,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Note",extra:a.jsx(S,{permission:"create-note",title:"Create Note",width:40,children:a.jsx(D,{})}),children:a.jsx(c,{permission:"readAll-note",children:a.jsx(I,{list:i,columns:k,loading:n,total:o,setPageConfig:x,title:"note List",isSearch:!0,filters:s})})}),a.jsx(c,{permission:"readSingle-note",children:a.jsx(E,{open:r,onClose:()=>{l(C())},className:"md:w-[80%] md:h-[80%]",children:a.jsx(T,{note:r,onClose:()=>l(C()),load:()=>l(N(t))})})})]})}export{R as default};
