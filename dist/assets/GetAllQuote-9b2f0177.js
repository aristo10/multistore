import{cM as o,cL as C,r as c,cN as t,cQ as x,db as r}from"./vendor-3a94a37a.js";import{a as f,t as N,v as w,d as b,c0 as h,c2 as v,C as A,U as g,T as j}from"./index-ed7845ca.js";import{C as q}from"./CreateDrawer-a7af16b9.js";import{A as y}from"./AddQuote-b08df3aa.js";import"./vendor-large-f75deccb.js";function I(){const l=o(a=>a.quoteStage.list)||[],n=o(a=>a.company.list)||[],d=o(a=>a.contact.list)||[],m=o(a=>a.opportunity.list)||[],i=o(a=>a.users.list)||[],s=C(),u=[{key:"quoteOwner",label:"Owner",type:"select",options:i==null?void 0:i.map(a=>({label:`${a.username}`,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"company",label:"Company",type:"select",options:n==null?void 0:n.map(a=>({label:a.companyName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"contact",label:"Contact",type:"select",options:d==null?void 0:d.map(a=>({label:a.firstName+" "+a.lastName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"opportunity",label:"Opportunity",type:"select",options:m==null?void 0:m.map(a=>({label:a.opportunityName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"quoteStage",label:"Stage",type:"select",options:l==null?void 0:l.map(a=>({label:a.quoteStageName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return c.useEffect(()=>{s(f()),s(N()),s(w()),s(b({query:"all"})),s(h())},[s]),u||[]}function E(){const l=C(),{list:n,loading:d,total:m}=o(e=>e.quote),i=I(),[s,u]=c.useState({page:1,count:10}),a=[{title:"Name",key:"quoteName",render:({quoteName:e,id:p})=>t.jsx(x,{to:`/admin/crm/quote/${p}`,children:e})},{title:"Owner",dataIndex:"quoteOwner",render:e=>t.jsx(x,{to:`/admin/hr/staffs/${e.id}`,children:e.username}),renderCsv:e=>e.username},{title:"Quotation Date",dataIndex:"quoteDate",render:e=>r(e).format("ll"),renderCsv:e=>r(e).format("ll")},{title:"Expiration Date",dataIndex:"expirationDate",render:e=>r(e).format("ll"),renderCsv:e=>r(e).format("ll")},{title:"Total Amount",dataIndex:"totalAmount",key:"totalAmount"},{title:"Company",dataIndex:"company",render:(e,p)=>t.jsx(x,{to:`/admin/crm/company/${p==null?void 0:p.companyId}`,children:e==null?void 0:e.companyName}),renderCsv:e=>e==null?void 0:e.companyName},{title:"Contact",dataIndex:"contact",render:e=>t.jsx(x,{to:`/admin/crm/contact/${e.id}`,children:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`}),renderCsv:e=>e==null?void 0:e.companyName},{title:"Opportunity",dataIndex:"opportunity",render:e=>t.jsx(x,{to:`/admin/crm/opportunity/${e==null?void 0:e.id}`,children:e==null?void 0:e.opportunityName}),renderCsv:e=>e==null?void 0:e.opportunityName},{title:"Create Date",dataIndex:"createdAt",render:e=>r(e).format("ll"),renderCsv:e=>r(e).format("ll")}];return c.useEffect(()=>{l(v(s))},[l,s]),t.jsx(A,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Quote",extra:t.jsx(q,{permission:"create-quote",title:"Create Quote",width:70,children:t.jsx(y,{})}),children:t.jsx(g,{permission:"readAll-quote",children:t.jsx(j,{list:n,columns:a,loading:d,total:m,setPageConfig:u,title:"Quote List",isSearch:!0,filters:i})})})}export{E as default};
