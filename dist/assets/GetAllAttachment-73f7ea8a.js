import{cM as t,cL as C,r as p,cN as s,cQ as r,cO as N}from"./vendor-3a94a37a.js";import{c as u,cU as y,d as v,P as A,C as b,U as g,T as k}from"./index-ed7845ca.js";import{C as j}from"./CreateDrawer-a7af16b9.js";import{A as h}from"./AddAttachment-08320204.js";import{V as w}from"./ViewBtn-ffc9b5cb.js";import"./vendor-large-f75deccb.js";import"./ImageUploader-c0ae741f.js";import"./MediaGallery-5095f29f.js";import"./UploaderWithDrag-568744bd.js";function I(){const{list:a,loading:o}=t(e=>e.industry),{list:i,loading:x}=t(e=>e.companyType),{list:l,loading:f}=t(e=>e.users),d=C(),n=[{key:"companyOwner",label:"Owner",type:"select",options:l==null?void 0:l.map(e=>({label:`${e.username}`,value:e.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"companyType",label:"Type",type:"select",options:i==null?void 0:i.map(e=>({label:e.companyTypeName,value:e.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"industry",label:"Industry",type:"select",options:a==null?void 0:a.map(e=>({label:e.industryName,value:e.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return p.useEffect(()=>{d(u()),d(y()),d(v({query:"all"}))},[d]),n}function V(){const a=C(),{list:o,loading:i,total:x}=t(e=>e.attachment),[l,f]=p.useState({page:1,count:10}),d=I(),n=[{title:"Name",key:"attachmentName",render:({attachmentName:e,attachmentPath:m})=>s.jsx(r,{target:"_blank",to:window.env.VITE_APP_API+"/media/view/"+m,children:e}),renderCsv:({attachmentName:e})=>e},{title:"Owner",dataIndex:"attachmentOwner",key:"owner",render:(e,m)=>s.jsx(r,{to:`/admin/hrm/staff/${m==null?void 0:m.attachmentOwnerId}`,children:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`}),renderCsv:e=>`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`},{title:"Company",key:"company",dataIndex:"company",render:e=>s.jsx(r,{to:`/admin/crm/company/${e==null?void 0:e.id}`,children:e==null?void 0:e.companyName}),renderCsv:e=>e.companyName},{title:"Contact",key:"contact",dataIndex:"contact",render:e=>s.jsxs(r,{to:`/admin/crm/contact/${e==null?void 0:e.id}`,children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),renderCsv:e=>`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`},{title:"Opportunity",key:"opportunity",dataIndex:"opportunity",render:e=>s.jsx(r,{to:`/admin/crm/opportunity/${e==null?void 0:e.id}`,children:e==null?void 0:e.opportunityName}),renderCsv:e=>e==null?void 0:e.opportunityName},{title:"Quote",key:"quote",dataIndex:"quote",render:e=>s.jsx(r,{to:`/admin/crm/quote/${e==null?void 0:e.id}`,children:e==null?void 0:e.quoteName}),renderCsv:e=>e.quoteName},{title:"Create date",key:"Create date",dataIndex:"createdAt",render:e=>N(e).format("DD/MM/YYYY"),renderCsv:e=>N(e).format("DD/MM/YYYY")},{id:4,title:"",key:"action",render:({attachmentPath:e})=>[{label:s.jsx(w,{title:"View",path:window.env.VITE_APP_API+"media/view/"+e}),key:"view"}],csvOff:!0}];return p.useEffect(()=>{a(A(l))},[a,l]),s.jsx(b,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Attachment",extra:s.jsx(j,{permission:"create-attachment",title:"Create Attachment",width:40,children:s.jsx(h,{})}),children:s.jsx(g,{permission:"readAll-attachment",children:s.jsx(k,{list:o,columns:n,loading:i,total:x,setPageConfig:f,title:"company List",isSearch:!0,filters:d})})})}export{V as default};
