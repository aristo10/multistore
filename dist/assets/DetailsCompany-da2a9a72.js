import{r as f,cL as A,cM as S,cN as e,cP as m,cT as Q,c_ as J,cQ as R,cS as K}from"./vendor-3a94a37a.js";import{T as G,N as H,A as X,E as ee,Q as se}from"./Attachments-046a2313.js";import{I as le,O as ne}from"./ImageUploadCrm-bd19e05e.js";import{u as U,cU as ae,c as ie,gI as F,gJ as j,d as te,C as Y,L as oe,gK as re,U as E,am as ce,gL as de,ae as q}from"./index-ed7845ca.js";import{F as n,C as me,a as M,B as k,b as I,I as p,P as pe,e as xe,u as fe,v as he}from"./vendor-large-f75deccb.js";import{A as ue}from"./AddContact-630a86a5.js";import"./AddEmail-58ac19a5.js";import"./TagInput-f33dd18b.js";import"./AddProduct-aa890cea.js";import"./ImageUploader-c0ae741f.js";import"./MediaGallery-5095f29f.js";import"./UploaderWithDrag-568744bd.js";import"./BigDrawer-240149a9.js";import"./AddManufacturer-2f6bafee.js";import"./AddProductBrand-894ab785.js";import"./UploadMany-c4472299.js";import"./AddProductSubcategory-71762def.js";import"./AddProductCategory-6511f02f.js";import"./AddUoM-1dc09ff9.js";import"./AddVatTax-97a0925d.js";import"./FormProductListCard-571d2cbc.js";import"./AddProductAttribute-4ec2c5fe.js";import"./AddProductAttributeValue-d16feddc.js";import"./AddDiscount-05e89f9a.js";import"./DetailsNote-cf259519.js";import"./AddQuote-b08df3aa.js";import"./AddTask-88f11895.js";import"./AddAttachment-08320204.js";import"./AddOpportunity-ee63437e.js";function ge({data:s,loading:h}){const[y]=n.useForm(),[N,l]=f.useState(!1),i=A(),{list:d,loading:b}=S(a=>a.companyType),{list:t,loading:c}=S(a=>a.industry),{permissions:g}=U(),C=g==null?void 0:g.includes("update-company");f.useEffect(()=>{i(ae()),i(ie())},[i]);const w=async a=>{const o={...a,companySize:parseInt(a.companySize),annualRevenue:parseInt(a.annualRevenue)};(await i(F({id:s.id,values:o}))).payload.message==="success"&&(i(j(s.id)),l(!1))},v=()=>{l(!1),y.resetFields()};return e.jsx(e.Fragment,{children:s&&e.jsx(me,{bordered:!1,headStyle:{display:"none"},bodyStyle:{padding:0},children:s&&e.jsx(n,{form:y,colon:!1,disabled:!C,labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},layout:"inline",onFieldsChange:()=>l(!0),onFinish:w,onFinishFailed:v,initialValues:{companyName:s.companyName||"",website:s.website||"",phone:s.phone||"",email:s.email||"",companyOwnerId:s.companyOwnerId||"",companyTypeId:s.companyTypeId||"",industryId:s.industryId||"",companySize:s.companySize||"",annualRevenue:s.annualRevenue||"",billingStreet:s.billingStreet||"",billingCity:s.billingCity||"",billingState:s.billingState||"",billingCountry:s.billingCountry||"",billingZipCode:s.billingZipCode||"",shippingStreet:s.shippingStreet||"",shippingCity:s.shippingCity||"",shippingState:s.shippingState||"",shippingCountry:s.shippingCountry||"",shippingZipCode:s.shippingZipCode||""},children:e.jsx(M,{className:"bg-transparent w-full",bordered:!0,children:e.jsx(M.Panel,{header:e.jsx("span",{className:"font-bold text-md dark:text-white",children:"Details"}),extra:e.jsx(e.Fragment,{children:N&&e.jsx(n.Item,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{type:"primary",htmlType:"submit",children:"Save"}),e.jsx(k,{loading:h,type:"danger",onClick:v,children:"Cancel"})]})})}),children:e.jsxs("div",{className:"flex flex-wrap xl:px-10",children:[e.jsxs("div",{className:"w-full xl:w-[50%] flex flex-col gap-2 p-3",children:[e.jsx(n.Item,{className:"flex flex-col",label:"Company Type",name:"companyTypeId",children:e.jsx(I,{bordered:!1,className:"md:ml-5",loading:b,children:d==null?void 0:d.map(a=>e.jsx(I.Option,{value:a.id,children:a==null?void 0:a.companyTypeName},a.id))})}),e.jsx(n.Item,{className:"flex flex-col",label:"Industry",name:"industryId",children:e.jsx(I,{bordered:!1,className:"md:ml-5",loading:c,children:t==null?void 0:t.map(a=>e.jsx(I.Option,{value:a.id,children:a==null?void 0:a.industryName},a.id))})}),e.jsx(n.Item,{label:"Company Size",name:"companySize",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Annual Revenue",name:"annualRevenue",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})})]}),e.jsxs("div",{className:"w-full xl:w-[50%] flex flex-col gap-2 p-3",children:[e.jsx("div",{className:"text-lg font-bold py-2 border-b",children:"Billing Address"}),e.jsx(n.Item,{label:"Billing Street",name:"billingStreet",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Billing City",name:"billingCity",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Billing Zip Code",name:"billingZipCode",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Billing State",name:"billingState",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Billing Country",name:"billingCountry",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})})]}),e.jsxs("div",{className:"w-full xl:w-[50%] flex flex-col gap-2 p-3",children:[e.jsx("div",{className:"text-lg font-bold py-2 border-b",children:"Shipping Address"}),e.jsx(n.Item,{label:"Shipping Street",name:"shippingStreet",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Shipping City",name:"shippingCity",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Shipping Zip Code",name:"shippingZipCode",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Shipping State",name:"shippingState",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})}),e.jsx(n.Item,{label:"Shipping Country",name:"shippingCountry",children:e.jsx(p,{bordered:!1,className:"md:ml-5",suffix:e.jsx(m,{})})})]})]})},"1")})})})})}function je({data:s,loading:h}){const[y]=n.useForm(),[N,l]=f.useState(!1),{list:i,loading:d}=S(o=>o.users),{CompanyId:b}=Q(),t=J(),c=A(),g=async()=>{var o=window.confirm("Are you sure you want to delete?");o&&(await c(re(b))).payload.message==="success"&&t(-1)},{permissions:C}=U(),w=C==null?void 0:C.includes("update-company"),v=async o=>{(await c(F({id:b,values:o}))).payload.message==="success"&&c(j(b))},a=o=>{console.log("Failed:",o)};return f.useEffect(()=>{c(te({query:"all"}))},[c]),e.jsx(e.Fragment,{children:s?e.jsx(Y,{className:"mb-4",children:e.jsx(n,{form:y,colon:!1,disabled:!w,labelCol:{span:2},wrapperCol:{span:8},layout:"inline",onFieldsChange:()=>l(!0),onFinish:v,onFinishFailed:a,initialValues:{companyOwnerId:s.companyOwnerId,companyName:s==null?void 0:s.companyName,website:s==null?void 0:s.website,phone:s==null?void 0:s.phone,email:s==null?void 0:s.email},children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center px-5 p-3",children:[e.jsxs("div",{className:"flex items-end gap-5",children:[e.jsx(le,{data:s,updateThunk:F,loadThunk:j}),e.jsxs("div",{className:"flex flex-col dark:text-white",children:[e.jsx("span",{className:"font-bold",children:s.companyName}),s.website&&e.jsx(R,{target:"_blank",to:"https://"+s.website,children:s.website}),s.phone]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx(n.Item,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{type:"primary",htmlType:"submit",children:"Save"}),e.jsx(k,{loading:h,type:"danger",onClick:a,children:"Cancel"})]})}),e.jsx(k,{danger:!0,onClick:g,children:"Delete"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 p-3",children:[e.jsx(n.Item,{className:"flex flex-col",label:"Company Owner",name:"companyOwnerId",children:e.jsx(I,{bordered:!1,loading:d,className:"md:ml-5",children:i==null?void 0:i.map(o=>e.jsxs(I.Option,{value:o.id,children:[o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]},o.id))})}),e.jsx(n.Item,{label:"Company Name",name:"companyName",children:e.jsx(p,{bordered:!1,suffix:e.jsx(m,{}),className:"md:ml-5"})}),e.jsx(n.Item,{label:"Website",name:"website",children:e.jsx(p,{bordered:!1,suffix:e.jsx(m,{}),className:"md:ml-5"})}),e.jsx(n.Item,{label:"Email",name:"email",children:e.jsx(p,{bordered:!1,suffix:e.jsx(m,{}),className:"md:ml-5"})}),e.jsx(n.Item,{label:"Phone Number",name:"phone",children:e.jsx(p,{bordered:!1,suffix:e.jsx(m,{}),className:"md:ml-5"})})]})]})})}):e.jsx(oe,{})})}function be({data:s,loading:h,name:y,singleLoadThunk:N}){const[l,i]=f.useState(!1),d=()=>{i(!1)},b=[{title:"Name",key:"name",render:({firstName:t,lastName:c,id:g})=>g?e.jsxs(R,{to:`/admin/crm/contact/${g}`,children:[t," ",c]}):"-",sorter:(t,c)=>t.firstName.localeCompare(c.firstName)},{title:"Email",key:"email",dataIndex:"email"},{title:"Phone number",key:"phone",dataIndex:"phone"},{title:"Owner",dataIndex:"contactOwner",key:"owner",render:(t,c)=>e.jsxs(R,{to:`/admin/hrm/staff/${c==null?void 0:c.contactOwnerId}`,children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]})},{title:"Create date",key:"Create date",dataIndex:"createdAt",render:t=>K(t).format("MMMM Do YYYY")}];return e.jsxs(Y,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Contacts"}),e.jsx(E,{permission:"create-quote",children:e.jsx(pe,{onClick:()=>i(!0),className:"bg-primary text-white cursor-pointer rounded-sm text-[14px] p-[2px]"})})]}),bodyStyle:{padding:0},children:[e.jsx("div",{children:e.jsx(E,{permission:"readAll-contact",children:e.jsx(ce,{bordered:!0,columns:b,loading:h,data:s?s.contact:[],pagination:{hideOnSinglePage:!0},scroll:{x:800,y:300}})})}),e.jsx(E,{permission:"create-contact",children:e.jsx(xe,{onClose:d,open:l,title:"Create Contact",width:window.innerWidth<=768?"100%":"45%",placement:"right",children:e.jsx(ue,{onClose:d,open:l,createAs:{name:y,value:s==null?void 0:s.id,singleLoadThunk:N}})})})]})}function Je(){var L,O,P,B,D,z,Z;const{id:s}=Q(),[h,y]=f.useState(!1),N=A(),{company:l,loading:i}=S(x=>x.company);f.useEffect(()=>(N(j(s)),()=>{de()}),[N,s]);const d=f.useRef(null),b=f.useRef(null),t=f.useRef(null),c=f.useRef(null),g=f.useRef(null),C=f.useRef(null),w=f.useRef(null),v=f.useRef(null),a=()=>{const x=b.current,r=d.current,u=x.offsetTop-r.offsetTop;r.scrollTop=u},o=()=>{const x=c.current,r=d.current,u=x.offsetTop-r.offsetTop;r.scrollTop=u},T=()=>{const x=t.current,r=d.current,u=x.offsetTop-r.offsetTop;r.scrollTop=u},$=()=>{const x=w.current,r=d.current,u=x.offsetTop-r.offsetTop;r.scrollTop=u},V=()=>{const x=C.current,r=d.current,u=x.offsetTop-r.offsetTop;r.scrollTop=u},W=()=>{const x=g.current,r=d.current,u=x.offsetTop-r.offsetTop;r.scrollTop=u},_=()=>{const x=v.current,r=d.current,u=x.offsetTop-r.offsetTop;r.scrollTop=u};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative  w-full h-[calc(100vh-52.8px)] overflow-hidden flex flex-row",children:[e.jsx("div",{className:`hidden md:flex dark:bg-transparent bg-[#2A2D3E] dark:border-gray-50 border-primary hover:bg-primary  border-2 text-white absolute top-[10px] left-[225px] w-[30px] h-[30px] leading-[30px] rounded-full justify-center items-center z-30 duration-300  ${h?"top-[10px] left-[4px]":"top-[10px] md:left-[185px] 2xl:left-[225px]"}`,children:h?e.jsx(fe,{onClick:()=>y(!h),className:"text-[16px] cursor-pointer"}):e.jsx(he,{onClick:()=>y(!h),className:"text-[16px] cursor-pointer"})}),e.jsx("div",{className:q("hidden md:block left-0 top-0 z-10  duration-300 h-screen  w-[200px] 2xl:w-[240px] bg-sideNavBg  text-white select-none",{"w-[20px] 2xl:w-[20px]":h}),children:!h&&e.jsxs("div",{className:"flex items-start flex-col gap-1 select-none",children:[e.jsxs("div",{onClick:o,className:"flex gap-3 items-center  mt-12 px-5 py-2 font-semibold",children:["Opportunities",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(L=l==null?void 0:l.opportunity)==null?void 0:L.length})]}),e.jsxs("div",{onClick:$,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Tasks",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(O=l==null?void 0:l.crmTask)==null?void 0:O.length})]}),e.jsxs("div",{onClick:_,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Contacts",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(P=l==null?void 0:l.contact)==null?void 0:P.length})]}),e.jsxs("div",{onClick:T,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Notes",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(B=l==null?void 0:l.note)==null?void 0:B.length})]}),e.jsxs("div",{onClick:W,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Attachments",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(D=l==null?void 0:l.attachment)==null?void 0:D.length})]}),e.jsxs("div",{onClick:a,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Emails",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(z=l==null?void 0:l.emails)==null?void 0:z.length})]}),e.jsxs("div",{onClick:V,className:"flex gap-3 items-center  px-5 py-2 font-semibold",children:["Quotes",e.jsx("span",{className:"px-1 bg-teal-700 text-white rounded-full",children:(Z=l==null?void 0:l.quote)==null?void 0:Z.length})]})]})}),e.jsxs("div",{ref:d,className:q("flex flex-col w-full 2xl:w-[calc(100vw-240px)] md:w-[calc(100vw-200px)] duration-300 p-4 scroll-smooth overflow-y-auto",{"md:w-[calc(100vw-20px)] 2xl:w-[calc(100vw-20px)]":h}),children:[e.jsx(je,{data:l,loading:i}),e.jsx(ge,{data:l,loading:i}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("div",{ref:c,children:e.jsx(ne,{data:l,loading:i,name:"companyId",singleLoadThunk:j})}),e.jsx("div",{ref:w,children:e.jsx(G,{data:l,loading:i,name:"companyId",singleLoadThunk:j})}),e.jsx("div",{ref:v,children:e.jsx(be,{data:l,loading:i,name:"companyId",singleLoadThunk:j})}),e.jsx("div",{ref:t,children:e.jsx(H,{data:l,loading:i,name:"companyId",singleLoadThunk:j})}),e.jsx("div",{ref:g,children:e.jsx(X,{data:l,loading:i,name:"companyId",singleLoadThunk:j})}),e.jsx("div",{ref:b,children:e.jsx(ee,{data:l,loading:i,name:"companyId",singleLoadThunk:j})}),e.jsx("div",{ref:C,children:e.jsx(se,{data:l,loading:i,name:"companyId",singleLoadThunk:j})})]})]})]})})}export{Je as default};
