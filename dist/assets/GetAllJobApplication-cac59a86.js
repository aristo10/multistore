import{cL as I,r as m,cM as h,cN as e,cT as J,cO as N}from"./vendor-3a94a37a.js";import{gA as A,gB as L,gC as y,eB as B,eA as v,C as k,U as w,T as S,gD as T,gE as F}from"./index-ed7845ca.js";import{C as D}from"./CreateDrawer-a7af16b9.js";import{C as P}from"./CommonDelete-4339174a.js";import{F as s,b as f,I as c,U as V,N as U,B as E,M as q,k as M}from"./vendor-large-f75deccb.js";import{V as O}from"./ViewBtn-ffc9b5cb.js";const R=()=>{const r=I(),{Option:b}=f,[g,x]=m.useState(!1),[o]=s.useForm(),[p,u]=m.useState([]),{list:i,loading:j}=h(l=>l.job),t=async l=>{x(!0);try{const d=new FormData;d.append("jobId",l.jobId),d.append("name",l.name),d.append("address",l.address),d.append("phone",l.phone),d.append("email",l.email),d.append("coverLater",l.coverLater),p.length&&d.append("files[]",p[0].originFileObj),(await r(L(d))).payload.message==="success"&&(o.resetFields(),u([]),y({page:1,count:10,status:"true"})),x(!1)}catch{}},n=({fileList:l})=>{u(l)};return m.useEffect(()=>{r(A())},[r]),e.jsx(s,{style:{marginBottom:"40px"},form:o,eventKey:"jobApplication-form",name:"basic",className:"mx-4",layout:"vertical",onFinish:t,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Job",name:"jobId",rules:[{required:!0,message:"please Select Job"}],children:e.jsx(f,{loading:j,size:"middle",mode:"single",allowClear:!0,style:{width:"100%"},placeholder:"Please select Job",children:i&&i.map(l=>e.jsx(b,{value:l.id,children:l.jobTitle},l.id))})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Candidate Name",name:"name",rules:[{required:!0,message:"please Input Candidate Name"}],children:e.jsx(c,{placeholder:"Mr. XYZ"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Email",name:"email",rules:[{required:!0,type:"email",message:"please Input Email"}],children:e.jsx(c,{placeholder:"example@gmail.com"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Phone",name:"phone",rules:[{required:!0,message:"please Input Phone"}],children:e.jsx(c,{placeholder:"018*******9"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Address",name:"address",rules:[{required:!0,message:"please Input Address"}],children:e.jsx(c,{placeholder:"Dhaka, Bangladesh"})}),e.jsx(s.Item,{label:"Upload CV or Resume",valuePropName:"fileList",rules:[{required:!0,message:"upload your cv or resume"}],children:e.jsx(V,{accept:".pdf",listType:"picture-card",beforeUpload:()=>!1,name:"files[]",fileList:p,maxCount:1,onChange:n,children:e.jsxs("div",{children:[e.jsx(U,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Cover Letter",name:"coverLater",children:e.jsx(c.TextArea,{rows:4})}),e.jsx(s.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:6,span:12},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",block:!0,loading:g,children:"Add Job Application"})})]})})},Y=R,z=()=>{const r=I(),{Option:b}=f,[g,x]=m.useState(!1),[o]=s.useForm();J();const{list:p,loading:u}=h(t=>t.job),{edit:i}=h(t=>t.jobApplication),j=async t=>{x(!0);try{const n=new FormData;n.append("jobId",t.jobId),n.append("name",t.name),n.append("address",t.address),n.append("phone",t.phone),n.append("email",t.email),n.append("coverLater",t.coverLater),n.append("_method","PUT"),(await r(B({id:i.id,values:n}))).payload.message==="success"&&(o.resetFields(),y({page:1,count:10,status:"true"})),x(!1)}catch{}};return m.useEffect(()=>{r(A())},[r]),m.useEffect(()=>{o.setFieldValue("jobId",i.jobId),o.setFieldValue("name",i.name),o.setFieldValue("email",i.email),o.setFieldValue("phone",i.phone),o.setFieldValue("address",i.address),o.setFieldValue("coverLater",i.coverLater)},[o,i]),e.jsx(s,{style:{marginBottom:"40px"},form:o,eventKey:"jobApplication-form",name:"basic",className:"mx-4",layout:"vertical",onFinish:j,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Job",name:"jobId",rules:[{required:!0,message:"please Select Job"}],children:e.jsx(f,{loading:u,size:"middle",mode:"single",allowClear:!0,style:{width:"100%"},placeholder:"Please select Job",children:p&&p.map(t=>e.jsx(b,{value:t.id,children:t.jobTitle},t.id))})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Candidate Name",name:"name",rules:[{required:!0,message:"please Input Candidate Name"}],children:e.jsx(c,{placeholder:"Mr. XYZ"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Email",name:"email",rules:[{required:!0,type:"email",message:"please Input Email"}],children:e.jsx(c,{placeholder:"example@gmail.com"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Phone",name:"phone",rules:[{required:!0,message:"please Input Phone"}],children:e.jsx(c,{placeholder:"018*******9"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Address",name:"address",rules:[{required:!0,message:"please Input Address"}],children:e.jsx(c,{placeholder:"Dhaka, Bangladesh"})}),e.jsx(s.Item,{style:{marginBottom:"10px"},label:"Cover Letter",name:"coverLater",children:e.jsx(c.TextArea,{rows:4})}),e.jsx(s.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:6,span:12},children:e.jsx(E,{type:"primary",size:"large",htmlType:"submit",block:!0,loading:g,children:"Update Job Application"})})]})})},W=z;function _(){const r=I(),{list:b,loading:g,total:x}=h(a=>a.jobApplication),{jobApplicationStatus:o}=h(a=>a.jobApplication),{list:p}=h(a=>a.job),[u,i]=m.useState({page:1,count:10,status:"true"}),[j,t]=m.useState(!1),n=()=>{t(!0)},l=()=>{t(!1)},d=[{key:"id",title:"ID",dataIndex:"id"},{key:"job",title:"Job Title",dataIndex:"job",render:a=>a==null?void 0:a.jobTitle},{key:"name",title:"Candidate",dataIndex:"name"},{key:"createdAt",title:"Application Date",dataIndex:"createdAt",render:a=>N(a).format("DD/MM/YYYY")},{key:"applicationStatus",title:"Status",dataIndex:"jobApplicationStatus",render:a=>e.jsx("span",{className:`${a.applicationStatus==="APPLIED"?"text-gray-700 bg-gray-100":a.applicationStatus==="REVIEWING"?"text-yellow-600 bg-yellow-100":a.applicationStatus==="SELECTED FOR INTERVIEW"?"text-green-600 bg-green-100":a.applicationStatus==="INTERVIEWING"?"text-yellow-600 bg-yellow-100":a.applicationStatus==="INTERVIEWED"?"text-orange-700 bg-orange-100":a.applicationStatus==="HIRED"?"text-green-700 bg-green-100":"text-red-600 bg-red-100"} font-bold`,children:a.applicationStatus})},{id:4,title:"",key:"action",render:a=>[{label:e.jsx(O,{title:"View",path:`/admin/hrm/job-application/${a.id}`}),key:"view"},{label:e.jsx(w,{permission:"update-jobApplication",children:e.jsxs("div",{onClick:()=>{r(T(a)),n()},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(M,{className:"gray-600 rounded-md"}),"Edit"]})}),key:"edit"},{label:e.jsx(P,{values:{id:a.id,status:a.status},title:a.status==="true"?"Hide":"Show",permission:"delete-jobApplication",deleteThunk:F,loadThunk:y,query:u,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],C=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"applicationStatusId",label:"Application Status",type:"select",options:o==null?void 0:o.map(a=>({label:a==null?void 0:a.applicationStatus,value:a==null?void 0:a.id})),className:"min-w-[160px] max-w-[200px]",popupClassName:"w-[100px]"},{key:"jobId",label:"Jobs",type:"select",options:p==null?void 0:p.map(a=>({label:a==null?void 0:a.jobTitle,value:a==null?void 0:a.id})),className:"min-w-[120px] max-w-[200px]",popupClassName:"w-[100px]"}];return m.useEffect(()=>{r(y(u))},[r,u]),m.useEffect(()=>{r(v()),r(A())},[r]),e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Job Application",extra:e.jsx(D,{permission:"create-jobApplication",title:"Create Job Application",width:45,children:e.jsx(Y,{})}),children:e.jsx(w,{permission:"readAll-jobApplication",children:e.jsx(S,{total:x,columns:d,list:b,loading:g,filters:C,setPageConfig:i,title:"Job Application List",isSearch:!0})})}),e.jsx(q,{title:"Update Job Application",open:j,onCancel:l,footer:!1,children:e.jsx(W,{handleCancel:l})})]})}export{_ as default};
