import{cT as y,r as n,cL as b,c_ as C,cO as r,cN as t,cM as T,cQ as w}from"./vendor-3a94a37a.js";import{ew as N,ex as v,C as f,L as S}from"./index-ed7845ca.js";import{L as j}from"./List-9eb27318.js";import{C as F}from"./CreateDrawer-a7af16b9.js";import{F as o,D,I as A,t as L,B}from"./vendor-large-f75deccb.js";const E=({data:a})=>{const{id:i}=y(),[e,u]=n.useState(!1),l=b(),[c]=o.useForm(),[s,m]=n.useState(null),[p,Y]=n.useState({}),h=localStorage.getItem("id");C(),n.useEffect(()=>{Y({...a,userId:h,status:s,acceptLeaveFrom:r(a==null?void 0:a.leaveFrom),acceptLeaveTo:r(a==null?void 0:a.leaveTo)})},[a,h,s]);const g=async d=>{u(!0);try{const x={...d};(await l(N({id:i,values:x}))).payload.message==="success"&&l(v(i)),u(!1)}catch(x){console.log(x)}};return t.jsx(t.Fragment,{children:t.jsx(o,{rootClassName:"list-inside list-none border-2 border-inherit rounded p-5",form:c,rootStyle:{marginBottom:"40px"},name:"basic",initialValues:p,layout:"vertical",onFinish:g,autoComplete:"off",children:t.jsxs("div",{children:[t.jsx(o.Item,{rootStyle:{marginBottom:"10px"},label:"Accept From",name:"acceptLeaveFrom",rules:[{required:!0,message:"Please input Date !"}],children:t.jsx(D,{format:"DD-MM-YYYY"})}),t.jsx(o.Item,{rootStyle:{marginBottom:"10px"},label:"Accept To",name:"acceptLeaveTo",rules:[{required:!0,message:"Please input Date!"}],children:t.jsx(D,{format:"DD-MM-YYYY"})}),t.jsx(o.Item,{rootStyle:{marginBottom:"10px"},label:"Comment",name:"reviewComment",children:t.jsx(A,{name:"reviewComment"})}),s===null&&t.jsx("p",{rootClassName:"text-red-500 text-center mb-3",children:"Please select status"}),t.jsx(o.Item,{rootStyle:{marginBottom:"10px"},label:"Select Status",name:"status",rules:[{required:!0,message:"Please input Status!"}],children:t.jsxs(L.Group,{buttonStyle:"solid",onChange:d=>m(d.target.value),children:[t.jsx(L.Button,{value:"ACCEPTED",children:"ACCEPTED"}),t.jsx(L.Button,{value:"REJECTED",children:"REJECTED"})]})}),t.jsx(o.Item,{rootStyle:{marginBottom:"10px"},wrapperCol:{offset:7,span:12},children:t.jsx(B,{type:"primary",size:"middle",htmlType:"submit",block:!0,disabled:s===null,loading:e,children:"Review Leave"})})]})})})},M=E;function J(){var l,c,s,m;const{id:a}=y(),i=b(),{leave:e,loading:u}=T(p=>p.leave);return n.useEffect(()=>{i(v(a))},[i,a]),t.jsx(t.Fragment,{children:e?t.jsxs("div",{className:"flex gap-2 md:gap-4",children:[t.jsx(f,{className:"w-2/3",title:t.jsx("h1",{className:"font-semibold",children:"Leave Application"}),extra:t.jsx(F,{permission:"create-leaveApplication",title:"Review Leave",width:35,icon:!1,children:t.jsx(M,{data:e})}),children:t.jsx(j,{labelClassName:"w-[40%]",list:[{label:"Application By",value:t.jsx(w,{className:"hover:text-primary duration-200",to:`/admin/staffs/${(l=e==null?void 0:e.user)==null?void 0:l.id}`,children:(c=e==null?void 0:e.user)==null?void 0:c.username})},{label:"Leave Type",value:e==null?void 0:e.leaveType},{label:"Leave Duration",value:`${e==null?void 0:e.leaveDuration} ${(e==null?void 0:e.leaveDuration)>1?"days":"day"}`},{label:"Leave From",value:r(e==null?void 0:e.leaveFrom).format("DD/MM/YYYY")},{label:"Leave To",value:r(e==null?void 0:e.leaveTo).format("DD/MM/YYYY")},{label:"Reason",value:e==null?void 0:e.reason}]})}),t.jsx(f,{className:"w-1/3",title:t.jsxs("h1",{className:"font-semibold",children:["Application Status: ",e==null?void 0:e.status]}),children:t.jsx(j,{labelClassName:"w-[40%]",list:[{label:"Accepted By",value:`${e!=null&&e.acceptLeaveBy?`${(s=e==null?void 0:e.acceptLeaveBy)==null?void 0:s.firstName} ${(m=e==null?void 0:e.acceptLeaveBy)==null?void 0:m.lastName}`:"N/A"}`},{label:"Leave Type",value:e==null?void 0:e.leaveType},{label:"Leave Duration",value:`${(e==null?void 0:e.acceptedLeaveDuration)||0} ${(e==null?void 0:e.acceptedLeaveDuration)>1?"days":"day"}`},{label:"Leave From",value:`${e!=null&&e.acceptLeaveFrom?r(e==null?void 0:e.acceptLeaveFrom).format("DD/MM/YYYY"):"N/A"}`},{label:"Leave To",value:`${e!=null&&e.acceptLeaveTo?r(e==null?void 0:e.acceptLeaveTo).format("DD/MM/YYYY"):"N/A"}`},{label:"Review Comment",value:e!=null&&e.reviewComment?e==null?void 0:e.reviewComment:"N/A"}]})})]}):t.jsx(S,{})})}export{J as default};
