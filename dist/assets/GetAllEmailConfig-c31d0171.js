import{cL as p,r as o,cN as e,cM as I,cO as f}from"./vendor-3a94a37a.js";import{u as b,l as g}from"./emailConfigSlice-145edc06.js";import{C as E}from"./CreateDrawer-a7af16b9.js";import{C as N,U,T as H}from"./index-ed7845ca.js";import{F as t,I as l,h as Y,x as w}from"./vendor-large-f75deccb.js";function F({data:s}){var n,d,u,c,x;const i=p(),[r]=t.useForm(),[m,a]=o.useState(!1),[C,B]=o.useState({emailConfigName:(n=s[0])==null?void 0:n.emailConfigName,emailHost:(d=s[0])==null?void 0:d.emailHost,emailPort:(u=s[0])==null?void 0:u.emailPort,emailUser:(c=s[0])==null?void 0:c.emailUser,emailPass:(x=s[0])==null?void 0:x.emailPass}),h=async y=>{a(!0);try{(await i(b({id:s[0].id,values:y}))).payload.message=="success"&&(i(g()),a(!1))}catch{a(!1)}},j=()=>{a(!1)};return e.jsx("div",{className:"sm:mx-10",children:e.jsxs(t,{size:"small",form:r,name:"basic",layout:"vertical",initialValues:C,onFinish:h,onFinishFailed:j,autoComplete:"off",children:[e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Config Name",name:"emailConfigName",rules:[{required:!0,message:"Please input Config Name!"}],children:e.jsx(l,{type:"text"})}),e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Host",name:"emailHost",rules:[{required:!0,message:"Please input Host!"}],children:e.jsx(l,{})}),e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Port",name:"emailPort",rules:[{required:!0,message:"Please input Port!"}],children:e.jsx(Y,{})}),e.jsx(t.Item,{style:{marginBottom:"10px"},label:"User Email",name:"emailUser",rules:[{required:!0,message:"Please input User Email!"}],children:e.jsx(l,{type:"email"})}),e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Password",name:"emailPass",rules:[{required:!0,message:"Please input Password!"}],children:e.jsx(l.Password,{})}),e.jsx(t.Item,{className:"flex justify-center mt-5",children:e.jsx(w.Button,{loading:m,type:"primary",htmlType:"submit",shape:"round",size:"large",children:"Update Config Email"})})]})})}function A(){const s=p(),{list:i,loading:r}=I(a=>a.emailConfig);o.useEffect(()=>{s(g())},[s]);const m=[{id:1,title:"Name",dataIndex:"emailConfigName",key:"emailConfigName"},{id:2,title:"Host",dataIndex:"emailHost",key:"emailHost"},{id:3,title:"Port",dataIndex:"emailPort",key:"emailPort"},{id:4,title:"Email User",dataIndex:"emailUser",key:"emailUser"},{id:5,title:"Create date",dataIndex:"createdAt",key:"createdAt",render:a=>f(a).format("YYYY-MM-DD"),renderCsv:a=>f(a).format("YYYY-MM-DD")}];return e.jsx(N,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Email Configs",extra:e.jsx(e.Fragment,{children:e.jsx(E,{permission:"update-emailConfig",title:"Update Email Config",width:35,children:e.jsx(F,{data:i})})}),children:e.jsx(U,{permission:"readAll-emailConfig",children:e.jsx(H,{columns:m,list:i,total:null,loading:r,title:"Email Config List",isSearch:!1})})})}export{A as default};
