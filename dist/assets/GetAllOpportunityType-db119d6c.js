import{cL as m,r as u,cN as t,cM as x,cS as d}from"./vendor-3a94a37a.js";import{dh as T,di as h,B as n,C as f,U as j,T as O,dj as C,dk as E,dl as A}from"./index-ed7845ca.js";import{C as N}from"./CommonDelete-4339174a.js";import{C as b}from"./CreateDrawer-a7af16b9.js";import{U as k}from"./UpdateDrawer-f5580074.js";import{F as i,I as F,B as g,k as w}from"./vendor-large-f75deccb.js";function c({edit:e}){const[r]=i.useForm(),p=m(),l=async a=>{(await p(e!=null&&e.id?T({id:e==null?void 0:e.id,values:a}):h(a))).payload.message==="success"&&(p(n()),e!=null&&e.id||r.resetFields())};u.useEffect(()=>{e!=null&&e.id&&r.setFieldsValue(e.values)},[e,r]);const o=a=>{console.log("Failed:",a)};return t.jsx("div",{className:"flex justify-center mt-5",children:t.jsxs(i,{className:"w-4/5",onFinish:l,onFinishFailed:o,colon:!1,layout:"vertical",form:r,children:[t.jsx(i.Item,{style:{width:"350px"},label:"Opportunity Type Name",name:"opportunityTypeName",tooltip:"This is a required field",rules:[{required:!0,message:"This is a required field."}],children:t.jsx(F,{placeholder:"Opportunity type name"})}),t.jsx(i.Item,{label:"",children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(g,{size:"large",htmlType:"submit",type:"primary",children:e!=null&&e.id?"Update":"Create"})})})]})})}function S(){const e=m(),{list:r,loading:p,total:l,edit:o}=x(s=>s.opportunityType),a=[{title:"NAME",dataIndex:"opportunityTypeName"},{title:"CREATE DATE",dataIndex:"createdAt",render:s=>d(s).format("ll")},{title:"UPDATE DATE",dataIndex:"updatedAt",render:s=>d(s).format("ll")},{id:3,title:"",key:"action",render:({id:s,opportunityTypeName:y})=>[{label:t.jsxs("div",{onClick:()=>e(E({id:s,values:{opportunityTypeName:y}})),className:"flex items-center gap-2 cursor-pointer",children:[t.jsx(w,{className:" rounded-md"}),"Edit"]}),key:"edit"},{label:t.jsx(N,{id:s,title:"delete",permission:"delete-opportunityType",deleteThunk:A,loadThunk:n}),key:"delete"}],csvOff:!0}];return u.useEffect(()=>{e(n())},[e]),t.jsxs(f,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Opportunity Type",extra:t.jsx(b,{permission:"create-opportunityType",title:"Create Opportunity Type",width:35,children:t.jsx(c,{})}),children:[t.jsx(j,{permission:"readAll-opportunityType",children:t.jsx(O,{list:r,columns:a,loading:p,total:l,title:"Opportunity Type List",isSearch:!1})}),t.jsx(k,{permission:"update-opportunityType",title:"Update Opportunity Type",width:35,open:o,setClose:C,children:t.jsx(c,{edit:o})})]})}export{S as default};
