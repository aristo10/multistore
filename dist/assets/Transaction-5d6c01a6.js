import{cL as k,cM as c,r as l,cS as r,cN as e,cO as p,cQ as M}from"./vendor-3a94a37a.js";import{U as A}from"./useStoreFilter-d90bb3a9.js";import{aj as g,aA as v,cK as w,C as I,U as T,T as N}from"./index-ed7845ca.js";import{C as b}from"./CreateDrawer-a7af16b9.js";import S from"./AddTransaction-603c2655.js";import{D as P}from"./vendor-large-f75deccb.js";import"./AddAccount-8cfc0f4b.js";import"./BigDrawer-240149a9.js";const E=()=>{var i;const t=k(),{list:m,total:o,loading:x}=c(a=>a.transactions),{list:s}=c(a=>a.accounts),{RangePicker:u}=P,{storeFilter:f}=A(),[n,d]=l.useState({page:1,count:10,status:"true",startDate:r().startOf("month").format("YYYY-MM-DD"),endDate:r().endOf("month").format("YYYY-MM-DD")}),D=[{id:1,title:"ID",dataIndex:"id",key:"id",render:a=>e.jsx(M,{to:`/admin/transaction/${a}`,children:a}),renderCsv:a=>a},{title:"Store",dataIndex:"store",key:"store",render:a=>a==null?void 0:a.name,renderCsv:a=>a==null?void 0:a.name},{id:2,title:"Date",dataIndex:"date",key:"date",render:a=>r(a).format("ll"),renderCsv:a=>r(a).format("ll")},{id:3,title:"Debit Account",dataIndex:"debit",key:"debit",render:a=>a==null?void 0:a.name,renderCsv:a=>a==null?void 0:a.name},{id:4,title:"Credit Account",dataIndex:"credit",key:"credit",render:a=>a==null?void 0:a.name,renderCsv:a=>a==null?void 0:a.name},{id:5,title:"Amount",dataIndex:"amount",key:"amount",responsive:["md"]},{title:"Type",dataIndex:"type",key:"type"},{id:6,title:"Particulars",dataIndex:"particulars",key:"particulars"}],C=[f,{key:"debitId",label:"Debit A/C",type:"select",options:s==null?void 0:s.map(a=>({label:a==null?void 0:a.name,value:a==null?void 0:a.id})),className:"min-w-[100px] max-w-[150px]",popupClassName:"w-[200px]"},{key:"creditId",label:"Credit A/C",type:"select",options:s==null?void 0:s.map(a=>({label:a==null?void 0:a.name,value:a==null?void 0:a.id})),className:"min-w-[100px] max-w-[150px]",popupClassName:"w-[200px]"}];l.useEffect(()=>{t(g())},[t]),l.useEffect(()=>(t(v(n)),()=>{t(w())}),[t,n]);const Y=a=>{const y=a[0].format("YYYY-MM-DD"),h=a[1].format("YYYY-MM-DD");d(j=>({...j,startDate:y,endDate:h}))};return e.jsxs(I,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Transactions",extra:e.jsxs("div",{className:"flex gap-3 md:justify-end justify-between  items-center",children:[e.jsx(u,{className:"range-picker w-3/6",onCalendarChange:Y,defaultValue:[p(n.startDate,"YYYY-MM-DD"),p(n.endDate,"YYYY-MM-DD")]})," ",e.jsx(b,{width:35,permission:"create-transaction",title:"Create Transaction",children:e.jsx(S,{})})]}),children:[" ",e.jsx(T,{permission:"readAll-transaction",children:e.jsx(N,{list:m,total:(i=o==null?void 0:o._count)==null?void 0:i.id,columns:D,loading:x,setPageConfig:d,title:"Transaction List",filters:C,isSearch:!0})})]})},V=t=>e.jsx("div",{children:e.jsx(E,{})});export{V as default};
