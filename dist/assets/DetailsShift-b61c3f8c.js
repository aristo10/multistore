import{cL as h,r as x,cM as p,cT as j,cN as e,cO as o,cQ as u}from"./vendor-3a94a37a.js";import{eJ as S,eK as y,eL as N,C as I,am as b,L as F}from"./index-ed7845ca.js";import{V as w}from"./ViewBtn-ffc9b5cb.js";import{C as k}from"./CreateDrawer-a7af16b9.js";import{F as l,I as L,y as f,B as v}from"./vendor-large-f75deccb.js";function P(){const m=h(),[r]=l.useForm(),[a,i]=x.useState(!1),{shift:t,loading:c}=p(d=>d.shift),{id:s}=j(),n=async d=>{i(!0);try{(await m(S({id:s,values:d}))).payload.message==="success"&&(r.resetFields(),m(y(s))),i(!1)}catch{i(!1)}},T=d=>{i(!1)};return e.jsx("div",{className:" h-full",children:e.jsxs(l,{form:r,name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:n,initialValues:{...t,startTime:o(t==null?void 0:t.startTime,"HH:mm:ss"),endTime:o(t==null?void 0:t.endTime,"HH:mm:ss")},onFinishFailed:T,children:[e.jsx(l.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter Shift Name!"}],children:e.jsx(L,{})}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(l.Item,{className:"w-full",label:"Start Time",name:"startTime",rules:[{required:!0,message:"Please select Start Time!"}],children:e.jsx(f,{})}),e.jsx(l.Item,{className:"w-full",label:"End Time",name:"endTime",rules:[{required:!0,message:"Please select end Time!"}],children:e.jsx(f,{})})]}),e.jsx(l.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-6",children:e.jsx(v,{type:"primary",htmlType:"submit",shape:"round",loading:a,children:"Update Shift"})})]})})}function q(){const{id:m}=j(),r=h(),{shift:a,loading:i}=p(s=>s.shift),t=[{id:1,title:"ID",dataIndex:"id",key:"id",render:s=>e.jsx(u,{to:`/admin/hrm/staff/${s}`,children:s})},{id:2,title:"Name",dataIndex:"username",key:"username",render:(s,{id:n})=>e.jsx(u,{to:`/admin/hrm/staff/${n}`,children:s})},{id:6,title:"action",key:"Action",render:({id:s})=>e.jsx(w,{path:`/admin/hrm/staff/${s}`})}];x.useEffect(()=>(r(y(m)),()=>{r(N())}),[r,m]);const c=s=>s.map(n=>({...n,key:n.id}));return e.jsx("div",{children:a?e.jsx(I,{title:e.jsx("span",{className:"mr-left",children:a.name}),extra:e.jsx(e.Fragment,{children:e.jsx(k,{permission:"update-shift",title:"Update Shift",update:!0,color:"bg-gray-700",width:30,children:e.jsx(P,{})})}),children:e.jsx("div",{className:"mt-4",children:e.jsx(b,{scroll:{x:!0},loading:i,columns:t,data:a!=null&&a.user?c(a==null?void 0:a.user):[]})})}):e.jsx(F,{})})}export{q as default};
