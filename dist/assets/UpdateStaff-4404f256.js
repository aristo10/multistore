import{cT as A,cL as z,r as y,cM as r,cO as b,cN as l,cV as P}from"./vendor-3a94a37a.js";import{by as E,bz as F,bA as u,bB as k,bC as L,ak as T,L as V,bD as G}from"./index-ed7845ca.js";import{F as a,I as s,D as w,b as i,B as O}from"./vendor-large-f75deccb.js";const Z=()=>{let{id:o}=A();const m=z(),[B,d]=y.useState(),{list:x}=r(t=>t.shift),{list:h,loading:S}=r(t=>t.store),{user:e,loading:N}=r(t=>t.users),{Option:n}=i,{list:p}=r(t=>t.role),{list:g}=r(t=>t.department),{list:f}=r(t=>t.employmentStatus),[j]=a.useForm(),I=localStorage.getItem("id");y.useEffect(()=>{var t;j.setFieldsValue({firstName:e!=null&&e.firstName?e.firstName:"",lastName:e!=null&&e.lastName?e.lastName:"",username:e!=null&&e.username?e.username:"",email:e!=null&&e.email?e.email:"",phone:e!=null&&e.phone?e.phone:"",street:e!=null&&e.street?e.street:"",city:e!=null&&e.city?e.city:"",state:e!=null&&e.state?e.state:"",zipCode:e!=null&&e.zipCode?e.zipCode:"",country:e!=null&&e.country?e.country:"",joinDate:e!=null&&e.joinDate?b(e==null?void 0:e.joinDate):"",leaveDate:e!=null&&e.leaveDate?b(e.leaveDate):"",employeeId:e!=null&&e.employeeId?e.employeeId:"",bloodGroup:e!=null&&e.bloodGroup?e.bloodGroup:"",image:e!=null&&e.image?e.image:"",roleId:e!=null&&e.roleId?e.roleId:"",departmentId:e!=null&&e.departmentId?e.departmentId:"",shiftId:e!=null&&e.shiftId?e.shiftId:"",commissionType:e==null?void 0:e.commissionType,commissionValue:e==null?void 0:e.commissionValue,employmentStatusId:e!=null&&e.employmentStatusId?e.employmentStatusId:"",storeId:(t=e==null?void 0:e.usersStore)==null?void 0:t.map(c=>c.storeId)})},[j,e]);const v=async t=>{d(!0);try{let c;if(I===o&&t.password||I===o&&(e==null?void 0:e.username)!==t.username){if(!window.confirm("Before changing your password or username, make sure you are certain about the change. After making the change, you will need to log in again.")){d(!1);return}c=!0}(await m(G({id:o,values:t}))).payload.message==="success"?(d(!1),m(u(o)),c&&(window.location.replace("/"),localStorage.clear())):d(!1)}catch{P.error("Something went wrong"),d(!1)}},D=t=>{console.log("Failed:",t)},C=["A+","A-","B+","B-","O+","O-","AB+","AB-"];return y.useEffect(()=>{m(E()),m(F()),m(u(o)),m(k()),m(L()),m(T())},[m,o]),o=parseInt(o),l.jsx(l.Fragment,{children:N?l.jsx(V,{}):l.jsxs(a,{size:"small",form:j,name:"basic",layout:"vertical",className:"max-w-[800px] mx-auto",onFinish:v,onFinishFailed:D,autoComplete:"off",children:[l.jsxs("div",{className:"flex justify-between gap-10",children:[l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-center text-xl mt-3 mb-3 txt-color",children:"User Information"}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"First Name",name:"firstName",children:l.jsx(s,{placeholder:"John"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Last Name",name:"lastName",children:l.jsx(s,{placeholder:"Doe"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Username",name:"username",children:l.jsx(s,{placeholder:"john_doe"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Password",name:"password",children:l.jsx(s,{placeholder:"Strong Password"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Phone",name:"phone",children:l.jsx(s,{placeholder:"1234584515"})})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"text-center text-xl mt-3 mb-3 txt-color",children:"Address Information"}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Street",name:"street",children:l.jsx(s,{placeholder:"123 Main Street",style:{width:"100%"}})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"City",name:"city",children:l.jsx(s,{placeholder:"Los Angeles"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"State",name:"state",children:l.jsx(s,{placeholder:"CA"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Zip Code",name:"zipCode",children:l.jsx(s,{placeholder:"90211"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Country",name:"country",children:l.jsx(s,{placeholder:"USA"})})]})]}),l.jsx("div",{children:l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Email",name:"email",children:l.jsx(s,{placeholder:"johndoe2@example.com"})})}),l.jsxs("div",{className:"mt-10",children:[l.jsxs("h2",{className:"text-center text-xl mt-3 mb-3 txt-color",children:[" ","Employee Information"," "]}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Employee ID",name:"employeeId",children:l.jsx(s,{placeholder:"OE-012"})}),l.jsxs("div",{className:"flex justify-between items-center gap-10",children:[l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Joining Date",name:"joinDate",valuePropName:"date",className:"w-full",children:l.jsx(w,{className:"date-picker hr-staffs-date-picker"})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Leave Date",name:"leaveDate",valuePropName:"leaveDate",className:"w-full",children:l.jsx(w,{className:"date-picker hr-staffs-date-picker"})})]}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Blood Group",name:"bloodGroup",children:l.jsx(i,{placeholder:"Select Blood Group",allowClear:!0,mode:"single",size:"middle",style:{width:"100%"},children:C.map(t=>l.jsx(n,{value:t,children:t},t))})}),l.jsx(a.Item,{name:"departmentId",style:{marginBottom:"10px"},label:"Department",children:l.jsx(i,{placeholder:"Select Department",allowClear:!0,size:"middle",children:g&&g.map(t=>l.jsx(n,{value:t.id,children:t.name},t.id))})}),l.jsx(a.Item,{name:"employmentStatusId",style:{marginBottom:"10px"},label:"Employment Status",children:l.jsx(i,{placeholder:"Select Department",allowClear:!0,size:"middle",children:f&&f.map(t=>l.jsx(n,{value:t.id,children:t.name},t.id))})}),o!==1&&l.jsx(a.Item,{label:"Role",name:"roleId",style:{marginBottom:"10px"},children:l.jsx(i,{loading:!p,size:"middle",mode:"single",allowClear:!0,style:{width:"100%"},placeholder:"Please select Role",children:p&&p.map(t=>l.jsx(n,{value:t.id,children:t.name},t.id))})}),l.jsx(a.Item,{label:"Shift",name:"shiftId",style:{marginBottom:"10px"},children:l.jsx(i,{loading:!x,size:"middle",mode:"single",allowClear:!0,style:{width:"100%"},placeholder:"Please select shift",children:x&&x.map(t=>l.jsx(n,{value:t.id,children:t.name},t.id))})}),o!==1&&l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Select Store",name:"storeId",children:l.jsx(i,{placeholder:"Select Store",allowClear:!0,mode:"multiple",size:"middle",style:{width:"100%"},loading:S,children:h==null?void 0:h.map(t=>l.jsx(n,{value:t.id,children:t==null?void 0:t.name},t.id))})}),l.jsxs("div",{className:"flex justify-between items-center gap-10",children:[l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Commission Type",name:"commissionType",className:"w-full",children:l.jsxs(i,{loading:!p,size:"middle",mode:"single",allowClear:!0,style:{width:"100%"},placeholder:"Please select",children:[l.jsx(n,{value:"percentage",children:"Percentage"},"percentage"),l.jsx(n,{value:"flat",children:"Flat"},"flat")]})}),l.jsx(a.Item,{style:{marginBottom:"10px"},label:"Commission Value",name:"commissionValue",className:"w-full",children:l.jsx(s,{})})]})]}),l.jsx(a.Item,{style:{marginBottom:"10px",marginTop:"10px"},wrapperCol:{offset:5,span:15},children:l.jsx(O,{className:"mt-5",block:!0,type:"primary",shape:"round",htmlType:"submit",loading:B,children:"Update Employee"})})]})})};export{Z as default};
