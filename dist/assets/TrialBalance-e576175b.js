import{cM as u,cN as e,cL as y,r as j}from"./vendor-3a94a37a.js";import{aX as N,bL as w,L as C}from"./index-ed7845ca.js";import{a as v}from"./accountInvoiceGenerator-f2ac8776.js";import{u as B}from"./useCurrency-4b14dd3d.js";import{C as S,b as f}from"./vendor-large-f75deccb.js";function A({data:a,title:s,store:o}){const{currencyName:l}=B()||{},m=u(r=>{var g;return(g=r==null?void 0:r.setting)==null?void 0:g.data})||null,n=[],x=[],i=[{header:"Account",dataKey:"subAccount"},{header:"Debit",dataKey:"debitBalance"},{header:"Credit",dataKey:"creditBalance"}],h=a==null?void 0:a.debits.map(r=>({subAccount:r.subAccount,debitBalance:r.balance})),p=a==null?void 0:a.credits.map(r=>({subAccount:r.subAccount,creditBalance:r.balance})),d=[...h,...p];d.push({subAccount:"Total",debitBalance:a.totalDebit.toFixed(3),creditBalance:a.totalCredit.toFixed(3)});const b=[{value:`Date: ${new Date().toLocaleDateString()}`},{value:o?`Store: ${o}`:""},{value:`Currency: ${l}`}],t=[],c={jsPDF:{},tableFontSize:10,infoTopFontSize:10,bottomRightFontSize:10,bottomLeftFontSize:8,footerFontSize:10};return e.jsx("div",{className:"flex gap-2",children:e.jsx(N,{color:"gray",onClick:()=>v("print",{title:s,TopRightInfo:t,companyInfo:m,customerInfo:b,bottomLeftContent:n,bottomRightContent:x,tableBody:d,tableHead:i,settings:c,leftBottomSecondColumnX:45}),children:"Print"})})}const k=()=>{var d,b;const a=y(),{trailBalance:s,loading:o}=u(t=>t==null?void 0:t.accounts)||[],[l,m]=j.useState({query:"tb"}),{list:n,loading:x,defaultStore:i}=u(t=>t.store),h=(t,c)=>{m({...l,[c]:t})};let p=null;return n&&l.storeId&&(p=n.filter(c=>l.storeId.includes(c.id)).map(c=>c.name).join(", ")),j.useEffect(()=>{a(w(l))},[a,l]),e.jsx(e.Fragment,{children:e.jsx(S,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h5",{className:"text-xl flex gap-2 mb-3",children:[e.jsx("span",{className:"ml-2",children:"Trail Balance"}),e.jsx("div",{className:"filterTag min-w-[120px] max-w-[150px]",children:e.jsx(f,{placeholder:"Select Store",className:"",loading:x,defaultValue:i==null?void 0:i.id,mode:"multiple",showSearch:!1,style:{width:"100%"},maxTagPlaceholder:t=>e.jsxs("div",{className:"",children:[t.length," Selected"]}),maxTagCount:0,onChange:t=>h(t,"storeId"),children:n.map(t=>e.jsx(f.Option,{value:t.id,children:t.name},t.id))})})]}),s&&e.jsx(A,{data:s,title:"Trail Balance",store:p})]}),!o&&e.jsx("div",{className:"border-gray-200 w-full rounded bg-white overflow-x-auto",children:e.jsxs("table",{className:"table report-section-table w-full",children:[e.jsx("thead",{className:"font-Popins text-black/70 bg-tableHeaderBg border-gray-200",children:e.jsxs("tr",{className:"border-b border-gray",children:[e.jsx("th",{scope:"col",className:"py-[14px] pl-3 text-left whitespace-nowrap tracking-wide",children:"Account"}),e.jsx("th",{scope:"col",className:"py-[14px] pl-3 text-left whitespace-nowrap tracking-wide",children:"Debit"}),e.jsx("th",{scope:"col",className:"py-[14px] pl-3 text-left whitespace-nowrap tracking-wide",children:"Credit"})]})}),e.jsxs("tbody",{className:"bg-tableBg",children:[s&&((d=s==null?void 0:s.debits)==null?void 0:d.map((t,c)=>e.jsxs("tr",{className:"hover:bg-slate-900/10 border-b",children:[e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:t.subAccount}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:t.balance?Number(t.balance).toFixed(3):""}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap"})]},c))),s&&((b=s==null?void 0:s.credits)==null?void 0:b.map((t,c)=>e.jsxs("tr",{className:"hover:bg-slate-900/10 border-b",children:[e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:t.subAccount}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap"}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:t.balance?Number(t.balance).toFixed(3):""})]},c))),e.jsxs("tr",{className:"hover:bg-gray-100 hover:cursor-pointer font-semibold",children:[e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm ",children:"TOTAL"}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:s!=null&&s.totalDebit?Number(s==null?void 0:s.totalDebit).toFixed(3):"-"}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-200 text-gray-900 text-sm",children:s!=null&&s.totalCredit?Number(s==null?void 0:s.totalCredit).toFixed(3):"-"})]})]})]})}),o&&e.jsx(C,{})]})})})};export{k as default};
