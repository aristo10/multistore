import{cM as b,cL as j,cS as d,r as x,cN as o,cT as g,cQ as T}from"./vendor-3a94a37a.js";import{aZ as A,cx as P,cs as C,C as $,an as D,am as F}from"./index-ed7845ca.js";import{i as R}from"./invoiceGenerator-eaeb8720.js";import{n as k}from"./numberToWords-4c291141.js";import{u as Q}from"./useCurrency-4b14dd3d.js";import{m as w}from"./vendor-large-f75deccb.js";function z({data:e,title:c}){var y,v,h,I;const{currencyName:r}=Q()||{},i=b(s=>{var u;return(u=s==null?void 0:s.setting)==null?void 0:u.data})||null,t=j(),p=[{value:`Customer: ${(v=(y=e==null?void 0:e.saleInvoice)==null?void 0:y.customer)!=null&&v.username?(I=(h=e==null?void 0:e.saleInvoice)==null?void 0:h.customer)==null?void 0:I.username:"-"}`},{value:`Sale Invoice Id: ${e!=null&&e.saleInvoiceId?e==null?void 0:e.saleInvoiceId:"-"}`}],l=[{value:`Invoice No: ${e!=null&&e.id?e==null?void 0:e.id:"-"}`},{value:`Invoice Date: ${d(e==null?void 0:e.date).format("YYYY-MM-DD")}`},{value:`Currency: ${r}`}],a=[{label:"IN WORDS: ",value:`${k(Math.round(e.totalAmount+(e.tax?e.tax:0))).toUpperCase()} ${r}`||""},{label:"Terms And Conditions: ",value:e.termsAndConditions?e.termsAndConditions:""},{label:"Notes: ",value:e.note?e.note:""}],n=[{label:"Total:",value:`${e.totalAmount?e.totalAmount.toFixed(2):0}`},{label:"Tax Amount:",value:`${e.tax?e.tax.toFixed(2):0}`},{label:"Ground Total:",value:`${(e.totalAmount+(e.tax?e.tax:0)).toFixed(2)}`}],m=["SL","Product Description","Quantity","Sale Price","Total Price","Total Tax"],N=e.returnSaleInvoiceProduct.map((s,u)=>[u+1,s.product.name,s.productQuantity,`${s.productUnitSalePrice.toFixed(2)}`,`${s.productUnitSalePrice*s.productQuantity}`,`${s.taxAmount.toFixed(2)}`]),S={jsPDF:{},tableFontSize:10,infoTopFontSize:10,bottomRightFontSize:10,bottomLeftFontSize:8,footerFontSize:10};return x.useEffect(()=>{!i&&t(A())},[t,i]),o.jsx("div",{className:"",children:o.jsx("button",{className:"bg-primary flex justify-center items-center px-4 py-[10px] text-white rounded",onClick:()=>R("print",{title:c,TopRightInfo:l,companyInfo:i,customerInfo:p,bottomLeftContent:a,bottomRightContent:n,tableBody:N,tableHead:m,settings:S,leftBottomSecondColumnX:32}),children:"Print Invoice"})})}function G(){const e=j(),{id:c}=g(),[r,i]=x.useState([]),{returnSale:t,loading:p}=b(n=>n.saleReturn),l=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Product Name",dataIndex:"product",key:"product",render:n=>o.jsx(T,{to:`/admin/product/${n==null?void 0:n.id}`,children:n==null?void 0:n.name})},{id:3,title:"Date",dataIndex:"createdAt",key:"date",render:n=>d(n).format("ll")},{id:4,title:"Product Quantity",dataIndex:"productQuantity",key:"productQuantity"},{title:"Damage Quantity",dataIndex:"damageQuantity",key:"returnQuantity"},{id:5,title:"Sale Price",dataIndex:"productFinalAmount",key:"productUnitSalePrice"},{id:5,title:"Total Tax",dataIndex:"taxAmount",key:"taxAmount"}];x.useEffect(()=>(i(l),e(P(c)),()=>{e(C())}),[]);const f=n=>{i(n)},a=n=>n==null?void 0:n.map(m=>({...m,key:m.id}));return o.jsx(o.Fragment,{children:o.jsxs($,{className:"header-solid h-full",bordered:!1,title:o.jsxs("h5",{className:"flex items-center",children:[o.jsx(w,{}),o.jsxs("span",{className:"mr-left",children:["ID : ",c]})]}),bodyStyle:{paddingTop:"0"},extra:o.jsx("div",{className:"flex gap-2",children:t&&o.jsx(z,{title:"Sale Return Invoice",data:t})}),children:[o.jsx("div",{className:"text-[18px] font-medium flex justify-center",children:"Sale Return Product Information"}),t&&o.jsx("div",{children:o.jsxs("div",{className:"flex justify-between my-3",children:[o.jsx(D,{options:l,columns:l,columnsToShowHandler:f}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("div",{className:"bg-gray-100 px-2 py-1 rounded-sm m-1",children:["Sale Invoice Id: ",t==null?void 0:t.saleInvoiceId]}),o.jsxs("div",{className:"bg-gray-100 px-2 py-1 rounded-sm m-1",children:["Date: ",d(t==null?void 0:t.createdAt).format("ll")]})]})]})}),o.jsx("div",{className:"mb-5",children:o.jsx(F,{scroll:{x:!0},loading:!t,columns:r,data:t?a(t==null?void 0:t.returnSaleInvoiceProduct):[]})}),o.jsxs("div",{className:"font-bold text-[16px]",children:["Total Return Amount:"," ",(t==null?void 0:t.totalAmount)+((t==null?void 0:t.tax)||0)]}),o.jsxs("h6",{className:" m-0 max-w-[500px] py-2",children:[o.jsx("span",{className:"font-bold",children:"Return Note:"}),o.jsxs("span",{className:"font-medium",children:[" ",t==null?void 0:t.note]})," "]})]})})}export{G as default};
