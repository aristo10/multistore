import{cT as g,cN as e,cO as p,cS as u,cQ as f}from"./vendor-3a94a37a.js";import{C as I,U as j,T as M}from"./index-ed7845ca.js";import{C as P}from"./CommonDelete-4339174a.js";import{C as k}from"./CreateDrawer-a7af16b9.js";import{b as C,c as B,m as E}from"./milestoneApi-e59980bf.js";import{u as N}from"./projectApi-2d6ff3a1.js";import{F as t,b as x,I as d,D as h,B as S,k as F}from"./vendor-large-f75deccb.js";function w({isFixed:r,projectId:n}){const{isLoading:o,data:i}=N(),[s,{isLoading:y}]=C(),{id:l}=g(),[m]=t.useForm(),D=async a=>{const b={...a,projectId:r?parseInt(l||n):a.projectId,startDate:p(a.startDate).format(),endDate:p(a.endDate).format()},c=await s(b);c.data&&!c.error&&m.resetFields()};return e.jsx(e.Fragment,{children:e.jsx(t,{form:m,className:"m-4",name:"basic",layout:"vertical",onFinish:D,children:e.jsxs("div",{children:[r?e.jsx(e.Fragment,{children:!n&&e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Project",tooltip:"Your Project is already selected",name:"projectId",children:e.jsx(d,{defaultValue:l,disabled:!0})})}):e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Project",name:"projectId",rules:[{required:!0,message:"Select Project"}],children:e.jsx(x,{mode:"single",disabled:r,loading:o,placeholder:"Select Project",optionFilterProp:"children",children:i==null?void 0:i.map(a=>e.jsx(x.Option,{value:a.id,children:a.name},a.id))})}),e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Milestone Name",name:"name",rules:[{required:!0,message:"Enter Milestone Name"}],children:e.jsx(d,{placeholder:"Enter Milestone Name"})}),e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Start Date",name:"startDate",rules:[{required:!0,message:"Please input Project Start Date!"}],children:e.jsx(h,{})}),e.jsx(t.Item,{style:{marginBottom:"20px"},label:"End Date",name:"endDate",rules:[{required:!0,message:"Please input Project End Date!"}],children:e.jsx(h,{})}),e.jsx(t.Item,{style:{marginBottom:"10px"},label:"Milestone Description",name:"description",rules:[{required:!0,message:"Enter Milestone Description"}],children:e.jsx(d,{placeholder:"Enter Milestone Description"})}),e.jsx(t.Item,{style:{marginBottom:"10px"},wrapperCol:{offset:6,span:12},children:e.jsx(S,{type:"primary",size:"large",htmlType:"submit",block:!0,loading:y,children:"Add Milestone"})})]})})})}function U(){const{id:r}=g(),{isLoading:n,data:o}=B(r),i=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Name",dataIndex:"name",key:"name"},{id:4,title:"Start Date",key:"startDate",render:({startDate:s})=>u(s).format("ll")},{id:5,title:"End Date",key:"endDate",render:({endDate:s})=>u(s).format("ll")},{id:3,title:"",key:"action",render:({id:s})=>[{label:e.jsx(j,{permission:"update-product",children:e.jsxs(f,{to:`/admin/hrm/project/milestone/update/${s}`,className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(F,{className:" rounded-md"}),"Edit"]})}),key:"Update"},{label:e.jsx(P,{className:"bg-white text-black",id:s,permission:"delete-milestone",deleteThunk:E.endpoints.deleteMilestone.initiate,title:"Delete"}),key:"delete"}]}];return e.jsx(I,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Milestone in Project",extra:e.jsx(k,{permission:"create-milestone",title:"Create Milestone",width:50,children:e.jsx(w,{projectId:r,isFixed:!0})}),children:e.jsx(j,{permission:"readAll-milestone",children:e.jsx(M,{list:o,columns:i,loading:n,title:"Task Status list",isSearch:!1})})})}export{U as default};
