import{r as c,cL as h,cN as e,cV as y,cM as C,cQ as u,cS as p}from"./vendor-3a94a37a.js";import{eF as j,eG as x,eH as g,C as k,U as w,T as v,eI as b}from"./index-ed7845ca.js";import{V as R}from"./ViewBtn-ffc9b5cb.js";import{C as N}from"./CommonDelete-4339174a.js";import{C as I}from"./CreateDrawer-a7af16b9.js";import{F as m,I as S,B as D,f as F}from"./vendor-large-f75deccb.js";const Y=()=>{const[s,a]=c.useState(!1),o=h(),{Title:i}=F,r=async d=>{a(!0),await o(j(d)),a(!1)},n=()=>{y.error("Failed at adding role"),a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(i,{level:4,className:"m-2 mt-5 text-center",children:"Create New Role"}),e.jsx(m,{eventKey:"role-form",name:"basic",layout:"vertical",className:"sm:mx-10",onFinish:r,onFinishFailed:n,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(m.Item,{style:{marginBottom:"20px"},label:"Name",name:"name",rules:[{required:!0,message:"Please input your username!"}],children:e.jsx(S,{})}),e.jsx(m.Item,{style:{marginBottom:"10px"},children:e.jsx(D,{onClick:()=>a(!0),type:"primary",size:"small",htmlType:"submit",block:!0,loading:s,children:"Create New Role"})})]})})]})},V=()=>{const s=h(),{list:a,total:o,loading:i}=C(t=>t.role),[r,n]=c.useState({page:1,count:10,status:"true"}),d=[{id:1,title:"ID",dataIndex:"id",key:"id",render:t=>e.jsx(u,{to:`/admin/hrm/role/${t}/`,children:t}),renderCsv:t=>t},{id:2,title:"Name",dataIndex:"name",key:"name",render:(t,{id:l})=>e.jsx(u,{to:`/admin/hrm/role/${l}/`,children:t}),renderCsv:t=>t},{id:3,title:"Created at",dataIndex:"createdAt",key:"createdAt",render:t=>p(t).format("YYYY-MM-DD"),renderCsv:t=>p(t).format("YYYY-MM-DD")},{id:4,title:"",key:"action",render:({id:t,status:l})=>[{label:e.jsx(R,{title:"View",path:`/admin/hrm/role/${t}`}),key:"view"},{label:e.jsx(N,{values:{id:t,status:l},title:l==="true"?"Hide":"Show",permission:"delete-role",deleteThunk:b,loadThunk:x,query:r,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],f=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[200px]"}];return c.useEffect(()=>(s(x(r)),()=>{s(g())}),[s,r]),e.jsx(k,{title:"Roles",extra:e.jsx(I,{permission:"create-role",title:"Create Role",width:35,children:e.jsx(Y,{})}),children:e.jsx(w,{permission:"readAll-role",children:e.jsx(v,{columns:d,list:a,total:o,setPageConfig:n,loading:i,title:"Role List",filters:f,isSearch:!0})})})};export{V as default};
