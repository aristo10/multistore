import{cM as F,cL as k,cS as M,r as f,cN as e,cQ as O,cT as ee}from"./vendor-3a94a37a.js";import{fp as G,aZ as q,h4 as re,h5 as te,aG as W,an as se,h6 as ne,fo as oe,L as le}from"./index-ed7845ca.js";import{u as E}from"./useCurrency-4b14dd3d.js";import{i as K}from"./invoiceGenerator-eaeb8720.js";import{n as X}from"./numberToWords-4c291141.js";import{C as $}from"./card.components-753b0382.js";import{U as ie}from"./UpdatePayment-202f946d.js";import{V as Z}from"./ViewBtn-ffc9b5cb.js";import{R as w,q as R,C as L,o as Y,F as v,B,M as ce,b as A,h as de,m as ue,G as U,f as d}from"./vendor-large-f75deccb.js";function ae({data:t,vatAmount:s,title:o}){var i,y,S,N,T,P;const{currencySymbol:r,currencyName:l}=E()||{},c=F(h=>{var D;return(D=h==null?void 0:h.setting)==null?void 0:D.data})||null,n=k(),a=X(Math.round((t.totalAmount||0)-(t.discount||0))),u=G(r),j=[{label:"IN WORDS: ",value:`${a.toUpperCase()} ${l}`||""},{label:"Terms And Conditions: ",value:t.termsAndConditions?t.termsAndConditions:""},{label:"Notes: ",value:t.note?t.note:""}],m=[{label:"Total:",value:`${u} ${t.totalAmount-s}`},{label:"Sub Total:",value:`${u} ${t.totalAmount}`},{label:"Discount: (-)",value:`${u} ${t.discount?t.discount:0}`},{label:"Grand total:",value:`${u} ${t.totalAmount-(t.discount?t.discount:0)}`},{label:"Paid:",value:`${u} ${t.paidAmount}`},{label:"Due:",value:`${u} ${t.due}`}],g=["SI","Product Description","Quantity","Unit Price","Total Price"],C=t.cartOrderProduct.map(h=>[h.id,h.product.name,h.productQuantity,`${u} ${h.productSalePrice}`,`${u} ${h.productSalePrice*h.productQuantity}`]),b=[{value:`Client Id: ${t!=null&&t.customerId?t==null?void 0:t.customerId:"-"}`},{value:`Client Name: ${(i=t==null?void 0:t.customer)!=null&&i.username?(y=t==null?void 0:t.customer)==null?void 0:y.username:""}`},{value:`Address: ${(S=t==null?void 0:t.customer)!=null&&S.address?(N=t==null?void 0:t.customer)==null?void 0:N.address:"-"}`},{value:`Contact No: ${(T=t==null?void 0:t.customer)!=null&&T.phone?(P=t==null?void 0:t.customer)==null?void 0:P.phone:"-"}`}],I=[{value:`Invoice No: ${t!=null&&t.id?t==null?void 0:t.id:"-"}`},{value:`Invoice Date: ${M(t==null?void 0:t.date).format("YYYY-MM-DD")}`}],x={jsPDF:{},tableFontSize:10,infoTopFontSize:10,bottomRightFontSize:12,bottomLeftFontSize:8,footerFontSize:10};return f.useEffect(()=>{!c&&n(q())},[n,c]),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{className:"bg-primary flex justify-center items-center px-4 py-2 text-white rounded",onClick:()=>K("print",{title:o,TopRightInfo:I,customerInfo:b,companyInfo:c,bottomLeftContent:j,bottomRightContent:m,tableBody:C,tableHead:g,settings:x,leftBottomSecondColumnX:32}),children:"Print Invoice"})})}function me({data:t,title:s}){var C,b,I;const{currencySymbol:o}=E()||{},r=F(x=>{var i;return(i=x==null?void 0:x.setting)==null?void 0:i.data})||null,l=k();X(Math.round((t.totalAmount||0)-(t.discount||0))),G(o);const c=[],n=[],a=["SI","Product Description","Quantity"],u=t.cartOrderProduct.map(x=>[x.id,x.product.name,x.productQuantity]),j=[{value:`Client Id: ${t==null?void 0:t.customerId}`},{value:`Client Name: ${(C=t==null?void 0:t.customer)==null?void 0:C.username}`},{value:`Address: ${(b=t==null?void 0:t.customer)==null?void 0:b.address}`},{value:`Contact No: ${(I=t==null?void 0:t.customer)==null?void 0:I.phone}`}],m=[{value:`Invoice No: ${t==null?void 0:t.id}`},{value:`Invoice Date: ${M(t==null?void 0:t.date).format("YYYY-MM-DD")}`}],g={jsPDF:{},tableFontSize:10,infoTopFontSize:10,bottomRightFontSize:12,bottomLeftFontSize:8,footerFontSize:10};return f.useEffect(()=>{!r&&l(q())},[l,r]),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{className:"bg-primary flex justify-center items-center px-4 py-2 text-white rounded",onClick:()=>K("print",{title:s,TopRightInfo:m,customerInfo:j,companyInfo:r,bottomLeftContent:c,bottomRightContent:n,tableBody:u,tableHead:a,settings:g}),children:"Print Packing Slip"})})}function xe({list:t}){const s=[{title:"ID",dataIndex:"productId",key:"productId"},{title:"Name",dataIndex:"product",render:r=>e.jsx(O,{to:`/admin/product/${r.id}`,children:r.name})},{title:"Product Quantity",dataIndex:"productQuantity",key:"productQuantity"},{title:"Product  Unit Price",dataIndex:"productSalePrice",key:"productSalePrice"},{title:"Color",key:"colors",render:r=>{var l,c,n,a,u,j,m;return e.jsx(e.Fragment,{children:(l=r==null?void 0:r.colors)!=null&&l.name?e.jsx("span",{style:{backgroundColor:((c=r==null?void 0:r.colors)==null?void 0:c.name)=="White"?"#000000":`rgba(${parseInt((n=r==null?void 0:r.colors)==null?void 0:n.colorCode.slice(1,3),16)}, ${parseInt((a=r==null?void 0:r.colors)==null?void 0:a.colorCode.slice(3,5),16)}, ${parseInt((u=r==null?void 0:r.colors)==null?void 0:u.colorCode.slice(5,7),16)}, 0.2)`,color:(j=r==null?void 0:r.colors)==null?void 0:j.colorCode},className:"px-2 pb-[2px] rounded-sm font-semibold",children:(m=r==null?void 0:r.colors)==null?void 0:m.name}):"-"})}},{title:"Attribute",key:"attribute",render:({cartOrderAttributeValue:r})=>e.jsx("div",{className:"flex flex-col md:flex-row",children:r.length>0?r.map(l=>e.jsxs("span",{className:" bg-gray-200 mx-[2px] p-1 m-1 rounded-sm text-gray-600",children:[`${l.productAttributeValue.productAttribute.name}: `,e.jsx("span",{className:"font-medium",children:`${l.productAttributeValue.name}`})]},l.id)):"-"})},{title:"Total Price ",key:"Total Price ",dataIndex:"",render:({productQuantity:r,productSalePrice:l,remainQuantity:c,returnQuantity:n})=>n?c*l:l*r},{title:"Action",key:"action",render:({productId:r})=>e.jsx(Z,{path:`/admin/product/${r}`})}],o=r=>r.map(l=>({...l,key:l.id}));return e.jsx(w,{children:e.jsx(R,{span:24,className:"mt-2",children:e.jsx(L,{className:"header-solid h-full",bordered:!1,title:[e.jsx("h4",{className:"font-semibold text-xl m-0 text-center",children:"Products Information"})],bodyStyle:{paddingTop:"0"},children:e.jsx("div",{className:"col-info",children:e.jsx(Y,{scroll:{x:!0},loading:!t,columns:s,dataSource:t?o(t):[]})})})})})}function he({deliveryFee:t,invoiceId:s}){const o=k(),{Option:r}=A,[l]=v.useForm(),[c,n]=f.useState(!1),[a,u]=f.useState(),[j,m]=f.useState(!1),{list:g,loading:C}=F(i=>i.courierMedium);f.useEffect(()=>{m(!1),o(re())},[o]);const b=()=>{n(!0)},I=()=>{n(!1)},x=async i=>{var S;m(!0),((S=(await o(te({...i,invoiceId:s}))).payload)==null?void 0:S.message)==="success"?(m(!1),o(W(s)),n(!1)):m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(B,{type:"dashed",onClick:b,children:"Update Status"}),e.jsx(ce,{title:"Update Order Status",open:c,onCancel:I,footer:!1,children:e.jsxs(v,{form:l,name:"basic",initialValues:{deliveryFee:t},layout:"vertical",onFinish:x,children:[e.jsxs("h1",{className:"text-lg text-center font-semibold text-gray-600",children:["Order ID : ",s]}),e.jsx(v.Item,{name:"orderStatus",label:"Update Order Status",rules:[{required:!0,message:"Please select order status!"}],children:e.jsxs(A,{placeholder:"Select Order Status",style:{width:"100%"},onChange:i=>u(i),allowClear:!0,children:[e.jsx(r,{value:"PENDING",children:"Pending"}),e.jsx(r,{value:"RECEIVED",children:"Received"}),e.jsx(r,{value:"DELIVERED",children:"Delivered"}),e.jsx(r,{value:"CANCELLED",children:"Cancelled"})]})}),a==="RECEIVED"&&e.jsxs(e.Fragment,{children:[e.jsx(v.Item,{style:{marginBottom:"15px"},label:"Courier Medium",name:"courierMediumId",rules:[{required:!0,message:"please select courier medium"}],children:e.jsx(A,{showSearch:!0,loading:C,placeholder:"Select Courier Medium",optionFilterProp:"children",filterOption:(i,y)=>y.children.includes(i),filterSort:(i,y)=>i.children.toLowerCase().localeCompare(y.children.toLowerCase()),children:g==null?void 0:g.map(i=>e.jsx(A.Option,{value:i.courierMediumId,children:i.courierMediumName},i.id))})}),e.jsx(v.Item,{label:"Delivery Charge",name:"deliveryFee",children:e.jsx(de,{disabled:!0,size:"small",placeholder:"e.g. 100"})})]}),e.jsx(v.Item,{children:e.jsx(B,{htmlType:"submit",loading:j,className:"w-full",type:"primary",children:"Submit"})})]})})]})}function pe({list:t}){const[s,o]=f.useState([]),r=[{id:1,title:"ID",dataIndex:"id",key:"id",render:n=>e.jsx(O,{to:`/admin/transaction/${n}`,children:n})},{id:2,title:"Date",dataIndex:"date",key:"date",render:n=>M(n).format("DD/MM/YYYY")},{id:3,title:"Debit",dataIndex:"debit",key:"debit",render:n=>e.jsx(O,{to:`/admin/account/${n.id}`,children:n.name})},{id:4,title:"Credit",dataIndex:"credit",key:"credit",render:n=>e.jsx(O,{to:`/admin/account/${n.id}`,children:n.name})},{id:5,title:"Amount",dataIndex:"amount",key:"amount"},{id:6,title:"Type ",dataIndex:"type",key:"type"},{id:7,title:"Particulars",dataIndex:"particulars",key:"particulars"},{id:8,title:"Action",key:"action",render:({id:n})=>e.jsx(Z,{path:`/admin/transaction/${n}`})}];f.useEffect(()=>{o(r)},[]);const l=n=>{o(n)},c=n=>n.map(a=>({...a,key:a.id}));return e.jsx(w,{children:e.jsx(R,{span:24,className:"mt-2",children:e.jsxs(L,{className:"header-solid h-full",bordered:!1,title:e.jsx("h6",{className:"font-semibold m-0 text-center",children:"Transaction Information"}),bodyStyle:{paddingTop:"0"},children:[t&&e.jsx("div",{className:"my-3",children:e.jsx(se,{options:r,columns:r,columnsToShowHandler:l})}),e.jsx(Y,{scroll:{x:!0},loading:!t,columns:s,dataSource:t?c(t):[]})]})})})}function je({list:t}){const s=[{title:"Order#",dataIndex:"cartOrderId",key:"cartOrderId"},{title:"Product Name",dataIndex:"returnCartOrderProduct",key:"returnCartOrderProduct",render:o=>{var r,l,c,n;return e.jsx(O,{to:`/admin/product/${(l=(r=o[0])==null?void 0:r.product)==null?void 0:l.id}`,children:(n=(c=o[0])==null?void 0:c.product)==null?void 0:n.name})}},{title:"Return Type",dataIndex:"returnType",key:"returnType"},{title:"Status",dataIndex:"returnCartOrderStatus",key:"returnCartOrderStatus"},{title:"Qty",dataIndex:"returnCartOrderProduct",key:"returnCartOrderProduct",render:o=>o[0].productQuantity},{title:"Amount",dataIndex:"totalAmount",key:"totalAmount",render:o=>o.toFixed(2)},{title:" Date",dataIndex:"createdAt",key:"createdAt",render:o=>M(o).format("DD/MM/YY")}];return e.jsx(w,{children:e.jsx(R,{span:24,className:"mt-2",children:e.jsx(L,{className:"header-solid h-full",bordered:!1,title:[e.jsx("h4",{className:"font-semibold text-xl m-0 text-center",children:"Return Product Information"})],bodyStyle:{paddingTop:"0"},children:e.jsx("div",{className:"col-info",children:e.jsx(Y,{className:"my-5",columns:s,loading:!t,dataSource:!!(t!=null&&t.length)&&t.map(o=>({...o,key:o==null?void 0:o.id})),pagination:!1,scroll:{x:400}})})})})})}function Ne(){var c,n,a,u,j,m,g,C,b,I,x,i,y,S,N,T,P,h,D,_,V,H,z,Q;const{id:t}=ee(),s=E(),o=k(),{sale:r,loading:l}=F(p=>p.ESale);return f.useEffect(()=>(o(W(t)),()=>{o(ne())}),[o,t]),e.jsx("div",{children:e.jsx("div",{children:r?e.jsxs(f.Fragment,{children:[e.jsxs(L,{bordered:!1,className:"card-custom",children:[e.jsxs("h5",{className:"flex justify-start items-center gap-2 text-xl",children:[e.jsx(ue,{}),e.jsxs("span",{className:"mr-left",children:["ID : ",r.singleCartOrder.id," "]})]}),e.jsxs("div",{className:" flex justify-center mt-5 flex-wrap gap-2",children:[e.jsx("div",{children:(r==null?void 0:r.singleCartOrder)&&e.jsx(ae,{data:r.singleCartOrder,vatAmount:r.totalVatAmount,title:"Order Invoice"})}),e.jsx("div",{children:(r==null?void 0:r.singleCartOrder)&&e.jsx(me,{title:"Order packing Slip",data:r.singleCartOrder})}),e.jsx("div",{className:"text-end mr-2",children:e.jsx(he,{deliveryFee:r.deliveryFee,invoiceId:r.singleCartOrder.id})})]}),e.jsxs("div",{className:"card-body mt-5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-10",children:[e.jsxs("div",{className:"w-full flex flex-col gap-5",children:[e.jsx(U.Ribbon,{text:r.status,color:r.status==="PAID"?"green":"red",children:e.jsx(U.Ribbon,{text:r.singleCartOrder.orderStatus,color:r.singleCartOrder.orderStatus==="DELIVERED"?"success":"orange",className:"mt-10",children:e.jsxs($,{title:"Sale Invoice Information ",children:[e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Total Amount :"})," ",e.jsxs("strong",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}}),(c=r.singleCartOrder)!=null&&c.totalAmount?Number(r.singleCartOrder.totalAmount).toFixed(2):0]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Due Amount :"})," ",e.jsxs("strong",{style:{color:"red"},children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}}),(n=r.singleCartOrder)!=null&&n.due?Number(r.singleCartOrder.due).toFixed(2):0]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Paid Amount :"})," ",e.jsxs("strong",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}}),(a=r.singleCartOrder)!=null&&a.paidAmount?Number(r.singleCartOrder.paidAmount).toFixed(2):0]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Discount :"})," ",e.jsxs("strong",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}}),(u=r.singleCartOrder)!=null&&u.discount?Number(r.singleCartOrder.discount).toFixed(2):0]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Delivery Fee :"})," ",e.jsxs("strong",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}}),r.deliveryFee?Number(r.deliveryFee).toFixed(2):0]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Profit :"})," ",e.jsxs("strong",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}}),(j=r.singleCartOrder)!=null&&j.profit?Number(r.singleCartOrder.profit).toFixed(2):0]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Sale Date :"})," ",e.jsx("strong",{children:r.singleCartOrder.createdAt.slice(0,10)})]})]})})}),e.jsxs($,{title:"Customer Information",children:[e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Customer Name :"})," ",e.jsx("strong",{children:e.jsx(O,{to:`/admin/customer/${(m=r==null?void 0:r.singleCartOrder)==null?void 0:m.customerId}`,children:oe(r.singleCartOrder.customer)})})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Phone :"})," ",e.jsx("strong",{children:r.singleCartOrder.customer.phone})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Address :"})," ",e.jsx("strong",{children:r.singleCartOrder.customer.address})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col gap-5",children:[e.jsxs($,{title:"Delivery Information",children:[e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Delivery Area :"})," ",e.jsxs("strong",{children:[(C=(g=r.singleCartOrder)==null?void 0:g.deliveryFee)==null?void 0:C.deliveryArea," (",e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}})," ",(I=(b=r.singleCartOrder)==null?void 0:b.deliveryFee)==null?void 0:I.deliveryFee,")"]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Delivery Address :"})," ",e.jsx("strong",{children:r.singleCartOrder.deliveryAddress})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Customer Phone :"})," ",e.jsx("strong",{children:r.singleCartOrder.customerPhone})]}),((i=(x=r.singleCartOrder)==null?void 0:x.courierMedium)==null?void 0:i.courierMediumName)&&e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-[16px] font-medium py-3",children:[" ","Assigned Delivery Media"]}),e.jsx("hr",{}),e.jsxs("p",{className:"pt-3",children:[e.jsx(d.Text,{strong:!0,children:((S=(y=r.singleCartOrder)==null?void 0:y.courierMedium)==null?void 0:S.type)==="courier"?"Courier:":"Delivery Man:"})," ",e.jsx("strong",{children:(T=(N=r.singleCartOrder)==null?void 0:N.courierMedium)==null?void 0:T.courierMediumName})]})]}),((h=(P=r.singleCartOrder)==null?void 0:P.courierMedium)==null?void 0:h.phone)&&e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:((_=(D=r.singleCartOrder)==null?void 0:D.courierMedium)==null?void 0:_.type)==="courier"?"Courier Phone :":"Phone: "})," ",e.jsxs("strong",{children:[(H=(V=r.singleCartOrder)==null?void 0:V.courierMedium)==null?void 0:H.phone," "]})]})]}),(Q=(z=r.singleCartOrder)==null?void 0:z.manualPayment)==null?void 0:Q.map((p,J)=>e.jsxs($,{title:e.jsxs("div",{className:"flex justify-between items-center overflow-auto gap-2",children:[e.jsx("p",{children:"Payment Method Information"}),e.jsx(ie,{data:p,id:t})]}),children:[e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Payment Method :"})," ",e.jsx("strong",{children:p.paymentMethod.methodName})]}),p.customerTransactionId&&e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"TRX ID :"})," ",e.jsx("strong",{children:p.customerTransactionId})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Amount :"})," ",e.jsxs("strong",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:s==null?void 0:s.currencySymbol}}),p.amount]})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Payment Status :"})," ",e.jsx("strong",{className:` uppercase rounded-sm px-2 py-[2px] ${p.isVerified=="Pending"&&"text-orange-500 bg-orange-500/10"}
                 
                  ${p.isVerified=="Accept"&&"text-green-500 bg-green-500/10"}
                  ${p.isVerified=="Reject"&&"text-red-500 bg-red-500/10"}
                    `,children:p.isVerified})]}),e.jsxs("p",{children:[e.jsx(d.Text,{strong:!0,children:"Payment Date :"})," ",e.jsx("strong",{children:M(p.createdAt).format("MMMM Do YYYY, h:mm:ss a")})]})]},J))]})]}),e.jsx("br",{})]})]}),e.jsx(xe,{list:r.singleCartOrder.cartOrderProduct}),(r==null?void 0:r.returnSingleCartOrder.length)>0&&e.jsx(je,{list:r.returnSingleCartOrder}),e.jsx(pe,{list:r.transactions})]},r.singleCartOrder.id):e.jsx(le,{})})})}export{Ne as default};
