import{cM as c,cL as N,r as D,cN as e,cO as O}from"./vendor-3a94a37a.js";import{l as P,a as k,b as L,c as q,d as B,U as E,M as F,N as T}from"./index-ed7845ca.js";import{F as l,I as t,D as v,b as n,B as j}from"./vendor-large-f75deccb.js";function J({onClose:u,createAs:r}){const{list:o,loading:I}=c(a=>a.company),{list:i,loading:y}=c(a=>a.contactSource),{list:m,loading:g}=c(a=>a.contactStage),{list:h,loading:b}=c(a=>a.industry),{list:p,loading:w}=c(a=>a.users),{loading:C}=c(a=>a.contact),[x]=l.useForm(),s=N();D.useEffect(()=>{s(P()),s(k()),s(L()),s(q()),s(B({query:"all"}))},[s]);const S=async a=>{const d={...a,dateOfBirth:O(a.dateOfBirth).format("YYYY-MM-DD"),contactOwnerId:parseInt(a.contactOwnerId),companyId:parseInt(a.companyId),industryId:parseInt(a.industryId),contactSourceId:parseInt(a.contactSourceId),contactStageId:parseInt(a.contactStageId)};(await s(F(d))).payload.message==="success"&&(x.resetFields(),s(r?r.singleLoadThunk(r.id):T({page:1,count:10})))},f=()=>{x.resetFields(),u()};return e.jsx("div",{className:"flex justify-center mt-5",children:e.jsx(E,{permission:"create-contact",children:e.jsxs(l,{className:"w-4/5",onFinish:S,colon:!1,layout:"vertical",form:x,initialValues:r?{[r.name]:r.value}:{},children:[e.jsxs("div",{className:"flex justify-between gap-5",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(l.Item,{style:{width:"100%"},label:"Email",name:"email",tooltip:"This is a required field",rules:[{required:!0,message:"Email is Required."}],children:e.jsx(t,{placeholder:"example@email.com"})}),e.jsx(l.Item,{label:"First name",name:"firstName",rules:[{required:!0,message:"First Name is Required."}],children:e.jsx(t,{placeholder:"Jhon"})}),e.jsx(l.Item,{label:"Last name",name:"lastName",rules:[{required:!0,message:"Last Name is Required."}],children:e.jsx(t,{placeholder:"Doe"})}),e.jsx(l.Item,{label:"Birthday",name:"dateOfBirth",children:e.jsx(v,{placeholder:"Select birthday"})}),e.jsx(l.Item,{label:"Contact owner",name:"contactOwnerId",rules:[{required:!0,message:"Please select contact owner"}],children:e.jsx(n,{style:{width:"100%"},loading:w,allowClear:!0,showSearch:!0,placeholder:"Select contact owner name",children:p==null?void 0:p.map(a=>e.jsx(n.Option,{value:a.id,children:a==null?void 0:a.username},a.id))})}),e.jsx(l.Item,{label:"Company",name:"companyId",children:e.jsx(n,{style:{width:"100%"},loading:I,allowClear:!0,showSearch:!0,placeholder:"Select company Name",disabled:(r==null?void 0:r.name)==="companyId",children:o==null?void 0:o.map(a=>e.jsx(n.Option,{value:a.id,children:a.companyName},a.id))})}),e.jsx(l.Item,{label:"Job title",name:"jobTitle",children:e.jsx(t,{placeholder:"CEO"})}),e.jsx(l.Item,{label:"Phone number",name:"phone",children:e.jsx(t,{placeholder:"+8801700000000"})}),e.jsx(l.Item,{label:"Department",name:"department",children:e.jsx(t,{placeholder:"IT"})}),e.jsx(l.Item,{label:"Twitter",name:"twitter",children:e.jsx(t,{placeholder:"http://twitter.com/jhon"})}),e.jsx(l.Item,{label:"Linkedin",name:"linkedin",children:e.jsx(t,{placeholder:"http://linkedin.com/jhon"})}),e.jsx(l.Item,{label:"Present address",name:"presentAddress",children:e.jsx(t,{placeholder:"Enter present address"})})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(l.Item,{label:"Present city",name:"presentCity",children:e.jsx(t,{placeholder:"Dhaka"})}),e.jsx(l.Item,{label:"Present zip code",name:"presentZipCode",children:e.jsx(t,{placeholder:"1361"})}),e.jsx(l.Item,{label:"Present state",name:"presentState",children:e.jsx(t,{placeholder:"Dhaka"})}),e.jsx(l.Item,{label:"Present country",name:"presentCountry",children:e.jsx(t,{placeholder:"Bangladesh"})}),e.jsx(l.Item,{label:"Permanent address",name:"permanentAddress",children:e.jsx(t,{placeholder:"Enter permanent address"})}),e.jsx(l.Item,{label:"Permanent city",name:"permanentCity",children:e.jsx(t,{placeholder:"Dhaka"})}),e.jsx(l.Item,{label:"Permanent zip code",name:"permanentZipCode",children:e.jsx(t,{placeholder:"Dhaka"})}),e.jsx(l.Item,{label:"Permanent state",name:"permanentState",children:e.jsx(t,{placeholder:"Dhaka"})}),e.jsx(l.Item,{label:"Permanent country",name:"permanentCountry",children:e.jsx(t,{placeholder:"Bangladesh"})}),e.jsx(l.Item,{label:"Industry",name:"industryId",children:e.jsx(n,{style:{width:"100%"},loading:b,allowClear:!0,showSearch:!0,filterOption:(a,d)=>d.children.toLowerCase().indexOf(a.toLowerCase()),filterSort:(a,d)=>a.children.toLowerCase().localeCompare(d.children.toLowerCase()),placeholder:"Select Industry",children:h==null?void 0:h.map(a=>e.jsx(n.Option,{value:a.id,children:a.industryName},a.id))})}),e.jsx(l.Item,{label:"Contact source",name:"contactSourceId",children:e.jsx(n,{style:{width:"100%"},loading:y,allowClear:!0,showSearch:!0,placeholder:"Select contact Source",children:i==null?void 0:i.map(a=>e.jsx(n.Option,{value:a.id,children:a.contactSourceName},a.id))})}),e.jsx(l.Item,{label:"Contact stage",name:"contactStageId",children:e.jsx(n,{style:{width:"100%"},loading:g,allowClear:!0,showSearch:!0,placeholder:"Select contact stage",children:m==null?void 0:m.map(a=>e.jsx(n.Option,{value:a.id,children:a.contactStageName},a.id))})})]})]}),e.jsx(l.Item,{label:"Description",name:"description",children:e.jsx(t.TextArea,{placeholder:"Describe about contact"})}),e.jsx(l.Item,{label:"",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{size:"large",htmlType:"submit",type:"primary",loading:C,children:"Create"}),e.jsx(j,{size:"large",htmlType:"submit",type:"danger",onClick:f,children:"Cancel"})]})})]})})})}export{J as A};
