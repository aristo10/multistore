import{cM as d,cL as p,r as u,cN as r,cS as x}from"./vendor-3a94a37a.js";import{bX as f,bY as h,G as c,C as j,U as b,T as C,bZ as P,b_ as N,b$ as g}from"./index-ed7845ca.js";import{C as k}from"./CommonDelete-4339174a.js";import{C as w}from"./CreateDrawer-a7af16b9.js";import{U as v}from"./UpdateDrawer-f5580074.js";import{F as l,I as E,B as T,k as F}from"./vendor-large-f75deccb.js";function m({edit:e}){const[a]=l.useForm(),{loading:n}=d(t=>t.priority),i=p(),o=async t=>{(await i(e!=null&&e.id?f({id:e==null?void 0:e.id,values:t}):h(t))).payload.message==="success"&&(i(c()),e!=null&&e.id||a.resetFields())};return u.useEffect(()=>{e!=null&&e.id&&a.setFieldsValue(e==null?void 0:e.values)},[e,a]),r.jsx("div",{className:"flex justify-center mt-5",children:r.jsxs(l,{className:"w-4/5",onFinish:o,colon:!1,layout:"vertical",form:a,children:[r.jsx(l.Item,{style:{width:"350px"},label:"Priority Name",name:"name",tooltip:"This is a required field",rules:[{required:!0,message:"This is a required field."}],children:r.jsx(E,{placeholder:"Priority name"})}),r.jsx(l.Item,{label:"",children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(T,{size:"large",htmlType:"submit",type:"primary",loading:n,children:e!=null&&e.id?"Update":"Create"})})})]})})}function B(){const e=p(),{list:a,loading:n,total:i,edit:o}=d(s=>s.priority),t=[{title:"Name",dataIndex:"name"},{title:"Create date",dataIndex:"createdAt",render:s=>x(s).format("ll")},{id:3,title:"",key:"action",render:({id:s,name:y})=>[{label:r.jsxs("div",{onClick:()=>e(N({id:s,values:{name:y}})),className:"flex items-center gap-2 cursor-pointer",children:[r.jsx(F,{className:" rounded-md"}),"Edit"]}),key:"edit"},{label:r.jsx(k,{id:s,title:"delete",permission:"delete-priority",deleteThunk:g,loadThunk:c}),key:"delete"}],csvOff:!0}];return u.useEffect(()=>{e(c())},[e]),r.jsxs(j,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Priority",extra:r.jsx(w,{permission:"create-priority",title:"Create priority",width:35,children:r.jsx(m,{})}),children:[r.jsx(b,{permission:"readAll-priority",children:r.jsx(C,{list:a,columns:t,loading:n,total:i,title:"Priority List",isSearch:!1})}),r.jsx(v,{permission:"update-priority",title:"Update priority",width:35,open:o,setClose:P,children:r.jsx(m,{edit:o})})]})}export{B as default};
