import{cL as C,cM as m,r as p,cN as e,cO as R,cS as T}from"./vendor-3a94a37a.js";import{ak as k,a1 as F,aP as D,a9 as O,f7 as $,f8 as P,f9 as q,fa as U,C as L,U as A,T as H,fb as X}from"./index-ed7845ca.js";import{C as Y}from"./CommonDelete-4339174a.js";import{C as G}from"./CreateDrawer-a7af16b9.js";import{B as f}from"./BigDrawer-240149a9.js";import{A as Q}from"./AddStore-c155f634.js";import{A as I}from"./AddVatTax-97a0925d.js";import{F as s,b as r,I as N,h as v,D as V,B as E,k as J,M as K}from"./vendor-large-f75deccb.js";import"./UploadMany-c4472299.js";function W(){const n=C(),{list:i,loading:j}=m(l=>l.store),{list:c,loading:u}=m(l=>l.vatTax),{list:d,loading:y}=m(l=>l.products),{list:o,loading:t}=m(l=>l.discount),[w]=s.useForm(),[x,h]=p.useState(!1),g=async l=>{h(!0);try{(await n($(l))).payload.message==="success"&&(w.resetFields(),n(P({page:1,count:10,status:"true"}))),h(!1)}catch{h(!1)}},S=()=>{h(!1)};return p.useEffect(()=>{n(k()),n(F()),n(D({page:1,count:100})),n(O())},[n]),e.jsx(p.Fragment,{children:e.jsx("div",{className:" h-full",children:e.jsxs(s,{form:w,layout:"vertical",className:"sm:mx-10",onFinish:g,onFinishFailed:S,autoComplete:"off",labelAlign:"left",children:[e.jsx(s.Item,{label:e.jsxs(e.Fragment,{children:["Select store"," ",e.jsx(f,{title:"Store",children:e.jsx(Q,{})})]}),className:"w-full",name:"storeId",rules:[{required:!0,message:"Please select store!"}],children:e.jsx(r,{allowClear:!0,placeholder:"Select Store",loading:j,children:i==null?void 0:i.map(l=>e.jsx(r.Option,{value:l.id,children:l.name},l.id))})}),e.jsx(s.Item,{label:"Select product",className:"w-full",name:"productId",rules:[{required:!0,message:"Please select product!"}],children:e.jsx(r,{allowClear:!0,placeholder:"Select Product",loading:y,children:d==null?void 0:d.map(l=>e.jsx(r.Option,{value:l.id,children:l.name},l.id))})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(s.Item,{label:"Sale Price",name:"productSalePrice",className:"w-full sm:w-1/2",children:e.jsx(N,{className:"w-full",type:"number",size:"small",placeholder:"Sale Price"})}),e.jsx(s.Item,{label:"Purchase Price",name:"productPurchasePrice",className:"w-full sm:w-1/2",children:e.jsx(N,{className:"w-full",type:"number",size:"small",placeholder:"Purchase Price"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(s.Item,{name:"productQuantity",label:"Quantity",className:"w-full sm:w-1/2",children:e.jsx(v,{className:"w-full",size:"small",placeholder:"Quantity"})}),e.jsx(s.Item,{label:"Reorder Quantity",name:"reorderQuantity",className:"w-full sm:w-1/2",children:e.jsx(v,{className:"w-full",size:"small",placeholder:"Reorder Quantity"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(s.Item,{style:{marginBottom:"15px"},label:e.jsxs(e.Fragment,{children:["Purchase VAT"," ",e.jsx(f,{title:"Vat/Tax",children:e.jsx(I,{})})]}),className:"w-full sm:w-1/2",name:"productPurchaseTaxId",children:e.jsx(r,{allowClear:!0,placeholder:"Select Vat/Tax type",loading:u,children:c==null?void 0:c.map(l=>e.jsxs(r.Option,{value:l.id,children:[l.title,e.jsxs("span",{className:"italic",children:["@",l.percentage,"%"]})]},l.id))})}),e.jsx(s.Item,{style:{marginBottom:"15px"},label:e.jsxs(e.Fragment,{children:["Sales VAT"," ",e.jsx(f,{title:"VAT/TAX",children:e.jsx(I,{})})]}),className:"w-full sm:w-1/2",name:"productSalesTaxId",children:e.jsx(r,{allowClear:!0,placeholder:"Select Vat/Tax type",loading:u,children:c==null?void 0:c.map(l=>e.jsxs(r.Option,{value:l.id,children:[l.title,e.jsxs("span",{className:"italic",children:["@",l.percentage,"%"]})]},l.id))})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s.Item,{name:"isNegativeSale",label:"Is Negative Sale",className:"mb-1 w-full",children:e.jsxs(r,{className:"w-full",placeholder:"Select negative sale",children:[e.jsx(r.Option,{value:"true",children:"Yes"}),e.jsx(r.Option,{value:"false",children:"No"})]})}),e.jsx(s.Item,{name:"expDate",label:"Expiry Date",className:"mb-1 w-full",children:e.jsx(V,{size:"small",placeholder:"Enter expiry date"})})]}),e.jsx(s.Item,{label:"Discount",name:"discountId",className:"w-full",children:e.jsx(r,{showSearch:!0,placeholder:"Select discount",optionFilterProp:"children",allowClear:!0,loading:t,children:o==null?void 0:o.map(l=>e.jsx(r.Option,{value:l.id,children:`${l.type=="percentage"?`${l.value}%`:`Flat ${l.value}`}`},l.id))})}),e.jsx(s.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-[24px]",children:e.jsx(E,{loading:x,type:"primary",htmlType:"submit",shape:"round",children:"Create inventory"})})]})})})}function Z({data:n}){const i=C(),{id:j}=n,[c]=s.useForm(),[u,d]=p.useState(),[y,o]=p.useState(!1),{list:t,loading:w}=m(a=>a.store),{list:x,loading:h}=m(a=>a.vatTax),{list:g,loading:S}=m(a=>a.products),{list:l,loading:b}=m(a=>a.discount),z=()=>{o(!0)},B=async a=>{d(!0),(await i(q({id:j,values:a}))).payload.message=="success"&&(o(!1),d(!1),i(U()))},M=()=>{d(!1)};return p.useEffect(()=>{i(k()),i(F()),i(D({page:1,count:100})),i(O())},[i]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:z,className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(J,{className:"gray-600  rounded-md"}),"Edit"]}),e.jsx(K,{title:"Update Store",open:y,onCancel:()=>o(!1),footer:!1,children:e.jsxs(s,{form:c,layout:"vertical",className:"sm:mx-10",initialValues:{...n,expDate:n.expDate?R(n.expDate):null},onFinish:B,onFinishFailed:M,autoComplete:"off",labelAlign:"left",children:[e.jsx(s.Item,{label:e.jsxs(e.Fragment,{children:["Select store"," ",e.jsx(f,{title:"Store",children:e.jsx(Q,{})})]}),className:"w-full",name:"storeId",rules:[{required:!0,message:"Please select store!"}],children:e.jsx(r,{allowClear:!0,placeholder:"Select Store",loading:w,children:t==null?void 0:t.map(a=>e.jsx(r.Option,{value:a.id,children:a.name},a.id))})}),e.jsx(s.Item,{label:"Select product",className:"w-full",name:"productId",rules:[{required:!0,message:"Please select product!"}],children:e.jsx(r,{allowClear:!0,placeholder:"Select Product",loading:S,children:g==null?void 0:g.map(a=>e.jsx(r.Option,{value:a.id,children:a.name},a.id))})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(s.Item,{label:"Sale Price",name:"productSalePrice",className:"w-full sm:w-1/2",children:e.jsx(N,{className:"w-full",type:"number",size:"small",placeholder:"Sale Price"})}),e.jsx(s.Item,{label:"Purchase Price",name:"productPurchasePrice",className:"w-full sm:w-1/2",children:e.jsx(N,{className:"w-full",type:"number",size:"small",placeholder:"Purchase Price"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(s.Item,{name:"productQuantity",label:"Quantity",className:"w-full sm:w-1/2",children:e.jsx(v,{className:"w-full",size:"small",placeholder:"Quantity"})}),e.jsx(s.Item,{label:"Reorder Quantity",name:"reorderQuantity",className:"w-full sm:w-1/2",children:e.jsx(v,{className:"w-full",size:"small",placeholder:"Reorder Quantity"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(s.Item,{style:{marginBottom:"15px"},label:e.jsxs(e.Fragment,{children:["Purchase VAT"," ",e.jsx(f,{title:"Vat/Tax",children:e.jsx(I,{})})]}),className:"w-full sm:w-1/2",name:"productPurchaseTaxId",children:e.jsx(r,{allowClear:!0,placeholder:"Select Vat/Tax type",loading:h,children:x==null?void 0:x.map(a=>e.jsxs(r.Option,{value:a.id,children:[a.title,e.jsxs("span",{className:"italic",children:["@",a.percentage,"%"]})]},a.id))})}),e.jsx(s.Item,{style:{marginBottom:"15px"},label:e.jsxs(e.Fragment,{children:["Sales VAT"," ",e.jsx(f,{title:"VAT/TAX",children:e.jsx(I,{})})]}),className:"w-full sm:w-1/2",name:"productSalesTaxId",children:e.jsx(r,{allowClear:!0,placeholder:"Select Vat/Tax type",loading:h,children:x==null?void 0:x.map(a=>e.jsxs(r.Option,{value:a.id,children:[a.title,e.jsxs("span",{className:"italic",children:["@",a.percentage,"%"]})]},a.id))})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s.Item,{name:"isNegativeSale",label:"Is Negative Sale",className:"mb-1 w-full",children:e.jsxs(r,{className:"w-full",placeholder:"Select negative sale",children:[e.jsx(r.Option,{value:"true",children:"Yes"}),e.jsx(r.Option,{value:"false",children:"No"})]})}),e.jsx(s.Item,{name:"expDate",label:"Expiry Date",className:"mb-1 w-full",children:e.jsx(V,{size:"small",placeholder:"Enter expiry date"})})]}),e.jsx(s.Item,{label:"Discount",name:"discountId",className:"w-full",children:e.jsx(r,{showSearch:!0,placeholder:"Select discount",optionFilterProp:"children",allowClear:!0,loading:b,children:l==null?void 0:l.map(a=>e.jsx(r.Option,{value:a.id,children:`${a.type=="percentage"?`${a.value}%`:`Flat ${a.value}`}`},a.id))})}),e.jsx(s.Item,{style:{marginBottom:"10px"},className:"flex justify-center mt-[24px]",children:e.jsx(E,{loading:u,type:"primary",htmlType:"submit",shape:"round",children:"Update Store"})})]})})]})}function de(){const n=C(),{list:i,total:j,loading:c}=m(t=>t.inventory),[u,d]=p.useState({page:1,count:10,status:"true"}),y=[{id:1,title:"ID",dataIndex:"id",key:"id"},{id:2,title:"Name",dataIndex:"product",key:"productName",render:t=>t==null?void 0:t.name,renderCsv:t=>t==null?void 0:t.name,tdClass:"whitespace-normal"},{id:2,title:"Quantity",dataIndex:"productQuantity",key:"productQuantity"},{id:3,title:"Sale Price",dataIndex:"productSalePrice",key:"productSalePrice"},{id:4,title:"Purchase Price",dataIndex:"productPurchasePrice",key:"productPurchasePrice"},{id:5,title:"Reorder Quantity",dataIndex:"reorderQuantity",key:"reorderQuantity"},{id:6,title:"Purchase Tax",dataIndex:"productPurchaseTaxId",key:"productPurchaseTaxId"},{id:7,title:"Sales Tax",dataIndex:"productSalesTaxId",key:"productSalesTaxId"},{id:8,title:"Discount",dataIndex:"discountId",key:"discountId"},{id:9,title:"Negative Sale",dataIndex:"isNegativeSale",key:"isNegativeSale"},{id:10,title:"Expire Date",dataIndex:"expDate",key:"expDate",render:t=>t?T(t).format("ll"):"N/A",renderCsv:t=>t?T(t).format("ll"):"N/A"},{id:4,title:"",key:"action",render:t=>[{label:e.jsx(A,{permission:"update-Inventory",children:e.jsx(Z,{data:t})}),key:"edit"},{label:e.jsx(Y,{values:{id:t.id,status:t.status},title:t.status==="true"?"Hide":"Show",deleteThunk:X,loadThunk:P,permission:"delete-Inventory",query:u,className:"bg-white text-black"}),key:"delete"}],csvOff:!0}],o=[{key:"status",label:"Status",type:"select",options:[{label:"Show",value:"true"},{label:"Hide",value:"false"}],className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return p.useEffect(()=>{n(P(u))},[n,u]),e.jsx(L,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Inventory",extra:e.jsx(G,{permission:"create-Inventory",title:"Create Inventory",width:35,children:e.jsx(W,{})}),children:e.jsx(A,{permission:"readAll-Inventory",children:e.jsx(H,{total:j,columns:y,list:i,loading:c,setPageConfig:d,title:"Inventory",filters:o})})})}export{de as default};
