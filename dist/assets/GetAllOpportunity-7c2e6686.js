import{cM as n,cL as N,r as x,cN as s,cQ as u,cS as y}from"./vendor-3a94a37a.js";import{a as C,t as w,B as g,D as b,A as f,d as k,dx as h,C as A,U as S,T as v}from"./index-ed7845ca.js";import{C as O}from"./CreateDrawer-a7af16b9.js";import{A as j}from"./AddOpportunity-ee63437e.js";import"./vendor-large-f75deccb.js";function I(){const o=n(a=>a.opportunityType.list)||[],r=n(a=>a.opportunityStage.list)||[],p=n(a=>a.opportunitySource.list)||[],m=n(a=>a.company.list)||[],d=n(a=>a.contact.list)||[],i=n(a=>a.users.list)||[],t=N(),c=[{key:"opportunityOwner",label:"Owner",type:"select",options:i==null?void 0:i.map(a=>({label:`${a.username}`,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"company",label:"Company",type:"select",options:m==null?void 0:m.map(a=>({label:a.companyName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"contact",label:"Contact",type:"select",options:d==null?void 0:d.map(a=>({label:a.firstName+" "+a.lastName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"opportunityType",label:"Type",type:"select",options:o==null?void 0:o.map(a=>({label:a.opportunityTypeName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"opportunityStage",label:"Stage",type:"select",options:r==null?void 0:r.map(a=>({label:a.opportunityStageName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"},{key:"opportunitySource",label:"Source",type:"select",options:p==null?void 0:p.map(a=>({label:a.opportunitySourceName,value:a.id})),className:"min-w-[85px] max-w-[150px]",popupClassName:"w-[100px]"}];return x.useEffect(()=>{t(C()),t(w()),t(g()),t(b()),t(f()),t(k({query:"all"}))},[t]),c}function T(){const o=N(),{list:r,loading:p,total:m,edit:d}=n(e=>e.opportunity),i=I(),[t,c]=x.useState({page:1,count:10}),a=[{title:"Name",key:"Opportunity Name",render:({opportunityName:e,id:l})=>s.jsx(u,{to:`/admin/crm/opportunity/${l}`,children:e}),renderCsv:({opportunityName:e})=>e},{title:"Owner",dataIndex:"opportunityOwner",key:"owner",render:(e,l)=>s.jsxs(u,{to:`/admin/crm/staffs/${l==null?void 0:l.opportunityOwnerId}`,children:[e.firstName," ",e.lastName]}),renderCsv:e=>`${e.firstName} ${e.lastName}`},{title:"Amount",dataIndex:"amount",key:"amount",amount:"amount"},{title:"Company",dataIndex:"company",key:"company",render:(e,l)=>s.jsx(u,{to:`/admin/crm/company/${l==null?void 0:l.companyId}`,children:e==null?void 0:e.companyName}),renderCsv:e=>e==null?void 0:e.companyName},{title:"Stage",key:"Stage",dataIndex:"opportunityStage",render:e=>e==null?void 0:e.opportunityStageName,renderCsv:e=>e==null?void 0:e.opportunityStageName},{title:"Type",dataIndex:"opportunityType",key:"opportunityType",render:e=>e==null?void 0:e.opportunityTypeName,renderCsv:e=>e==null?void 0:e.opportunityTypeName},{title:"Source",dataIndex:"opportunitySource",key:"opportunitySource",render:e=>e==null?void 0:e.opportunitySourceName,renderCsv:e=>e==null?void 0:e.opportunitySourceName},{title:"Create date",dataIndex:"createdAt",key:"createdAt",render:e=>y(e).format("ll"),renderCsv:e=>y(e).format("ll")}];return x.useEffect(()=>{o(h(t))},[o,t]),s.jsx(s.Fragment,{children:s.jsx(A,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Opportunity",extra:s.jsx(O,{permission:"create-opportunity",title:"Create Opportunity",width:40,children:s.jsx(j,{})}),children:s.jsx(S,{permission:"readAll-opportunity",children:s.jsx(v,{list:r,columns:a,loading:p,total:m,setPageConfig:c,title:"Opportunity List",isSearch:!0,filters:i})})})})}export{T as default};
