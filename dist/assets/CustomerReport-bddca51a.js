import{cM as A,cS as x,cN as e,cL as C,r as p,cQ as h}from"./vendor-3a94a37a.js";import{aX as m,c5 as P,C as F,c6 as N}from"./index-ed7845ca.js";import{R as D}from"./ReportTable-b23b8ac7.js";import{i as I}from"./invoiceGenerator-eaeb8720.js";import{u as T}from"./useCurrency-4b14dd3d.js";import"./vendor-large-f75deccb.js";function b({data:s,info:t,title:u,type:r,btnName:n}){const{currencyName:d}=T()||{},l=A(a=>{var i;return(i=a==null?void 0:a.setting)==null?void 0:i.data})||null,o=[],c=[{label:"Total",value:`${t!=null&&t.grandTotalAmount?t.grandTotalAmount.toFixed(2):0}`},{label:"Paid",value:`${t!=null&&t.grandTotalPaidAmount?t.grandTotalPaidAmount.toFixed(2):0}`},{label:"Due",value:`${t!=null&&t.grandDueAmount?t.grandDueAmount.toFixed(2):0}`},{label:"Return",value:`${t!=null&&t.grandTotalReturnAmount?t.grandTotalReturnAmount.toFixed(2):0}`},{label:"Instant Paid Return",value:`${t!=null&&t.grandInstantPaidReturnAmount?t.grandInstantPaidReturnAmount.toFixed(2):0}`}],g=["SL","Date","Name","Email","Phone","Address","Total ","Paid","Due","Return"],R=s.map((a,i)=>[`${i+1}`,x(a.createdAt).format("YYYY-MM-DD"),a.username,a.email,a.phone,a.address,`${a.totalAmount?a.totalAmount.toFixed(2):0}`,`${a.totalPaidAmount?a.totalPaidAmount.toFixed(2):0}`,`${a.dueAmount?a.dueAmount.toFixed(2):0}`,`${a.totalReturnAmount?a.totalReturnAmount.toFixed(2):0}`]),y=[],j=[{value:`Report Date: ${x().format("YYYY-MM-DD")}`},{value:`Currency: ${d}`}],v={jsPDF:{orientation:"landscape"},tableFontSize:10,infoTopFontSize:8,bottomRightFontSize:10,bottomLeftFontSize:8,footerFontSize:10};return e.jsx("div",{className:"flex gap-2",children:e.jsx(m,{className:"bg-primary flex justify-center items-center px-4 py-2 text-white rounded",onClick:()=>I(r,{title:u,TopRightInfo:j,companyInfo:l,customerInfo:y,bottomLeftContent:o,bottomRightContent:c,tableBody:R,tableHead:g,settings:v}),children:n})})}function z(){const s=C(),[t,u]=p.useState(!1),{list:r,loading:n,info:d}=A(o=>o.customers),l=[{id:1,title:"ID",dataIndex:"id",key:"id",render:o=>e.jsx(h,{to:`/admin/customer/${o}`,children:o}),renderCsv:o=>o},{id:2,title:"username",dataIndex:"username",key:"name",render:(o,{id:c})=>e.jsx(h,{to:`/admin/customer/${c}`,children:o}),renderCsv:o=>o},{id:3,title:"Email",dataIndex:"email",key:"email"},{id:3,title:"Phone",dataIndex:"phone",key:"phone"},{id:4,title:"Address",dataIndex:"address",key:"address",responsive:["md"]},{id:4,title:"Total",dataIndex:"totalAmount",key:"totalAmount",responsive:["md"]},{id:4,title:"Paid",dataIndex:"totalPaidAmount",key:"totalPaidAmount",responsive:["md"]},{id:4,title:"Due",dataIndex:"dueAmount",key:"dueAmount",responsive:["md"]},{id:4,title:"Return",dataIndex:"totalReturnAmount",key:"totalReturnAmount",responsive:["md"]}];return p.useEffect(()=>{s(P())},[s]),e.jsx("div",{className:"card card-custom mt-3 ",children:e.jsx("div",{className:"card-body",children:e.jsxs(F,{className:"max-md:border-0 max-md:bg-white",bodyClass:"max-md:p-0 ",headClass:"border-none",title:"Customer Report",children:[e.jsxs("div",{className:"flex justify-between py-5 items-start ",children:[e.jsx("div",{children:e.jsx(m,{onClick:()=>u(!0),className:"bg-green-500 text-white",children:"Generate Report"})}),e.jsxs("div",{className:"flex gap-2 items-center ",children:[!n&&r?e.jsx(b,{data:r,info:d,title:"Customer Report",type:"print",btnName:"Print"}):e.jsx("div",{children:e.jsx(m,{loading:n||!r,className:"bg-primary text-white",children:"Print"})}),!n&&r?e.jsx(b,{data:r,info:d,title:"Customer Report",type:"download",btnName:"Export PDF"}):e.jsx("div",{children:e.jsx(m,{loading:n||!r,className:"bg-primary text-white",children:"Export PDF"})}),e.jsx("div",{children:e.jsx(N,{list:r,columns:l,title:"Customer Report",className:"bg-primary",btnName:"Export CSV"})})]})]}),t&&e.jsx(D,{list:r,columns:l,loading:n})]})})})}export{z as default};
