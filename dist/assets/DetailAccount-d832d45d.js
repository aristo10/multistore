import{cL as y,r as u,cM as g,cN as e,cT as S,cS as b}from"./vendor-3a94a37a.js";import{ah as v,bH as A,bI as k,bJ as F,L as I}from"./index-ed7845ca.js";import{F as m,B as N,M as B,I as L,b as w,C as P}from"./vendor-large-f75deccb.js";const T=({account:a,id:n})=>{const t=y(),[d,c]=u.useState(!1),[f,o]=u.useState(!1),[p]=m.useForm(),h=g(l=>{var i;return(i=l==null?void 0:l.accounts)==null?void 0:i.mainAccount})||null;u.useEffect(()=>{t(v())},[t]);const x=async l=>{await t(A({id:n,values:l})),c(!1),o(!1)},j=l=>{c(!1)},s=()=>{o(!0)},r=()=>{c(!0),setTimeout(()=>{c(!1),o(!1)},3e3)},C=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(N,{onClick:s,size:"small",children:"Update Account"}),e.jsx(B,{open:f,title:"",onOk:r,onCancel:C,footer:null,children:e.jsxs(m,{form:p,name:"basic",layout:"vertical",className:"sm:mx-10",initialValues:a,onFinish:x,onFinishFailed:j,autoComplete:"off",children:[e.jsx(m.Item,{style:{marginBottom:"10px"},name:"name",label:"Name",rules:[{required:!0,message:"Please input debit account!"}],children:e.jsx(L,{})}),e.jsx(m.Item,{style:{marginBottom:"10px"},name:"accountId",label:"Account Type",rules:[{required:!0,message:"Please input debit account!"}],children:e.jsx(w,{loading:!h,showSearch:!0,placeholder:"Select Account Type",optionFilterProp:"children",filterOption:(l,i)=>i.children.includes(l),filterSort:(l,i)=>l.children.toLowerCase().localeCompare(i.children.toLowerCase()),children:h&&h.map(l=>e.jsx(w.Option,{value:l.id,children:l.name},l.id))})}),e.jsx(m.Item,{style:{marginBottom:"10px"},children:e.jsx(N,{block:!0,type:"primary",htmlType:"submit",shape:"round",loading:d,onClick:()=>c(!0),children:"Update Account"})})]})})]})},E=()=>{var x,j;const a=g(s=>s.accounts.account),{id:n}=S(),t=y(),[d,c]=u.useState({}),{list:f,loading:o,defaultStore:p}=g(s=>s.store);u.useEffect(()=>(t(k({id:n,pageConfig:d})),()=>{t(F())}),[t,n,d]);const h=(s,r)=>{c({...d,[r]:s})};return e.jsx(e.Fragment,{children:e.jsx(P,{children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"card-title flex flex-col sm:flex-row justify-between mb-4",children:[e.jsxs("h5",{className:"text-xl mb-3 sm:mb-0",children:[e.jsxs("span",{className:"ml-2",children:[" Account Ledger: ",a==null?void 0:a.name]}),e.jsx("div",{className:"filterTag min-w-[120px] max-w-[150px]",children:e.jsx(w,{placeholder:"Select Store",className:"",loading:o,defaultValue:p==null?void 0:p.id,mode:"multiple",showSearch:!1,style:{width:"100%"},maxTagPlaceholder:s=>e.jsxs("div",{className:"",children:[s.length," Selected"]}),maxTagCount:0,onChange:s=>h(s,"storeId"),children:f.map(s=>e.jsx(w.Option,{value:s.id,children:s.name},s.id))})})]}),n>15&&e.jsx(T,{account:a||{},id:n})]}),a?e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"border-gray-200 w-full rounded  overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-tableBg",children:[e.jsx("thead",{className:"font-Popins text-black/70 bg-tableHeaderBg border-gray-200 uppercase",children:e.jsxs("tr",{className:"border-b border-gray",children:[e.jsx("th",{scope:"col",className:"py-[14px] pl-3 text-left whitespace-nowrap tracking-wide",children:"Date"}),e.jsx("th",{scope:"col",className:"py-[14px] pl-3 text-left whitespace-nowrap tracking-wide",children:"Debit"}),e.jsx("th",{scope:"col",className:"py-[14px] pl-3 text-left whitespace-nowrap tracking-wide",children:"Credit"}),e.jsx("th",{scope:"col",className:"py-[14px] pl-3 text-left whitespace-nowrap tracking-wide",children:"Particulars"})]})}),e.jsxs("tbody",{children:[a&&((x=a==null?void 0:a.debit)==null?void 0:x.map((s,r)=>e.jsxs("tr",{className:"hover:bg-slate-900/10 border-b",children:[e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:b(s.date).format("ll")}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:s.amount}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap"}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:s.particulars})]},r))),a&&((j=a==null?void 0:a.credit)==null?void 0:j.map((s,r)=>e.jsxs("tr",{className:"hover:bg-slate-900/10 border-b",children:[e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:b(s.date).format("ll")}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap"}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:s.amount}),e.jsx("td",{className:"py-2 pl-3 whitespace-nowrap",children:s.particulars})]},r))),a&&e.jsxs("tr",{className:"hover:bg-slate-900/10 border-b rounded-b",children:[e.jsx("td",{colSpan:"2",className:"py-3 pl-3 whitespace-nowrap",children:e.jsx("strong",{children:"Balance"})}),e.jsx("td",{children:e.jsx("strong",{children:a==null?void 0:a.balance.toFixed(2)})})]})]})]})})}):e.jsx(I,{})]})})})};export{E as default};
