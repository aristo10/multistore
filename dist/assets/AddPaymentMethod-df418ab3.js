import{cL as L,r as o,cM as P,cN as e,cU as C}from"./vendor-3a94a37a.js";import{aj as N,aK as B,aL as k}from"./index-ed7845ca.js";import{A as v}from"./AddAccount-8cfc0f4b.js";import{B as M}from"./BigDrawer-240149a9.js";import{F as s,I as p,b as h,U as q,P as U,B as D}from"./vendor-large-f75deccb.js";function K(){const[g]=s.useForm(),n=L(),[x,r]=o.useState(!1),[l,i]=o.useState([]),[c,u]=o.useState(null),[d,f]=o.useState(""),{list:m,loading:b}=P(t=>t.accounts),j=async t=>{try{let a=new FormData;a.append("methodName",t.methodName),a.append("subAccountId",c),a.append("ownerAccount",t.ownerAccount),a.append("instruction",d),a.append("images[]",l[0].originFileObj),(await n(B(a))).payload.message==="success"&&(i([]),u(null),n(k({status:"true",page:1,count:10}))),r(!1)}catch{r(!1)}},A=()=>{},y=({fileList:t})=>{i(t)},w=t=>{u(t)},I=t=>{f(t)};o.useEffect(()=>{n(N())},[n]);const F=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background"],S={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline"],["link","image"],[{color:[]},{background:[]}],["clean"]]};return e.jsx("div",{children:e.jsxs(s,{form:g,name:"basic",layout:"vertical",className:"sm:mx-10",initialValues:{remember:!0},onFinish:j,onFinishFailed:A,autoComplete:"off",children:[e.jsx(s.Item,{style:{marginBottom:"15px"},label:"Method Name",name:"methodName",rules:[{required:!0,message:"Please input method name!"}],children:e.jsx(p,{})}),e.jsxs("div",{className:"flex items-center flex-wrap",children:[e.jsx(s.Item,{style:{marginBottom:"15px"},label:"Owner Account",name:"ownerAccount",className:"w-full",rules:[{required:!0,message:"Please input owner account!"}],children:e.jsx(p,{})})," ",e.jsx(s.Item,{style:{marginBottom:"15px"},label:e.jsxs(e.Fragment,{children:["Sub Account",e.jsx(M,{title:"new Account",children:e.jsx(v,{drawer:!0})})]}),name:"subAccountId",className:"w-full",rules:[{required:c===null,message:"Please input sub account!"}],children:e.jsx(h,{name:"subAccountId",loading:b,showSearch:!0,placeholder:"Select Sub Account",optionFilterProp:"children",filterOption:(t,a)=>a.children.includes(t),filterSort:(t,a)=>t.children.toLowerCase().localeCompare(a.children.toLowerCase()),onChange:w,children:m&&m.map(t=>e.jsx(h.Option,{value:t.id,children:t.name},t.id))})})]}),e.jsx(s.Item,{label:"Upload Logo ",valuePropName:"Logo",required:!0,children:e.jsx(q,{listType:"picture-card",beforeUpload:()=>!1,name:"image",fileList:l,maxCount:1,onChange:y,accept:"image/png, image/jpg, image/jpeg",children:e.jsxs("div",{children:[e.jsx(U,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})}),e.jsx(s.Item,{style:{marginBottom:"15px"},label:"Instruction",name:"instruction",rules:[{required:!0,message:"Please input instruction !"}],children:e.jsx(C,{value:d,onChange:I,modules:S,formats:F})}),e.jsx(s.Item,{style:{marginBottom:"15px"},className:"flex justify-center mt-[24px]",children:e.jsx(D,{type:"primary",htmlType:"submit",shape:"round",loading:x,onClick:()=>{r(!0)},children:"Create payment Method"})})]})})}export{K as A};
